Metadata-Version: 2.1
Name: authapi
Version: 0.1.13
Summary: OAuth2 Code Grant Authentication API
Home-page: https://github.com/manucalop/authapi
License: MIT
Author: Manuel Castillo-Lopez
Author-email: manucalop@gmail.com
Requires-Python: >=3.9,<4.0
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.9
Requires-Dist: Flask (>=2.1.2,<3.0.0)
Requires-Dist: cffi (>=1.15.0,<2.0.0)
Requires-Dist: pyOpenSSL (>=22.0.0,<23.0.0)
Requires-Dist: pydantic (>=1.9.1,<2.0.0)
Requires-Dist: requests-oauthlib (>=1.3.1,<2.0.0)
Project-URL: Repository, https://github.com/manucalop/authapi
Description-Content-Type: text/markdown

# AuthAPI

A Simple Python API for Authenticated Operations.

![landing_img](./docs/img/landing.png)

## Quickstart:

Let's assume you want to interact with Google Ads API.

1. Create a `app_secret.json` with the following information:

```json
{
    "client_id": "...",
    "client_secret": "..."
}
```

2. Upload `app_secret.json` to your Secret Manager. Let's assume it's Google Cloud's Secret Manager.

3. Create a `main.py` script and paste the following content.

```python
from authapi import AuthAPI, AuthData

class JsonSecret:
    def __init__(self, path: str):
        self.path = path

    def pull(self) -> dict:
        with open(self.path, "r") as f:
            return json.load(f)

    def push(self, payload: dict) -> None:
        with open(self.path, "w") as f:
            json.dump(payload, f)

app_secret = JsonSecret("your_secret.json")
app_token = JsonSecret("your_token.json")

auth_data = AuthData(**app_secret.pull())

app = AuthAPI(
    name="Auth API: My Auth API",
    auth_data=auth_data,
    token_secret=app_token,
)

app.debug = True


@app.route("/run", methods=["GET", "POST"])
def run():
    token = app.get_token()
    # Do your stuff here
    return "Done!"


if __name__ == "__main__":
    app.run(ssl_context="adhoc")
```

You must fill the details in `your_secret.json` as follows:

```json
{
    "client_id": "",
    "client_secret": "",
    "authorize_url": "",
    "access_token_url": "",
    "scopes": []
}

```

4. Visit [https://127.0.0.1:5000/](https://127.0.0.1:5000/) to start the authentication process.


