"use strict";(self.webpackChunkbqplot_image_gl=self.webpackChunkbqplot_image_gl||[]).push([[779],{6081:(t,r,n)=>{function a(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}var e,i;function o(t,r){var n,a,e,i=t.length,o=-1;if(null==r){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(a=e=n;++o<i;)null!=(n=t[o])&&(a>n&&(a=n),e<n&&(e=n))}else for(;++o<i;)if(null!=(n=r(t[o],o,t))&&n>=n)for(a=e=n;++o<i;)null!=(n=r(t[o],o,t))&&(a>n&&(a=n),e<n&&(e=n));return[a,e]}n.d(r,{We:()=>o,Fp:()=>g,TS:()=>s,w6:()=>v,_X:()=>d,ly:()=>c}),1===(e=a).length&&(i=e,e=function(t,r){return a(i(t),r)});var h=Array.prototype,u=(h.slice,h.map,Math.sqrt(50)),f=Math.sqrt(10),l=Math.sqrt(2);function c(t,r,n){var a=Math.abs(r-t)/Math.max(0,n),e=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),i=a/e;return i>=u?e*=10:i>=f?e*=5:i>=l&&(e*=2),r<t?-e:e}function d(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function g(t,r){var n,a,e=t.length,i=-1;if(null==r){for(;++i<e;)if(null!=(n=t[i])&&n>=n)for(a=n;++i<e;)null!=(n=t[i])&&n>a&&(a=n)}else for(;++i<e;)if(null!=(n=r(t[i],i,t))&&n>=n)for(a=n;++i<e;)null!=(n=r(t[i],i,t))&&n>a&&(a=n);return a}function s(t){for(var r,n,a,e=t.length,i=-1,o=0;++i<e;)o+=t[i].length;for(n=new Array(o);--e>=0;)for(r=(a=t[e]).length;--r>=0;)n[--o]=a[r];return n}function v(t,r,n){t=+t,r=+r,n=(e=arguments.length)<2?(r=t,t=0,1):e<3?1:+n;for(var a=-1,e=0|Math.max(0,Math.ceil((r-t)/n)),i=new Array(e);++a<e;)i[a]=t+a*n;return i}},9779:(t,r,n)=>{n.r(r),n.d(r,{contourDensity:()=>p,contours:()=>d});var a=n(6081),e=Array.prototype.slice;function i(t,r){return t-r}function o(t){return function(){return t}}function h(t,r){for(var n,a=-1,e=r.length;++a<e;)if(n=u(t,r[a]))return n;return 0}function u(t,r){for(var n=r[0],a=r[1],e=-1,i=0,o=t.length,h=o-1;i<o;h=i++){var u=t[i],l=u[0],c=u[1],d=t[h],g=d[0],s=d[1];if(f(u,d,r))return 0;c>a!=s>a&&n<(g-l)*(a-c)/(s-c)+l&&(e=-e)}return e}function f(t,r,n){var a,e,i,o;return function(t,r,n){return(r[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(r[1]-t[1])}(t,r,n)&&(e=t[a=+(t[0]===r[0])],i=n[a],o=r[a],e<=i&&i<=o||o<=i&&i<=e)}function l(){}var c=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function d(){var t=1,r=1,n=a._X,u=s;function f(t){var r=n(t);if(Array.isArray(r))r=r.slice().sort(i);else{var e=(0,a.We)(t),o=e[0],h=e[1];r=(0,a.ly)(o,h,r),r=(0,a.w6)(Math.floor(o/r)*r,Math.floor(h/r)*r,r)}return r.map((function(r){return d(t,r)}))}function d(n,a){var e=[],i=[];return function(n,a,e){var i,o,h,u,f,l,d=new Array,s=new Array;for(i=o=-1,u=n[0]>=a,c[u<<1].forEach(v);++i<t-1;)h=u,u=n[i+1]>=a,c[h|u<<1].forEach(v);for(c[u<<0].forEach(v);++o<r-1;){for(i=-1,u=n[o*t+t]>=a,f=n[o*t]>=a,c[u<<1|f<<2].forEach(v);++i<t-1;)h=u,u=n[o*t+t+i+1]>=a,l=f,f=n[o*t+i+1]>=a,c[h|u<<1|f<<2|l<<3].forEach(v);c[u|f<<3].forEach(v)}for(i=-1,f=n[o*t]>=a,c[f<<2].forEach(v);++i<t-1;)l=f,f=n[o*t+i+1]>=a,c[f<<2|l<<3].forEach(v);function v(t){var r,n,a=[t[0][0]+i,t[0][1]+o],h=[t[1][0]+i,t[1][1]+o],u=g(a),f=g(h);(r=s[u])?(n=d[f])?(delete s[r.end],delete d[n.start],r===n?(r.ring.push(h),e(r.ring)):d[r.start]=s[n.end]={start:r.start,end:n.end,ring:r.ring.concat(n.ring)}):(delete s[r.end],r.ring.push(h),s[r.end=f]=r):(r=d[f])?(n=s[u])?(delete d[r.start],delete s[n.end],r===n?(r.ring.push(h),e(r.ring)):d[n.start]=s[r.end]={start:n.start,end:r.end,ring:n.ring.concat(r.ring)}):(delete d[r.start],r.ring.unshift(a),d[r.start=u]=r):d[u]=s[f]={start:u,end:f,ring:[a,h]}}c[f<<3].forEach(v)}(n,a,(function(t){u(t,n,a),function(t){for(var r=0,n=t.length,a=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++r<n;)a+=t[r-1][1]*t[r][0]-t[r-1][0]*t[r][1];return a}(t)>0?e.push([t]):i.push(t)})),i.forEach((function(t){for(var r,n=0,a=e.length;n<a;++n)if(-1!==h((r=e[n])[0],t))return void r.push(t)})),{type:"MultiPolygon",value:a,coordinates:e}}function g(r){return 2*r[0]+r[1]*(t+1)*4}function s(n,a,e){n.forEach((function(n){var i,o=n[0],h=n[1],u=0|o,f=0|h,l=a[f*t+u];o>0&&o<t&&u===o&&(i=a[f*t+u-1],n[0]=o+(e-i)/(l-i)-.5),h>0&&h<r&&f===h&&(i=a[(f-1)*t+u],n[1]=h+(e-i)/(l-i)-.5)}))}return f.contour=d,f.size=function(n){if(!arguments.length)return[t,r];var a=Math.ceil(n[0]),e=Math.ceil(n[1]);if(!(a>0&&e>0))throw new Error("invalid size");return t=a,r=e,f},f.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?o(e.call(t)):o(t),f):n},f.smooth=function(t){return arguments.length?(u=t?s:l,f):u===s},f}function g(t,r,n){for(var a=t.width,e=t.height,i=1+(n<<1),o=0;o<e;++o)for(var h=0,u=0;h<a+n;++h)h<a&&(u+=t.data[h+o*a]),h>=n&&(h>=i&&(u-=t.data[h-i+o*a]),r.data[h-n+o*a]=u/Math.min(h+1,a-1+i-h,i))}function s(t,r,n){for(var a=t.width,e=t.height,i=1+(n<<1),o=0;o<a;++o)for(var h=0,u=0;h<e+n;++h)h<e&&(u+=t.data[o+h*a]),h>=n&&(h>=i&&(u-=t.data[o+(h-i)*a]),r.data[o+(h-n)*a]=u/Math.min(h+1,e-1+i-h,i))}function v(t){return t[0]}function w(t){return t[1]}function M(){return 1}function p(){var t=v,r=w,n=M,i=960,h=500,u=20,f=2,l=3*u,c=i+2*l>>f,p=h+2*l>>f,y=o(20);function E(e){var i=new Float32Array(c*p),o=new Float32Array(c*p);e.forEach((function(a,e,o){var h=+t(a,e,o)+l>>f,u=+r(a,e,o)+l>>f,d=+n(a,e,o);h>=0&&h<c&&u>=0&&u<p&&(i[h+u*c]+=d)})),g({width:c,height:p,data:i},{width:c,height:p,data:o},u>>f),s({width:c,height:p,data:o},{width:c,height:p,data:i},u>>f),g({width:c,height:p,data:i},{width:c,height:p,data:o},u>>f),s({width:c,height:p,data:o},{width:c,height:p,data:i},u>>f),g({width:c,height:p,data:i},{width:c,height:p,data:o},u>>f),s({width:c,height:p,data:o},{width:c,height:p,data:i},u>>f);var h=y(i);if(!Array.isArray(h)){var v=(0,a.Fp)(i);h=(0,a.ly)(0,v,h),(h=(0,a.w6)(0,Math.floor(v/h)*h,h)).shift()}return d().thresholds(h).size([c,p])(i).map(A)}function A(t){return t.value*=Math.pow(2,-2*f),t.coordinates.forEach(m),t}function m(t){t.forEach(b)}function b(t){t.forEach(q)}function q(t){t[0]=t[0]*Math.pow(2,f)-l,t[1]=t[1]*Math.pow(2,f)-l}function z(){return c=i+2*(l=3*u)>>f,p=h+2*l>>f,E}return E.x=function(r){return arguments.length?(t="function"==typeof r?r:o(+r),E):t},E.y=function(t){return arguments.length?(r="function"==typeof t?t:o(+t),E):r},E.weight=function(t){return arguments.length?(n="function"==typeof t?t:o(+t),E):n},E.size=function(t){if(!arguments.length)return[i,h];var r=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(r>=0||r>=0))throw new Error("invalid size");return i=r,h=n,z()},E.cellSize=function(t){if(!arguments.length)return 1<<f;if(!((t=+t)>=1))throw new Error("invalid cell size");return f=Math.floor(Math.log(t)/Math.LN2),z()},E.thresholds=function(t){return arguments.length?(y="function"==typeof t?t:Array.isArray(t)?o(e.call(t)):o(t),E):y},E.bandwidth=function(t){if(!arguments.length)return Math.sqrt(u*(u+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return u=Math.round((Math.sqrt(4*t*t+1)-1)/2),z()},E}}}]);