{"version":3,"file":"lib_widget_js.a78957a21bc22a60aad1.js","mappings":";;;;;;;;;AAAa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,mBAAO,CAAC,2DAAQ;AACjC,gBAAgB,mBAAO,CAAC,sEAAc;AACtC,iCAAiC,mBAAO,CAAC,4CAAU;AACnD,wCAAwC,mBAAO,CAAC,0DAAiB;AACjE,oBAAoB,wEAAwE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,8CAA8C,mDAAmD;AACjG;AACA;AACA,kBAAe;AACf;;;;;;;;;;;ACnDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,mBAAO,CAAC,2DAAQ;AACjC,gBAAgB,mBAAO,CAAC,sEAAc;AACtC,iBAAiB,mBAAO,CAAC,4CAAU;AACnC,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sDAAsD;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,2BAA2B;AACpE;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL,qCAAqC,2BAA2B;AAChE;AACA;AACA,yBAAyB,uCAAuC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,+BAA+B,2BAA2B;AAC1D;AACA,kBAAe;AACf;;;;;;;;;;;ACzEa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,mBAAO,CAAC,2DAAQ;AACjC,iBAAiB,mBAAO,CAAC,4CAAU;AACnC,iBAAiB,6BAA6B;AAC9C;AACA;AACA;AACA;AACA,iCAAiC,YAAY;AAC7C;AACA,+BAA+B,iDAAiD;AAChF;AACA,kBAAkB,sCAAsC;AACxD,+BAA+B,6BAA6B;AAC5D;AACA;AACA;AACA,KAAK;AACL;AACA,kBAAe;AACf;;;;;;;;;;;ACrBa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,mBAAO,CAAC,2DAAQ;AACjC,uCAAuC,mBAAO,CAAC,oEAAsB;AACrE,sCAAsC,mBAAO,CAAC,kEAAqB;AACnE,eAAe,kCAAkC;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kBAAkB;AACjD,4BAA4B,mEAAmE;AAC/F,mCAAmC,cAAc,IAAI,UAAU;AAC/D,4BAA4B,+DAA+D;AAC3F;AACA;AACA,kBAAe;AACf;;;;;;;;;;;AC1Ba;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,mBAAO,CAAC,2DAAQ;AACjC,iCAAiC,mBAAO,CAAC,4CAAU;AACnD,8BAA8B,mBAAO,CAAC,sCAAO;AAC7C,kBAAkB,yEAAyE;AAC3F,+BAA+B,qBAAqB;AACpD,uCAAuC,sCAAsC;AAC7E,oCAAoC,kCAAkC;AACtE;AACA;AACA,kBAAe;AACf;;;;;;;;;;;ACfa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,YAAY;AACvC,YAAY;AACZ;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;AChHa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,mBAAO,CAAC,2DAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kBAAe;AACf;;;;;;;;;;;AClBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,mBAAO,CAAC,2DAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kBAAe;AACf;;;;;;;;;;;AClBa;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,sBAAsB;AAC5C;AACA;AACA;AACA,aAAa,mBAAO,CAAC,uCAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;ACpBa;AACb;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB,GAAG,qBAAqB;AAC5C,eAAe,mBAAO,CAAC,oFAAuB;AAC9C,iBAAiB,mBAAO,CAAC,2DAAQ;AACjC,kBAAkB,mBAAO,CAAC,mCAAW;AACrC,mCAAmC,mBAAO,CAAC,2DAAuB;AAClE;AACA,mBAAO,CAAC,2CAAmB;AAC3B,iBAAiB,mBAAO,CAAC,uDAAqB;AAC9C;AACA;AACA,qBAAqB;AACrB,4CAA4C;AAC5C;AACA;AACA;AACA,0CAA0C;AAC1C,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA,iDAAiD,WAAW,OAAO;AACnE,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,wCAAwC,kBAAkB;AAC1D;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kEAAkE,WAAW,wBAAwB;AACrG,SAAS;AACT;AACA;AACA;AACA;AACA,oBAAoB;AACpB;;;;;;;;;;ACpEA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,oCAAoC,kBAAkB,qBAAqB,oBAAoB,kFAAkF,uBAAuB,GAAG,UAAU,2BAA2B,oBAAoB,mBAAmB,6BAA6B,uBAAuB,uBAAuB,oBAAoB,0BAA0B,gCAAgC,mBAAmB,GAAG,aAAa,sBAAsB,GAAG,mBAAmB,kBAAkB,qBAAqB,qBAAqB,iBAAiB,sBAAsB,oEAAoE,8BAA8B,8BAA8B,+BAA+B,GAAG,aAAa,kBAAkB,wBAAwB,mCAAmC,mBAAmB,gBAAgB,kBAAkB,wBAAwB,2BAA2B,oBAAoB,GAAG,UAAU,kBAAkB,GAAG,cAAc,oBAAoB,gBAAgB,GAAG,WAAW,oBAAoB,0BAA0B,wBAAwB,sBAAsB,mBAAmB,oBAAoB,GAAG,iBAAiB,6BAA6B,GAAG,gBAAgB,oBAAoB,sBAAsB,8BAA8B,2BAA2B,GAAG;AACz2C;AACA;;;;;;;;;;;ACNA,UAAU,mBAAO,CAAC,oJAAwE;AAC1F,0BAA0B,mBAAO,CAAC,qHAAuD;;AAEzF;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA","sources":["webpack://jupyterannotate/./lib/components/Annotate.js","webpack://jupyterannotate/./lib/components/Highlightable.js","webpack://jupyterannotate/./lib/components/Labels.js","webpack://jupyterannotate/./lib/components/Nav.js","webpack://jupyterannotate/./lib/components/TopBar.js","webpack://jupyterannotate/./lib/components/colors.js","webpack://jupyterannotate/./lib/components/icons/ChevronLeft.js","webpack://jupyterannotate/./lib/components/icons/ChevronRight.js","webpack://jupyterannotate/./lib/version.js","webpack://jupyterannotate/./lib/widget.js","webpack://jupyterannotate/./css/widget.css","webpack://jupyterannotate/./css/widget.css?a195"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst preact_1 = require(\"preact\");\nconst hooks_1 = require(\"preact/hooks\");\nconst TopBar_1 = __importDefault(require(\"./TopBar\"));\nconst Highlightable_1 = __importDefault(require(\"./Highlightable\"));\nfunction Annotate({ docs, labels, initialSpans, registerSpanChangeCallback, onUpdateSpans, }) {\n    const totalDocs = docs.length;\n    const [selectedLabel, setSelectedLabel] = hooks_1.useState();\n    const [docIndex, setDocIndex] = hooks_1.useState(0);\n    const [docSpans, setDocSpans] = hooks_1.useState(initialSpans.length\n        ? initialSpans\n        : [...Array(totalDocs).keys()].map(() => []));\n    const text = hooks_1.useMemo(() => {\n        return docs[docIndex];\n    }, [docIndex, docs]);\n    hooks_1.useEffect(() => {\n        registerSpanChangeCallback((spans) => {\n            setDocSpans(spans);\n        });\n    }, []);\n    const onChangeLabel = (label) => {\n        setSelectedLabel(label);\n    };\n    const onUpdate = (changedSpans) => {\n        const updatedSpans = [...docSpans];\n        updatedSpans[docIndex] = changedSpans;\n        setDocSpans(updatedSpans);\n        onUpdateSpans(updatedSpans);\n    };\n    const onChangeNav = (docIndex) => {\n        setDocIndex(docIndex);\n    };\n    const spans = docSpans[docIndex] || [];\n    const activeLabel = selectedLabel || labels[0];\n    return preact_1.h(\"div\", null, [\n        preact_1.h(TopBar_1.default, {\n            selectedLabel: activeLabel,\n            labels,\n            totalDocs,\n            docIndex,\n            onChangeLabel,\n            onChangeNav,\n        }),\n        preact_1.h(Highlightable_1.default, { text, selectedLabel: activeLabel, spans, onUpdate }),\n    ]);\n}\nexports.default = Annotate;\n//# sourceMappingURL=Annotate.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst preact_1 = require(\"preact\");\nconst hooks_1 = require(\"preact/hooks\");\nconst colors_1 = require(\"./colors\");\nconst SpanLabel = ({ text, label, onClick, }) => {\n    const color = colors_1.HIGHLIGHT_COLORS[label.color] || colors_1.HIGHLIGHT_COLORS.red;\n    const style = {\n        backgroundColor: color[50],\n        color: color[800],\n        borderColor: color[800],\n    };\n    return preact_1.h(\"span\", { style, className: \"span\", onClick, title: label.text }, [\n        text,\n    ]);\n};\nconst getHighlightedText = (text, spans, onRemoveSpan) => {\n    const chunks = [];\n    let prevOffset = 0;\n    spans\n        .sort((a, b) => (a.start > b.start ? 1 : -1))\n        .forEach((span) => {\n        chunks.push(preact_1.h(\"span\", { \"data-offset\": prevOffset }, text.slice(prevOffset, span.start)));\n        chunks.push(SpanLabel({\n            text: span.text,\n            label: span.label,\n            onClick: () => onRemoveSpan(span),\n        }));\n        prevOffset = span.end;\n    });\n    chunks.push(preact_1.h(\"span\", { \"data-offset\": prevOffset }, text.slice(prevOffset)));\n    return chunks;\n};\nconst Highlightable = ({ text, selectedLabel, spans, onUpdate, }) => {\n    const ref = hooks_1.useRef(null);\n    function onSelect(event) {\n        var _a;\n        const dataset = ((_a = event.target) === null || _a === void 0 ? void 0 : _a.dataset) || {};\n        const offset = parseInt(dataset.offset || \"0\", 10);\n        const selected = window.getSelection();\n        const selectedText = (selected === null || selected === void 0 ? void 0 : selected.toString()) || \"\";\n        if (!selectedText.trim() || !selected) {\n            return;\n        }\n        const startOffset = selected.anchorOffset > selected.focusOffset\n            ? selected.focusOffset\n            : selected.anchorOffset;\n        const endOffset = selected.anchorOffset < selected.focusOffset\n            ? selected.focusOffset\n            : selected.anchorOffset;\n        const start = startOffset + offset;\n        const end = endOffset + offset;\n        onUpdate(spans.concat([\n            {\n                start,\n                end,\n                text: text.slice(start, end),\n                label: selectedLabel,\n            },\n        ]));\n    }\n    const onRemoveSpan = (span) => {\n        onUpdate(spans.filter((s) => s.start !== span.start));\n    };\n    hooks_1.useEffect(() => {\n        const el = ref.current;\n        if (el) {\n            el.addEventListener(\"mouseup\", onSelect);\n        }\n    }, [ref.current, onSelect]);\n    return preact_1.h(\"div\", { ref, className: \"content\" }, getHighlightedText(text, spans, onRemoveSpan));\n};\nexports.default = Highlightable;\n//# sourceMappingURL=Highlightable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst preact_1 = require(\"preact\");\nconst colors_1 = require(\"./colors\");\nconst Label = ({ label, isSelected, onClick, }) => {\n    const className = isSelected ? \"label selected\" : \"label\";\n    const color = colors_1.HIGHLIGHT_COLORS[label.color] || colors_1.HIGHLIGHT_COLORS.red;\n    const borderColor = isSelected ? color[300] : color[800];\n    const style = {\n        borderLeft: `solid 4px ${borderColor}`,\n    };\n    return preact_1.h(\"div\", { style, className, onClick: () => onClick(label) }, label.text);\n};\nconst Labels = ({ labels, selectedLabel, onChangeLabel }) => {\n    return preact_1.h(\"div\", { className: \"labelContainer\" }, labels.map((label) => preact_1.h(Label, {\n        label,\n        isSelected: label.text === selectedLabel.text,\n        onClick: onChangeLabel,\n    })));\n};\nexports.default = Labels;\n//# sourceMappingURL=Labels.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst preact_1 = require(\"preact\");\nconst ChevronRight_1 = __importDefault(require(\"./icons/ChevronRight\"));\nconst ChevronLeft_1 = __importDefault(require(\"./icons/ChevronLeft\"));\nconst Nav = ({ docIndex, totalDocs, onChangeNav }) => {\n    const onPrev = () => {\n        if (docIndex > 0) {\n            onChangeNav(docIndex - 1);\n        }\n    };\n    const onNext = () => {\n        if (docIndex < totalDocs - 1) {\n            onChangeNav(docIndex + 1);\n        }\n    };\n    return preact_1.h(\"div\", { className: \"nav\" }, [\n        preact_1.h(\"div\", { className: \"navLink\", onClick: onPrev, title: \"Previous Document\" }, preact_1.h(ChevronLeft_1.default, null)),\n        preact_1.h(\"div\", null, `${docIndex + 1} / ${totalDocs}`),\n        preact_1.h(\"div\", { className: \"navLink\", onClick: onNext, title: \"Next Document\" }, preact_1.h(ChevronRight_1.default, null)),\n    ]);\n};\nexports.default = Nav;\n//# sourceMappingURL=Nav.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst preact_1 = require(\"preact\");\nconst Labels_1 = __importDefault(require(\"./Labels\"));\nconst Nav_1 = __importDefault(require(\"./Nav\"));\nconst TopBar = ({ labels, selectedLabel, docIndex, totalDocs, onChangeLabel, onChangeNav, }) => {\n    return preact_1.h(\"div\", { className: \"topBar\" }, [\n        preact_1.h(Labels_1.default, { labels, selectedLabel, onChangeLabel }),\n        preact_1.h(Nav_1.default, { docIndex, totalDocs, onChangeNav }),\n    ]);\n};\nexports.default = TopBar;\n//# sourceMappingURL=TopBar.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HIGHLIGHT_COLORS = exports.GREY = void 0;\nexports.GREY = {\n    slate: {\n        50: \"#F8FAFC\",\n        300: \"#CBD5E1\",\n        800: \"#1E293B\",\n    },\n    gray: {\n        50: \"#F9FAFB\",\n        300: \"#D1D5DB\",\n        800: \"#1F2937\",\n    },\n    zinc: {\n        50: \"#FAFAFA\",\n        300: \"#D4D4D8\",\n        800: \"#27272A\",\n    },\n    neutral: {\n        50: \"#FAFAFA\",\n        300: \"#D4D4D4\",\n        800: \"#262626\",\n    },\n    stone: {\n        50: \"#FAFAF9\",\n        300: \"#D6D3D1\",\n        800: \"#292524\",\n    },\n};\nexports.HIGHLIGHT_COLORS = {\n    red: {\n        50: \"#FEF2F2\",\n        300: \"#FCA5A5\",\n        800: \"#991B1B\",\n    },\n    cyan: {\n        50: \"#ECFEFF\",\n        300: \"#67E8F9\",\n        800: \"#155E75\",\n    },\n    amber: {\n        50: \"#FFFBEB\",\n        300: \"#FCD34D\",\n        800: \"#92400E\",\n    },\n    violet: {\n        50: \"#F5F3FF\",\n        300: \"#C4B5FD\",\n        800: \"#5B21B6\",\n    },\n    yellow: {\n        50: \"#FEFCE8\",\n        300: \"#FDE047\",\n        800: \"#854D0E\",\n    },\n    lime: {\n        50: \"#F7FEE7\",\n        300: \"#BEF264\",\n        800: \"#3F6212\",\n    },\n    emerald: {\n        50: \"#ECFDF5\",\n        300: \"#6EE7B7\",\n        800: \"#065F46\",\n    },\n    teal: {\n        50: \"#F0FDFA\",\n        300: \"#5EEAD4\",\n        800: \"#115E59\",\n    },\n    orange: {\n        50: \"#FFF7ED\",\n        300: \"#FDBA74\",\n        800: \"#9A3412\",\n    },\n    sky: {\n        50: \"#F0F9FF\",\n        300: \"#7DD3FC\",\n        800: \"#075985\",\n    },\n    blue: {\n        50: \"#EFF6FF\",\n        300: \"#93C5FD\",\n        800: \"#1E40AF\",\n    },\n    indigo: {\n        50: \"#EEF2FF\",\n        300: \"#A5B4FC\",\n        800: \"#3730A3\",\n    },\n    purple: {\n        50: \"#FAF5FF\",\n        300: \"#D8B4FE\",\n        800: \"#6B21A8\",\n    },\n    fuchsia: {\n        50: \"#FDF4FF\",\n        300: \"#F0ABFC\",\n        800: \"#86198F\",\n    },\n    pink: {\n        50: \"#FDF2F8\",\n        300: \"#F9A8D4\",\n        800: \"#9D174D\",\n    },\n    rose: {\n        50: \"#FFF1F2\",\n        300: \"#FDA4AF\",\n        800: \"#9F1239\",\n    },\n};\n//# sourceMappingURL=colors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst preact_1 = require(\"preact\");\nconst ChevronLeft = () => {\n    return preact_1.h(\"svg\", {\n        fill: \"none\",\n        viewBox: \"0 0 24 24\",\n        stroke: \"currentColor\",\n        \"stroke-width\": \"2\",\n    }, [\n        preact_1.h(\"path\", {\n            \"stroke-linecap\": \"round\",\n            \"stroke-linejoin\": \"round\",\n            d: \"M15 19l-7-7 7-7\",\n        }),\n    ]);\n};\nexports.default = ChevronLeft;\n//# sourceMappingURL=ChevronLeft.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst preact_1 = require(\"preact\");\nconst ChevronRight = () => {\n    return preact_1.h(\"svg\", {\n        fill: \"none\",\n        viewBox: \"0 0 24 24\",\n        stroke: \"currentColor\",\n        \"stroke-width\": \"2\",\n    }, [\n        preact_1.h(\"path\", {\n            \"stroke-linecap\": \"round\",\n            \"stroke-linejoin\": \"round\",\n            d: \"M9 5l7 7-7 7\",\n        }),\n    ]);\n};\nexports.default = ChevronRight;\n//# sourceMappingURL=ChevronRight.js.map","\"use strict\";\n// Copyright (c) Stuart Quin\n// Distributed under the terms of the Modified BSD License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MODULE_NAME = exports.MODULE_VERSION = void 0;\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst data = require(\"../package.json\");\n/**\n * The _model_module_version/_view_module_version this package implements.\n *\n * The html widget manager assumes that this is the same as the npm package\n * version number.\n */\nexports.MODULE_VERSION = data.version;\n/*\n * The current package name.\n */\nexports.MODULE_NAME = data.name;\n//# sourceMappingURL=version.js.map","\"use strict\";\n// Copyright (c) Stuart Quin\n// Distributed under the terms of the Modified BSD License.\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AnnotateView = exports.AnnotateModel = void 0;\nconst base_1 = require(\"@jupyter-widgets/base\");\nconst preact_1 = require(\"preact\");\nconst version_1 = require(\"./version\");\nconst Annotate_1 = __importDefault(require(\"./components/Annotate\"));\n// Import the CSS\nrequire(\"../css/widget.css\");\nconst colors_1 = require(\"./components/colors\");\nclass AnnotateModel extends base_1.DOMWidgetModel {\n}\nexports.AnnotateModel = AnnotateModel;\nAnnotateModel.serializers = Object.assign({}, base_1.DOMWidgetModel.serializers);\nAnnotateModel.model_name = \"AnnotateModel\";\nAnnotateModel.model_module = version_1.MODULE_NAME;\nAnnotateModel.model_module_version = version_1.MODULE_VERSION;\nAnnotateModel.view_name = \"AnnotateView\"; // Set to null if no view\nAnnotateModel.view_module = version_1.MODULE_NAME; // Set to null if no view\nAnnotateModel.view_module_version = version_1.MODULE_VERSION;\nconst getSpansFromPyton = (pythonSpans, labels) => {\n    return pythonSpans.map((spans) => {\n        return spans.map((span) => {\n            const label = labels.find((l) => l.text === span.label) || labels[0];\n            return Object.assign(Object.assign({}, span), { label });\n        });\n    });\n};\nclass AnnotateView extends base_1.DOMWidgetView {\n    render() {\n        const docs = this.model.get(\"docs\") || [];\n        const labels = this.model.get(\"labels\");\n        const initialSpans = this.model.get(\"spans\") || [];\n        const colors = Object.keys(colors_1.HIGHLIGHT_COLORS);\n        const colorLabels = labels.map((text, index) => ({\n            text,\n            color: colors[index % colors.length],\n        }));\n        const registerSpanChangeCallback = (callback) => {\n            this.model.on(\"change:spans\", (model) => {\n                if (callback) {\n                    callback(getSpansFromPyton(model.changed.spans, colorLabels));\n                }\n            }, this);\n        };\n        const app = preact_1.h(\"div\", { className: \"app\" }, preact_1.h(Annotate_1.default, {\n            docs,\n            registerSpanChangeCallback,\n            labels: colorLabels,\n            initialSpans: getSpansFromPyton(initialSpans, colorLabels),\n            onUpdateSpans: (spans) => this.handleChange(spans),\n        }));\n        preact_1.render(app, this.el);\n    }\n    handleChange(spans) {\n        const pythonSpans = spans.map((s) => {\n            return s.map((span) => (Object.assign(Object.assign({}, span), { label: span.label.text })));\n        });\n        this.model.set(\"spans\", pythonSpans);\n        this.model.save_changes();\n    }\n}\nexports.AnnotateView = AnnotateView;\n//# sourceMappingURL=widget.js.map","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".content {\\n  padding: 20px;\\n  line-height: 1.7;\\n  font-size: 18px;\\n  font-family: \\\"Lato\\\", \\\"Trebuchet MS\\\", Roboto, Helvetica, Arial, sans-serif;\\n\\n  max-width: 720px;\\n}\\n.label {\\n  margin: 5px 10px 5px 0;\\n  cursor: pointer;\\n  display: block;\\n  padding: 1px 8px 1px 5px;\\n  position: relative;\\n  border-radius: 4px;\\n  font-size: 16px;\\n\\n  white-space: nowrap;\\n\\n  background-color: #D1D5DB;\\n  color: #1F2937;\\n}\\n.selected {\\n  background: white;\\n}\\n.labelContainer {\\n  display: flex;\\n  max-width: 800px;\\n  overflow-x: auto;\\n  flex-grow: 1;\\n  font-weight: bold;\\n  font-family: \\\"Roboto Condensed\\\", \\\"Arial Narrow\\\", sans-serif;\\n  text-transform: uppercase;\\n  border-top-left-radius: 0;\\n  border-top-right-radius: 0;\\n}\\n\\n.topBar {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  color: #1F2937;\\n  width: 100%;\\n  padding: 12px;\\n  background: #F3F4F6;\\n  box-sizing: border-box;\\n  font-size: 20px;\\n}\\n\\n.nav {\\n  display: flex;\\n}\\n\\n.navLink {\\n  cursor: pointer;\\n  width: 16px;\\n}\\n\\n.span {\\n  font-size: 18px;\\n  padding: 0.25em 0.4em;\\n  padding-bottom: 2px;\\n  font-weight: bold;\\n  line-height: 1;\\n  cursor: pointer;\\n}\\n\\n.span:hover {\\n  border-bottom: solid 1px;\\n}\\n\\n.spanLabel {\\n  font-size: 12px;\\n  padding-left: 8px;\\n  text-transform: uppercase;\\n  color: rgb(31, 41, 55);\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./widget.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};"],"names":[],"sourceRoot":""}