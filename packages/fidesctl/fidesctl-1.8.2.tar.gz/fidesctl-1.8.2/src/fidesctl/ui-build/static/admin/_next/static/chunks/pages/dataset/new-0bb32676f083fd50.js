(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{846:function(e,t,n){"use strict";n.d(t,{t:function(){return d},V:function(){return f}});var r=n(9499),a=n(1396),s=n(5893);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t=e.message;return(0,s.jsxs)(a.xv,{"data-testid":"toast-success-msg",children:[(0,s.jsx)("strong",{children:"Success:"})," ",t]})},u=function(e){var t=e.message;return(0,s.jsxs)(a.xv,{"data-testid":"toast-error-msg",children:[(0,s.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,s.jsx)(c,{message:e});return o(o({},l),{description:t})},f=function(e){var t=(0,s.jsx)(u,{message:e});return o(o({},l),{description:t,status:"error"})}},5353:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var r=n(1396),a=n(7336),s=n(3894),i=n(1664),o=n(7294),c=n(2137),u=n(29),l=n(6835),d=n(7794),f=n.n(d),h=n(437),p=n(8351),m=n(2175),E=n(1163),b=n(4231),x=n(9317),S=n(6016),g=n(2588),y=n(846),O=n(9112),j=n(5893),T={url:""},v=b.Ry().shape({url:b.Z_().required().label("Database URL")}),A=function(){var e=(0,O.pR)(),t=(0,l.Z)(e,2),n=t[0],a=t[1].isLoading,i=(0,O.IR)(),o=(0,l.Z)(i,2),c=o[0],d=o[1].isLoading,b=(0,h.pm)(),A=(0,E.useRouter)(),C=function(){var e=(0,u.Z)(f().mark((function e(t,r){var a,s,i,o,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setErrors,s=function(e){var t=(0,g.e$)(e);a({url:t})},i=function(){var e=(0,u.Z)(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.length){e.next=6;break}return n=t[0],e.next=4,c(n);case 4:"error"in(r=e.sent)?s(r.error):(b((0,y.t)("Successfully loaded new dataset")),(0,O._U)(r.data),A.push("/dataset/".concat(r.data.fides_key)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,n({organization_key:"default_organization",generate:{config:{connection_string:t.url},target:x.GC.DB,type:x.j.DATASETS}});case 5:"error"in(o=e.sent)?(l=(0,g.e$)(o.error),a({url:l})):i(o.data.generate_results);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,j.jsx)(m.J9,{initialValues:T,validationSchema:v,onSubmit:C,validateOnChange:!1,validateOnBlur:!1,children:function(e){var t=e.isSubmitting;return(0,j.jsxs)(m.l0,{children:[(0,j.jsx)(r.xv,{size:"sm",color:"gray.700",mb:8,children:"Connect to one of your databases using a connection URL. You may have received this URL from a colleague or your Ethyca developer support engineer."}),(0,j.jsx)(r.xu,{mb:8,children:(0,j.jsx)(S.j0,{name:"url",label:"Database URL"})}),(0,j.jsxs)(r.xu,{display:"flex",alignItems:"center",children:[(0,j.jsx)(s.zx,{size:"sm",colorScheme:"primary",type:"submit",disabled:t,mr:"2","data-testid":"create-dataset-btn",children:"Create dataset"}),a||d?(0,j.jsx)(p.$,{}):null]})]})}})},C=n(1272),L={datasetYaml:""};var I=function(){var e=(0,O.IR)(),t=(0,l.Z)(e,1)[0],n=(0,h.pm)(),a=(0,E.useRouter)(),i=function(){var e=(0,u.Z)(f().mark((function e(r,s){var i,o,c,u,d,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.setErrors,o=C.ZP.load(r.datasetYaml,{json:!0}),"object"===typeof(f=o)&&null!=f&&"dataset"in f&&Array.isArray(f.dataset)?(u=(0,l.Z)(o.dataset,1),c=u[0]):c=o,e.next=5,t(c);case 5:"error"in(d=e.sent)?(h=(0,g.e$)(d.error),i({datasetYaml:h})):"data"in d&&(n((0,y.t)("Successfully loaded new dataset YAML")),(0,O._U)(d.data),a.push("/dataset/".concat(d.data.fides_key)));case 7:case"end":return e.stop()}var f}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,j.jsx)(m.J9,{initialValues:L,validate:function(e){try{if(!C.ZP.load(e.datasetYaml,{json:!0}))return{datasetYaml:"Could not parse the supplied YAML"}}catch(t){return(0,g.FM)(t)?{datasetYaml:"Could not parse the supplied YAML: \n\n".concat(t.message)}:{datasetYaml:"Could not parse the supplied YAML"}}return{}},onSubmit:i,validateOnChange:!1,validateOnBlur:!1,children:function(e){var t=e.isSubmitting;return(0,j.jsxs)(m.l0,{children:[(0,j.jsx)(r.xv,{size:"sm",color:"gray.700",mb:4,children:"Get started creating your first dataset by pasting your dataset yaml below! You may have received this yaml from a colleague or your Ethyca developer support engineer."}),(0,j.jsx)(r.xu,{mb:4,whiteSpace:"pre-line",fontFamily:"Menlo",children:(0,j.jsx)(S.Ks,{name:"datasetYaml",textAreaProps:{fontWeight:400,lineHeight:"150%",color:"gray.800",fontSize:"13px",height:"50vh",width:"100%",mb:"2"}})}),(0,j.jsx)(s.zx,{size:"sm",colorScheme:"primary",type:"submit",disabled:t,"data-testid":"create-dataset-btn",children:"Create dataset"})]})}})},R=function(){var e=(0,o.useState)(null),t=e[0],n=e[1];return(0,j.jsxs)(c.Z,{title:"Datasets",children:[(0,j.jsx)(r.X6,{mb:2,fontSize:"2xl",fontWeight:"semibold",children:"Datasets"}),(0,j.jsx)(r.xu,{mb:8,children:(0,j.jsxs)(a.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600",children:[(0,j.jsx)(a.gN,{children:(0,j.jsx)(i.default,{href:"/dataset",children:"Datasets"})}),(0,j.jsx)(a.gN,{children:(0,j.jsx)(i.default,{href:"#",children:"Create new dataset"})})]})}),(0,j.jsxs)(r.Kq,{spacing:8,children:[(0,j.jsx)(r.xu,{w:{base:"100%",lg:"50%"},children:(0,j.jsx)(r.xv,{children:"Choose whether to upload a new dataset YAML, connect to a database using a connection URL or manually generate a dataset."})}),(0,j.jsxs)(r.xu,{children:[(0,j.jsx)(s.zx,{size:"sm",mr:2,variant:"outline",onClick:function(){return n("yaml")},isActive:"yaml"===t,"data-testid":"upload-yaml-btn",children:"Upload a new dataset YAML"}),(0,j.jsx)(s.zx,{size:"sm",mr:2,variant:"outline",onClick:function(){return n("database")},isActive:"database"===t,"data-testid":"connect-db-btn",children:"Connect a database using a connection URL"}),(0,j.jsx)(s.zx,{size:"sm",variant:"outline",disabled:!0,children:"Manually generate a dataset"})]}),(0,j.jsxs)(r.xu,{w:{base:"100%",lg:"50%"},children:["yaml"===t?(0,j.jsx)(I,{}):null,"database"===t?(0,j.jsx)(A,{}):null]})]})]})}},9317:function(e,t,n){"use strict";var r,a,s,i,o,c,u,l,d,f,h,p,m;n.d(t,{j:function(){return o},GC:function(){return m}}),function(e){e.CONTROLLER="Controller",e.PROCESSOR="Processor",e.SUB_PROCESSOR="Sub-Processor"}(r||(r={})),function(e){e.INFORMED="Informed",e.ACCESS="Access",e.RECTIFICATION="Rectification",e.ERASURE="Erasure",e.PORTABILITY="Portability",e.RESTRICT_PROCESSING="Restrict Processing",e.WITHDRAW_CONSENT="Withdraw Consent",e.OBJECT="Object",e.OBJECT_TO_AUTOMATED_PROCESSING="Object to Automated Processing"}(a||(a={})),function(e){e.INIT="init",e.RESET="reset"}(s||(s={})),function(e){e.GRAPHS="graphs",e.TEXT="text"}(i||(i={})),function(e){e.SYSTEMS="systems",e.DATASETS="datasets"}(o||(o={})),function(e){e.ALL="ALL",e.EXCLUDE="EXCLUDE",e.INCLUDE="INCLUDE",e.NONE="NONE"}(c||(c={})),function(e){e.CONSENT="Consent",e.CONTRACT="Contract",e.LEGAL_OBLIGATION="Legal Obligation",e.VITAL_INTEREST="Vital Interest",e.PUBLIC_INTEREST="Public Interest",e.LEGITIMATE_INTERESTS="Legitimate Interests"}(u||(u={})),function(e){e.ANY="ANY",e.ALL="ALL",e.NONE="NONE",e.OTHER="OTHER"}(l||(l={})),function(e){e.CONSENT="Consent",e.EMPLOYMENT="Employment",e.VITAL_INTERESTS="Vital Interests",e.NON_PROFIT_BODIES="Non-profit Bodies",e.PUBLIC_BY_DATA_SUBJECT="Public by Data Subject",e.LEGAL_CLAIMS="Legal Claims",e.SUBSTANTIAL_PUBLIC_INTEREST="Substantial Public Interest",e.MEDICAL="Medical",e.PUBLIC_HEALTH_INTEREST="Public Health Interest"}(d||(d={})),function(e){e.FAIL="FAIL",e.PASS="PASS"}(f||(f={})),function(e){e.SUCCESS="success",e.FAILURE="failure"}(h||(h={})),function(e){e.AWS="aws",e.OKTA="okta",e.BIGQUERY="bigquery"}(p||(p={})),function(e){e.AWS="aws",e.DB="db",e.OKTA="okta",e.BIGQUERY="bigquery"}(m||(m={}))},9631:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/new",function(){return n(5353)}])}},function(e){e.O(0,[731,478,801,809,942,231,449,137,985,774,888,179],(function(){return t=9631,e(e.s=t);var t}));var t=e.O();_N_E=t}]);