{"version":3,"file":"chunks/app_views_settings_organizationSecurityAndPrivacy_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/data/forms/organizationSecurityAndPrivacyGroups.tsx","webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/organizationSecurityAndPrivacy/index.tsx"],"sourcesContent":["import {JsonFormObject} from 'sentry/components/forms/type';\nimport {t} from 'sentry/locale';\nimport {convertMultilineFieldValue, extractMultilineFields} from 'sentry/utils';\nimport {\n  formatStoreCrashReports,\n  getStoreCrashReportsValues,\n  SettingScope,\n} from 'sentry/utils/crashReports';\n\n// Export route to make these forms searchable by label/help\nexport const route = '/settings/:orgId/security-and-privacy/';\nexport default [\n  {\n    title: t('Security & Privacy'),\n    fields: [\n      {\n        name: 'require2FA',\n        type: 'boolean',\n        label: t('Require Two-Factor Authentication'),\n        help: t('Require and enforce two-factor authentication for all members'),\n        confirm: {\n          true: t(\n            'This will remove all members without two-factor authentication' +\n              ' from your organization. It will also send them an email to setup 2FA' +\n              ' and reinstate their access and settings. Do you want to continue?'\n          ),\n          false: t(\n            'Are you sure you want to allow users to access your organization without having two-factor authentication enabled?'\n          ),\n        },\n      },\n      {\n        name: 'requireEmailVerification',\n        type: 'boolean',\n        label: t('Require Email Verification'),\n        help: t('Require and enforce email address verification for all members'),\n        visible: ({features}) => features.has('required-email-verification'),\n        confirm: {\n          true: t(\n            'This will remove all members whose email addresses are not verified' +\n              ' from your organization. It will also send them an email to verify their address' +\n              ' and reinstate their access and settings. Do you want to continue?'\n          ),\n          false: t(\n            'Are you sure you want to allow users to access your organization without verifying their email address?'\n          ),\n        },\n      },\n      {\n        name: 'allowSharedIssues',\n        type: 'boolean',\n\n        label: t('Allow Shared Issues'),\n        help: t('Enable sharing of limited details on issues to anonymous users'),\n        confirm: {\n          true: t('Are you sure you want to allow sharing issues to anonymous users?'),\n        },\n      },\n      {\n        name: 'enhancedPrivacy',\n        type: 'boolean',\n\n        label: t('Enhanced Privacy'),\n        help: t(\n          'Enable enhanced privacy controls to limit personally identifiable information (PII) as well as source code in things like notifications'\n        ),\n        confirm: {\n          false: t(\n            'Disabling this can have privacy implications for ALL projects, are you sure you want to continue?'\n          ),\n        },\n      },\n      {\n        name: 'scrapeJavaScript',\n        type: 'boolean',\n        confirm: {\n          false: t(\n            \"Are you sure you want to disable sourcecode fetching for JavaScript events? This will affect Sentry's ability to aggregate issues if you're not already uploading sourcemaps as artifacts.\"\n          ),\n        },\n        label: t('Allow JavaScript Source Fetching'),\n        help: t('Allow Sentry to scrape missing JavaScript source context when possible'),\n      },\n      {\n        name: 'storeCrashReports',\n        type: 'select',\n        label: t('Store Native Crash Reports'),\n        help: t(\n          'Store native crash reports such as Minidumps for improved processing and download in issue details'\n        ),\n        visible: ({features}) => features.has('event-attachments'),\n        // HACK: some organization can have limit of stored crash reports a number that's not in the options (legacy reasons),\n        // we therefore display it in a placeholder\n        placeholder: ({value}) => formatStoreCrashReports(value),\n        choices: () =>\n          getStoreCrashReportsValues(SettingScope.Organization).map(value => [\n            value,\n            formatStoreCrashReports(value),\n          ]),\n      },\n      {\n        name: 'allowJoinRequests',\n        type: 'boolean',\n\n        label: t('Allow Join Requests'),\n        help: t('Allow users to request to join your organization'),\n        confirm: {\n          true: t(\n            'Are you sure you want to allow users to request to join your organization?'\n          ),\n        },\n        visible: ({hasSsoEnabled}) => !hasSsoEnabled,\n      },\n    ],\n  },\n  {\n    title: t('Data Scrubbing'),\n    fields: [\n      {\n        name: 'dataScrubber',\n        type: 'boolean',\n        label: t('Require Data Scrubber'),\n        help: t('Require server-side data scrubbing be enabled for all projects'),\n        confirm: {\n          false: t(\n            'Disabling this can have privacy implications for ALL projects, are you sure you want to continue?'\n          ),\n        },\n      },\n      {\n        name: 'dataScrubberDefaults',\n        type: 'boolean',\n        label: t('Require Using Default Scrubbers'),\n        help: t(\n          'Require the default scrubbers be applied to prevent things like passwords and credit cards from being stored for all projects'\n        ),\n        confirm: {\n          false: t(\n            'Disabling this can have privacy implications for ALL projects, are you sure you want to continue?'\n          ),\n        },\n      },\n      {\n        name: 'sensitiveFields',\n        type: 'string',\n        multiline: true,\n        autosize: true,\n        maxRows: 10,\n        rows: 1,\n        placeholder: 'e.g. email',\n        label: t('Global Sensitive Fields'),\n        help: t(\n          'Additional field names to match against when scrubbing data for all projects. Separate multiple entries with a newline.'\n        ),\n        extraHelp: t(\n          'Note: These fields will be used in addition to project specific fields.'\n        ),\n        getValue: val => extractMultilineFields(val),\n        setValue: val => convertMultilineFieldValue(val),\n      },\n      {\n        name: 'safeFields',\n        type: 'string',\n        multiline: true,\n        autosize: true,\n        maxRows: 10,\n        rows: 1,\n        placeholder: t('e.g. business-email'),\n        label: t('Global Safe Fields'),\n        help: t(\n          'Field names which data scrubbers should ignore. Separate multiple entries with a newline.'\n        ),\n        extraHelp: t(\n          'Note: These fields will be used in addition to project specific fields'\n        ),\n        getValue: val => extractMultilineFields(val),\n        setValue: val => convertMultilineFieldValue(val),\n      },\n      {\n        name: 'scrubIPAddresses',\n        type: 'boolean',\n        label: t('Prevent Storing of IP Addresses'),\n        help: t(\n          'Preventing IP addresses from being stored for new events on all projects'\n        ),\n        confirm: {\n          false: t(\n            'Disabling this can have privacy implications for ALL projects, are you sure you want to continue?'\n          ),\n        },\n      },\n    ],\n  },\n] as JsonFormObject[];\n","import AsyncComponent from 'sentry/components/asyncComponent';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    return (\n      <SentryDocumentTitle title={this.getTitle()}>\n        {this.renderComponent() as React.ReactChild}\n      </SentryDocumentTitle>\n    );\n  }\n}\n","import {Fragment} from 'react';\nimport {RouteComponentProps} from 'react-router';\n\nimport {addErrorMessage} from 'sentry/actionCreators/indicator';\nimport {updateOrganization} from 'sentry/actionCreators/organizations';\nimport Form from 'sentry/components/forms/form';\nimport JsonForm from 'sentry/components/forms/jsonForm';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\nimport organizationSecurityAndPrivacyGroups from 'sentry/data/forms/organizationSecurityAndPrivacyGroups';\nimport {t} from 'sentry/locale';\nimport {Organization} from 'sentry/types';\nimport withOrganization from 'sentry/utils/withOrganization';\nimport AsyncView from 'sentry/views/asyncView';\nimport SettingsPageHeader from 'sentry/views/settings/components/settingsPageHeader';\n\nimport DataScrubbing from '../components/dataScrubbing';\n\ntype Props = RouteComponentProps<{orgId: string; projectId: string}, {}> & {\n  organization: Organization;\n};\n\nclass OrganizationSecurityAndPrivacyContent extends AsyncView<Props> {\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    const {orgId} = this.props.params;\n    return [['authProvider', `/organizations/${orgId}/auth-provider/`]];\n  }\n\n  handleUpdateOrganization = (data: Organization) => {\n    // This will update OrganizationStore (as well as OrganizationsStore\n    // which is slightly incorrect because it has summaries vs a detailed org)\n    updateOrganization(data);\n  };\n\n  renderBody() {\n    const {organization} = this.props;\n    const {orgId} = this.props.params;\n    const initialData = organization;\n    const endpoint = `/organizations/${orgId}/`;\n    const access = new Set(organization.access);\n    const features = new Set(organization.features);\n    const relayPiiConfig = organization.relayPiiConfig;\n    const {authProvider} = this.state;\n    const title = t('Security & Privacy');\n\n    return (\n      <Fragment>\n        <SentryDocumentTitle title={title} orgSlug={organization.slug} />\n        <SettingsPageHeader title={title} />\n        <Form\n          data-test-id=\"organization-settings-security-and-privacy\"\n          apiMethod=\"PUT\"\n          apiEndpoint={endpoint}\n          initialData={initialData}\n          additionalFieldProps={{hasSsoEnabled: !!authProvider}}\n          onSubmitSuccess={this.handleUpdateOrganization}\n          onSubmitError={() => addErrorMessage(t('Unable to save change'))}\n          saveOnBlur\n          allowUndo\n        >\n          <JsonForm\n            features={features}\n            forms={organizationSecurityAndPrivacyGroups}\n            disabled={!access.has('org:write')}\n          />\n        </Form>\n        <DataScrubbing\n          additionalContext={t('These rules can be configured for each project.')}\n          endpoint={endpoint}\n          relayPiiConfig={relayPiiConfig}\n          disabled={!access.has('org:write')}\n          organization={organization}\n          onSubmitSuccess={this.handleUpdateOrganization}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default withOrganization(OrganizationSecurityAndPrivacyContent);\n"],"names":["route","title","t","fields","name","type","label","help","confirm","true","false","visible","features","has","placeholder","value","formatStoreCrashReports","choices","getStoreCrashReportsValues","SettingScope","map","hasSsoEnabled","multiline","autosize","maxRows","rows","extraHelp","getValue","val","extractMultilineFields","setValue","convertMultilineFieldValue","AsyncView","AsyncComponent","getTitle","render","this","renderComponent","OrganizationSecurityAndPrivacyContent","data","updateOrganization","getEndpoints","orgId","props","params","renderBody","organization","initialData","endpoint","access","Set","relayPiiConfig","authProvider","state","Fragment","orgSlug","slug","apiMethod","apiEndpoint","additionalFieldProps","onSubmitSuccess","handleUpdateOrganization","onSubmitError","addErrorMessage","saveOnBlur","allowUndo","forms","organizationSecurityAndPrivacyGroups","disabled","additionalContext","withOrganization"],"sourceRoot":""}