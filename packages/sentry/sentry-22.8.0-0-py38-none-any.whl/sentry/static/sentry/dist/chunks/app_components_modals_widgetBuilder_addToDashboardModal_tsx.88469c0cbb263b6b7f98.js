"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_widgetBuilder_addToDashboardModal_tsx"],{"./app/components/modals/widgetBuilder/addToDashboardModal.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>v,modalCss:()=>A});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),i=s("./app/actionCreators/dashboards.tsx"),o=s("./app/actionCreators/indicator.tsx"),l=s("./app/components/button.tsx"),r=s("./app/components/buttonBar.tsx"),n=s("./app/components/forms/selectControl.tsx"),u=s("./app/locale.tsx"),p=s("./app/styles/space.tsx"),c=s("./app/utils/handleXhrErrorResponse.tsx"),h=s("./app/utils/useApi.tsx"),g=s("./app/views/dashboardsV2/types.tsx"),b=s("./app/views/dashboardsV2/utils.tsx"),m=s("./app/views/dashboardsV2/widgetBuilder/utils.tsx"),w=s("./app/views/dashboardsV2/widgetCard/index.tsx"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const y=(0,u.t)("Select a dashboard");function x(e){var t;let{Header:s,Body:a,Footer:r,closeModal:p,location:x,organization:v,router:A,selection:C,widget:D,widgetAsQueryParams:_}=e;const B=(0,h.Z)(),[S,k]=(0,d.useState)(null),[q,T]=(0,d.useState)(null),[E,M]=(0,d.useState)(null);(0,d.useEffect)((()=>{let e=!1;return(0,i.j2)(B,v.slug).then((t=>{e||k(t)})),()=>{e=!0}}),[B,v.slug]),(0,d.useEffect)((()=>{let e=!1;return E===m.i0||null===E?T(null):(0,i.AK)(B,v.slug,E).then((t=>{e||T(t)})),()=>{e=!0}}),[B,v.slug,E]);const z=null!==E;return(0,f.BX)(d.Fragment,{children:[(0,f.tZ)(s,{closeButton:!0,children:(0,f.tZ)("h4",{children:(0,u.t)("Add to Dashboard")})}),(0,f.BX)(a,{children:[(0,f.tZ)(Z,{children:(0,f.tZ)(n.Z,{disabled:null===S,menuPlacement:"auto",name:"dashboard",placeholder:(0,u.t)("Select Dashboard"),value:E,options:S&&[{label:(0,u.t)("+ Create New Dashboard"),value:"new"},...S.map((e=>{let{title:t,id:s,widgetDisplay:a}=e;return{label:t,value:s,isDisabled:a.length>=g.ZU,tooltip:a.length>=g.ZU&&(0,u._N)("Max widgets ([maxWidgets]) per dashboard reached.",{maxWidgets:g.ZU}),tooltipOptions:{position:"right"}}}))],onChange:e=>{e.disabled||M(e.value)}})}),(0,f.tZ)(Z,{children:v.features.includes("dashboards-top-level-filter")?(0,u.t)("Any conflicting filters from this query will be overridden by Dashboard filters. This is a preview of how the widget will appear in your dashboard."):(0,u.t)("This is a preview of how the widget will appear in your dashboard.")}),(0,f.tZ)(w.Z,{api:B,organization:v,currentWidgetDragging:!1,isEditing:!1,isSorting:!1,widgetLimitReached:!1,selection:v.features.includes("dashboards-top-level-filter")&&q?(0,b.fK)(q):C,dashboardFilters:v.features.includes("dashboards-top-level-filter")?null!==(t=(0,b.lM)(x))&&void 0!==t?t:null==q?void 0:q.filters:{},widget:D,showStoredAlert:!0})]}),(0,f.tZ)(r,{children:(0,f.BX)(j,{gap:1.5,children:[(0,f.tZ)(l.ZP,{onClick:async function(){if(null===q)return;let e=D.queries[0].orderby;g.FO.AREA&&D.queries[0].columns.length||(e="");const t=D.queries[0],s={...D,title:""===D.title?(0,u.t)("All Events"):D.title,queries:[{...t,orderby:e}]};try{const e={...q,widgets:[...q.widgets,s]};await(0,i.Y)(B,v.slug,e),p(),(0,o.S9)((0,u.t)("Successfully added widget to dashboard"))}catch(e){const t=(0,u.t)("Unable to add widget to dashboard");(0,c.Z)(t)(e),(0,o.Iw)(t)}},disabled:!z||E===m.i0,title:z?void 0:y,children:(0,u.t)("Add + Stay in Discover")}),(0,f.tZ)(l.ZP,{priority:"primary",onClick:function(){const e=E===m.i0?`/organizations/${v.slug}/dashboards/new/widget/new/`:`/organizations/${v.slug}/dashboard/${E}/widget/new/`;A.push({pathname:e,query:{..._,...v.features.includes("dashboards-top-level-filter")&&q?(0,b.aq)(q):{}}}),p()},disabled:!z,title:z?void 0:y,children:(0,u.t)("Open in Widget Builder")})]})})]})}x.displayName="AddToDashboardModal";const v=x,Z=(0,a.Z)("div",{target:"erdydty1"})("margin-bottom:",(0,p.Z)(2),";"),j=(0,a.Z)(r.ZP,{target:"erdydty0"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-rows:repeat(2, 1fr);gap:",(0,p.Z)(1.5),";width:100%;>button{width:100%;}}"),A={name:"jzg5s9",styles:"max-width:700px;margin:70px auto"}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_widgetBuilder_addToDashboardModal_tsx.725a80df6de4f63e7b62a1c9a85a3e97.js.map