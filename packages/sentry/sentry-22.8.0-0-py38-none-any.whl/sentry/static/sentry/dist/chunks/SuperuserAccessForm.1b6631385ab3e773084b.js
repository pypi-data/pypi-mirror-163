"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["SuperuserAccessForm"],{"./app/components/superuserAccessForm.tsx":(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var r=t("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(t("../node_modules/core-js/modules/web.dom-collections.iterator.js"),t("../node_modules/react/index.js")),n=t("./app/actionCreators/account.tsx"),i=t("./app/components/alert.tsx"),c=t("./app/components/forms/form.tsx"),l=t("./app/components/hook.tsx"),u=t("./app/components/themeAndStyleProvider.tsx"),p=t("./app/constants/superuserAccessErrors.tsx"),d=t("./app/locale.tsx"),h=t("./app/styles/space.tsx"),m=t("./app/utils/withApi.tsx"),S=t("./app/components/button.tsx"),y=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class w extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{error:!1,errorType:""}),(0,r.Z)(this,"handleSubmit",(async()=>{const{api:e}=this.props,s={isSuperuserModal:!0,superuserAccessCategory:"cops_csm",superuserReason:"COPS and CSM use"};try{await e.requestPromise("/auth/",{method:"PUT",data:s}),this.handleSuccess()}catch(e){this.handleError(e)}})),(0,r.Z)(this,"handleSuccess",(()=>{window.location.reload()})),(0,r.Z)(this,"handleError",(e=>{let s="";s=403===e.status?p.S.invalidPassword:401===e.status?p.S.invalidSSOSession:400===e.status?p.S.invalidAccessCategory:p.S.unknownError,this.setState({error:!0,errorType:s})})),(0,r.Z)(this,"handleLogout",(async()=>{const{api:e}=this.props;try{await(0,n.kS)(e)}catch{}window.location.assign("/auth/login/")}))}render(){const{error:e,errorType:s}=this.state;return s===p.S.invalidSSOSession?(this.handleLogout(),null):(0,y.tZ)(u.Z,{children:(0,y.BX)(c.Z,{apiMethod:"PUT",apiEndpoint:"/auth/",submitLabel:(0,d.t)("Continue"),onSubmitSuccess:this.handleSuccess,onSubmitError:this.handleError,initialData:{isSuperuserModal:!0},extraButton:(0,y.tZ)(Z,{children:(0,y.tZ)(S.ZP,{onClick:this.handleSubmit,children:(0,d.t)("COPS/CSM")})}),resetOnError:!0,children:[e&&(0,y.tZ)(b,{type:"error",showIcon:!0,children:(0,d.t)(s)}),(0,y.tZ)(l.Z,{name:"component:superuser-access-category"})]})})}}w.displayName="SuperuserAccessForm";const b=(0,o.Z)(i.Z,{target:"eul11zl1"})({name:"1ykowef",styles:"margin-bottom:0"}),Z=(0,o.Z)("div",{target:"eul11zl0"})("width:100%;margin-left:",(0,h.Z)(4),";"),x=(0,m.Z)(w)},"./app/constants/superuserAccessErrors.tsx":(e,s,t)=>{let r;t.d(s,{S:()=>r}),function(e){e.invalidPassword="Incorrect password",e.invalidSSOSession="Your SSO Session has expired, please reauthenticate",e.invalidAccessCategory="Please fill out the access category and reason correctly",e.unknownError="An error ocurred, please try again"}(r||(r={}))}}]);
//# sourceMappingURL=../sourcemaps/SuperuserAccessForm.d96537663d4da941c2bbbcc354ef4ad5.js.map