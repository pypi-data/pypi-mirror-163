"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_traceDetails_traceView_tsx"],{"./app/views/performance/traceDetails/styles.tsx":(e,t,n)=>{n.d(t,{$G:()=>T,CB:()=>m.wh,Iq:()=>f,LA:()=>b,RB:()=>y,W3:()=>x,X2:()=>m.X2,Z9:()=>Z,cC:()=>v,pH:()=>g,qD:()=>m.iF,uI:()=>w});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("./app/components/events/eventTags/eventTagsPill.tsx"),s=n("./app/components/events/interfaces/spans/header.tsx"),i=n("./app/components/panels/index.tsx"),o=n("./app/components/pills.tsx"),l=n("./app/components/searchBar.tsx"),c=n("./app/styles/space.tsx"),d=n("./app/utils.tsx"),p=n("./app/utils/queryString.tsx"),h=n("./app/views/performance/transactionSummary/utils.tsx"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),m=n("./app/components/events/interfaces/spans/spanDetail.tsx");const g=(0,r.Z)("div",{target:"euzgho58"})({name:"7whenc",styles:"display:flex;width:100%"}),f=(0,r.Z)(l.Z,{target:"euzgho57"})({name:"1ff36h2",styles:"flex-grow:1"}),v=(0,r.Z)(s.il,{target:"euzgho56"})("position:static;top:auto;border-top:none;border-bottom:1px solid ",(e=>e.theme.border),";"),Z=(0,r.Z)("div",{target:"euzgho55"})("display:grid;grid-template-columns:1fr;gap:",(0,c.Z)(3),";margin-bottom:",(0,c.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:max-content max-content;grid-row-gap:0;}"),x=(0,r.Z)("div",{target:"euzgho54"})("margin-top:",(0,c.Z)(2),";"),w=(0,r.Z)("div",{target:"euzgho53"})({name:"1wr20zt",styles:"overflow-x:hidden;border-bottom-left-radius:3px;border-bottom-right-radius:3px"}),b=(0,r.Z)(i.s_,{target:"euzgho52"})({name:"d3v9zr",styles:"overflow:hidden"}),y=(0,r.Z)("span",{target:"euzgho51"})("margin-right:",(0,c.Z)(.75),";display:flex;flex-direction:column;justify-content:center;"),D=(0,r.Z)(o.Z,{target:"euzgho50"})("padding-top:",(0,c.Z)(1.5),";");function T(e){let{location:t,organization:n,transaction:r}=e;const{tags:s}=r;if(!s||s.length<=0)return null;const i=n.slug;return(0,u.BX)("tr",{children:[(0,u.tZ)("td",{className:"key",children:"Tags"}),(0,u.tZ)("td",{className:"value",children:(0,u.tZ)(D,{children:s.map(((e,s)=>{const{pathname:o,query:l}=(0,h.e1)({orgSlug:i,transaction:r.transaction,projectID:String(r.project_id),query:{...t.query,query:(0,p.os)(t.query.query,e.key,e.value)}});return(0,u.tZ)(a.Z,{tag:e,projectId:r.project_slug,organization:n,query:l,streamPath:o},(0,d.ri)(e.key)?e.key:`tag-pill-${s}`)}))})})]})}T.displayName="Tags"},"./app/views/performance/traceDetails/traceNotFound.tsx":(e,t,n)=>{n.d(t,{Z:()=>f});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/react/index.js"),s=n("./app/components/alert.tsx"),i=n("./app/components/links/link.tsx"),o=n("./app/components/loadingError.tsx"),l=n("./app/components/loadingIndicator.tsx"),c=n("./app/components/performance/waterfall/rowDetails.tsx"),d=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),h=n("./app/utils/discover/discoverQuery.tsx"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){var t,n;let{meta:r,traceEventView:p,traceSlug:m,organization:f,location:v}=e;const Z=null!==(t=null==r?void 0:r.transactions)&&void 0!==t?t:0,x=null!==(n=null==r?void 0:r.errors)&&void 0!==n?n:0;if(0===Z&&x>0){const e=p.withColumns([{kind:"field",field:"project"},{kind:"field",field:"title"},{kind:"field",field:"issue.id"},{kind:"field",field:"level"}]);return e.query=`trace:${m} !event.type:transaction `,(0,u.tZ)(h.Z,{eventView:e,orgSlug:f.slug,location:v,referrer:"api.trace-view.errors-view",useEvents:!0,children:e=>{let{isLoading:t,tableData:n,error:r}=e;return t?(0,u.tZ)(l.Z,{}):r?(0,u.tZ)(s.Z,{type:"error",showIcon:!0,children:(0,u.tZ)(g,{children:(0,d._N)("The trace cannot be shown when all events are errors. An error occurred when attempting to fetch these error events: [error]",{error:r.message})})}):(0,u.BX)(s.Z,{type:"error",showIcon:!0,children:[(0,u.tZ)(g,{children:(0,d.t)("The trace cannot be shown when all events are errors.")}),(0,u.tZ)(c.TV,{"data-test-id":"trace-view-errors",children:null==n?void 0:n.data.map((e=>(0,u.BX)(a.Fragment,{children:[(0,u.tZ)(c._U,{level:e.level}),(0,u.tZ)(c.wE,{children:e.level}),(0,u.tZ)(c.St,{children:(0,u.tZ)(i.Z,{to:`/organizations/${f.slug}/issues/${e["issue.id"]}/events/${e.id}`,children:e.title})})]},e.id)))})]})}})}return(0,u.tZ)(o.Z,{message:(0,d.t)("The trace you are looking for was not found.")})}m.displayName="TraceNotFound";const g=(0,r.Z)("div",{target:"etqb06g0"})("margin-bottom:",(0,p.Z)(1),";"),f=m},"./app/views/performance/traceDetails/traceView.tsx":(e,t,n)=>{n.d(t,{Z:()=>de}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/react/index.js"),a=n("../node_modules/@sentry/hub/esm/hub.js"),s=n("./app/components/events/interfaces/spans/anchorLinkManager.tsx"),i=n("./app/components/events/interfaces/spans/dividerHandlerManager.tsx"),o=n("./app/components/events/interfaces/spans/scrollbarManager.tsx"),l=n("./app/components/performance/waterfall/messageRow.tsx"),c=n("./app/components/performance/waterfall/miniHeader.tsx"),d=n("./app/components/performance/waterfall/utils.tsx"),p=n("./app/locale.tsx"),h=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),u=n("./app/views/performance/traceDetails/styles.tsx"),m=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),g=n("./app/components/assistant/guideAnchor.tsx"),f=n("./app/components/count.tsx"),v=n("./app/components/idBadge/projectBadge.tsx"),Z=n("./app/components/performance/waterfall/constants.tsx"),x=n("./app/components/performance/waterfall/row.tsx"),w=n("./app/components/performance/waterfall/rowBar.tsx"),b=n("./app/components/performance/waterfall/rowDivider.tsx"),y=n("./app/components/performance/waterfall/rowTitle.tsx"),D=n("./app/components/performance/waterfall/treeConnector.tsx"),T=n("./app/components/tooltip.tsx"),_=n("./app/utils/performance/quickTrace/utils.tsx"),C=n("./app/utils/projects.tsx"),B=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),j=(n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/react-router/es/index.js")),S=n("../node_modules/lodash/omit.js"),I=n.n(S),O=n("./app/components/alert.tsx"),z=n("./app/components/button.tsx"),k=n("./app/components/clipboard.tsx"),X=n("./app/components/dateTime.tsx"),E=n("./app/components/links/link.tsx"),H=n("./app/components/performance/waterfall/rowDetails.tsx"),$=n("./app/components/quickTrace/utils.tsx"),A=n("./app/constants/pageFilters.tsx"),V=n("./app/icons/index.tsx"),M=n("./app/styles/space.tsx"),G=n("./app/utils/discover/urls.tsx"),N=n("./app/utils/getDynamicText.tsx"),R=n("./app/utils/performance/urls.ts"),L=n("./app/utils/performance/vitals/constants.tsx"),q=n("./app/utils/performanceForSentry.tsx"),F=n("./app/views/performance/transactionSummary/utils.tsx"),P=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class U extends r.Component{constructor(){super(...arguments),(0,m.Z)(this,"scrollBarIntoView",(e=>t=>{t.preventDefault();const n=`#txn-${e}`;this.props.scrollToHash(n),j.browserHistory.push({...this.props.location,hash:n})}))}componentDidMount(){const{organization:e,transaction:t}=this.props;(0,h.Z)("performance_views.trace_view.open_transaction_details",{organization:e,operation:t["transaction.op"],transaction:t.transaction})}renderTransactionErrors(){const{organization:e,transaction:t}=this.props,{errors:n}=t;return 0===n.length?null:(0,P.tZ)(O.Z,{system:!0,type:"error",expand:n.map((t=>(0,P.BX)(H.TV,{children:[(0,P.tZ)(H._U,{level:t.level}),(0,P.tZ)(H.wE,{children:t.level}),(0,P.tZ)(H.St,{children:(0,P.tZ)(E.Z,{to:(0,$.F7)(t,e),children:t.title})})]},t.event_id))),children:(0,P.tZ)(H.CM,{children:(0,p.tn)("An error event occurred in this transaction.","%s error events occurred in this transaction.",n.length)})})}renderGoToTransactionButton(){const{location:e,organization:t,transaction:n}=this.props,r=(0,G.JE)({id:n.event_id,project:n.project_slug}),a=(0,R.D)(t.slug,r,n.transaction,I()(e.query,Object.values(A.V)));return(0,P.tZ)(J,{size:"xs",to:a,children:(0,p.t)("View Event")})}renderGoToSummaryButton(){const{location:e,organization:t,transaction:n}=this.props,r=(0,F.e1)({orgSlug:t.slug,transaction:n.transaction,query:I()(e.query,Object.values(A.V)),projectID:String(n.project_id)});return(0,P.tZ)(J,{size:"xs",to:r,children:(0,p.t)("View Summary")})}renderMeasurements(){const{transaction:e}=this.props,{measurements:t={}}=e,n=Object.keys(t).filter((e=>Boolean(L.r9[`measurements.${e}`]))).sort();return n.length<=0?null:(0,P.tZ)(r.Fragment,{children:n.map((e=>{var n;return(0,P.tZ)(u.X2,{title:null===(n=L.r9[`measurements.${e}`])||void 0===n?void 0:n.name,children:`${Number(t[e].value.toFixed(3)).toLocaleString()}ms`},e)}))})}renderTransactionDetail(){const{location:e,organization:t,transaction:n}=this.props,a=Math.min(n.start_timestamp,n.timestamp),s=Math.max(n.start_timestamp,n.timestamp),i=`${Number((1e3*(s-a)).toFixed(3)).toLocaleString()}ms`;return(0,P.tZ)(u.qD,{children:(0,P.tZ)("table",{className:"table key-value",children:(0,P.BX)("tbody",{children:[(0,P.tZ)(u.X2,{title:(0,P.BX)(Q,{onClick:this.scrollBarIntoView(n.event_id),children:[(0,p.t)("Event ID"),(0,P.tZ)(k.Z,{value:`${window.location.href.replace(window.location.hash,"")}#txn-${n.event_id}`,children:(0,P.tZ)(W,{})})]}),extra:this.renderGoToTransactionButton(),children:n.event_id}),(0,P.tZ)(u.X2,{title:"Transaction",extra:this.renderGoToSummaryButton(),children:n.transaction}),(0,P.tZ)(u.X2,{title:"Transaction Status",children:n["transaction.status"]}),(0,P.tZ)(u.X2,{title:"Span ID",children:n.span_id}),(0,P.tZ)(u.X2,{title:"Project",children:n.project_slug}),(0,P.tZ)(u.X2,{title:"Start Date",children:(0,N.Z)({fixed:"Mar 19, 2021 11:06:27 AM UTC",value:(0,P.BX)(r.Fragment,{children:[(0,P.tZ)(X.Z,{date:1e3*a}),` (${a})`]})})}),(0,P.tZ)(u.X2,{title:"End Date",children:(0,N.Z)({fixed:"Mar 19, 2021 11:06:28 AM UTC",value:(0,P.BX)(r.Fragment,{children:[(0,P.tZ)(X.Z,{date:1e3*s}),` (${s})`]})})}),(0,P.tZ)(u.X2,{title:"Duration",children:i}),(0,P.tZ)(u.X2,{title:"Operation",children:n["transaction.op"]||""}),this.renderMeasurements(),(0,P.tZ)(u.$G,{location:e,organization:t,transaction:n})]})})})}render(){return(0,P.tZ)(q.BZ,{id:"TransactionDetail",children:(0,P.BX)(u.CB,{onClick:e=>{e.stopPropagation()},children:[this.renderTransactionErrors(),this.renderTransactionDetail()]})})}}U.displayName="TransactionDetail";const Q=(0,B.Z)("a",{target:"eykqe522"})("display:flex;color:",(e=>e.theme.textColor),";:hover{color:",(e=>e.theme.textColor),";}"),W=(0,B.Z)(V.JH,{target:"eykqe521"})("display:block;color:",(e=>e.theme.gray300),";margin-left:",(0,M.Z)(1),";"),J=(0,B.Z)(z.ZP,{target:"eykqe520"})("position:absolute;top:",(0,M.Z)(.75),";right:",(0,M.Z)(.5),";"),Y=U;class K extends r.Component{constructor(){super(...arguments),(0,m.Z)(this,"state",{showDetail:!1}),(0,m.Z)(this,"transactionRowDOMRef",(0,r.createRef)()),(0,m.Z)(this,"toggleDisplayDetail",(()=>{const{transaction:e}=this.props;(0,_.Ci)(e)&&this.setState((e=>({showDetail:!e.showDetail})))})),(0,m.Z)(this,"scrollIntoView",(()=>{const e=this.transactionRowDOMRef.current;if(!e)return;const t=e.getBoundingClientRect().top+window.scrollY;this.setState({showDetail:!0},(()=>window.scrollTo(0,t)))}))}getCurrentOffset(){const{transaction:e}=this.props,{generation:t}=e;return ee(t)}renderConnector(e){const{continuingDepths:t,isExpanded:n,isOrphan:r,isLast:a,transaction:s}=this.props,{generation:i}=s,o=(0,_.Ci)(s)?s.event_id:s.traceSlug;if(0===i)return e?(0,P.tZ)(D.UV,{style:{right:"15px",height:"10px",bottom:"-5px",top:"auto"},orphanBranch:!1}):null;const l=t.map((e=>{let{depth:t,isOrphanDepth:n}=e;if(i-t<=1)return null;const r=-1*ee(i-t-1)-2;return(0,P.tZ)(D.UV,{style:{left:r},orphanBranch:n},`${o}-${t}`)}));return e&&n&&l.push((0,P.tZ)(D.UV,{style:{right:"15px",height:"10px",bottom:a?`-${Z.d/2+1}px`:"0",top:"auto"},orphanBranch:!1},`${o}-last`)),(0,P.tZ)(D.DN,{isLast:a,hasToggler:e,orphanBranch:r,children:l})}renderToggle(e){const{isExpanded:t,transaction:n,toggleExpandedState:r}=this.props,{children:a,generation:s}=n,i=this.getCurrentOffset();if(a.length<=0)return(0,P.tZ)(D.rw,{style:{left:`${i}px`},children:this.renderConnector(!1)});const o=0===s;return(0,P.BX)(D.rw,{style:{left:`${i}px`},hasToggler:!0,children:[this.renderConnector(!0),(0,P.BX)(D.U1,{disabled:o,isExpanded:t,errored:e,onClick:e=>{e.stopPropagation(),o||r()},children:[(0,P.tZ)(f.Z,{value:a.length}),!o&&(0,P.tZ)("div",{children:(0,P.tZ)(D.jd,{direction:t?"up":"down"})})]})]})}renderTitle(e){const{generateContentSpanBarRef:t}=e,{organization:n,transaction:a}=this.props,s=this.getCurrentOffset(),i=!!(0,_.Ci)(a)&&a.errors.length>0,o=(0,_.Ci)(a)?(0,P.BX)(r.Fragment,{children:[(0,P.tZ)(C.Z,{orgId:n.slug,slugs:[a.project_slug],children:e=>{let{projects:t}=e;const n=t.find((e=>e.slug===a.project_slug));return(0,P.tZ)(u.RB,{children:(0,P.tZ)(T.Z,{title:a.project_slug,children:(0,P.tZ)(v.Z,{project:n||{slug:a.project_slug},avatarSize:16,hideName:!0})})})}}),(0,P.BX)(y.rv,{errored:i,children:[(0,P.BX)("strong",{children:[a["transaction.op"]," — "]}),a.transaction]})]}):(0,P.BX)(y.rv,{errored:!1,children:[(0,P.tZ)("strong",{children:"Trace — "}),a.traceSlug]});return(0,P.BX)(y.mw,{ref:t(),children:[this.renderToggle(i),(0,P.tZ)(y.Wh,{style:{left:`${s}px`,width:"100%"},children:o})]})}renderDivider(e){if(this.state.showDetail)return(0,P.tZ)(b.xN,{showDetail:!0,style:{position:"absolute"}});const{addDividerLineRef:t}=e;return(0,P.tZ)(b.xN,{ref:t(),style:{position:"absolute"},onMouseEnter:()=>{e.setHover(!0)},onMouseLeave:()=>{e.setHover(!1)},onMouseOver:()=>{e.setHover(!0)},onMouseDown:e.onDragStart,onClick:e=>{e.stopPropagation()}})}renderGhostDivider(e){const{dividerPosition:t,addGhostDividerLineRef:n}=e;return(0,P.tZ)(b.Hr,{style:{width:`calc(${(0,d.yI)(t)} + 0.5px)`,display:"none"},children:(0,P.tZ)(b.xN,{ref:n(),style:{right:0},className:"hovering",onClick:e=>{e.stopPropagation()}})})}renderErrorBadge(){const{transaction:e}=this.props;return(0,_.Ci)(e)&&e.errors.length?(0,P.tZ)(b.cS,{}):null}renderRectangle(){const{transaction:e,traceInfo:t,barColor:n}=this.props,{showDetail:r}=this.state,a=Math.abs(t.endTimestamp-t.startTimestamp)||1,s=Math.abs(e.start_timestamp-t.startTimestamp)/a,i=Math.abs(e.timestamp-e.start_timestamp),o=i/a;return(0,P.tZ)(w.e,{spanBarHatch:!1,style:{backgroundColor:n,left:`min(${(0,d.yI)(s||0)}, calc(100% - 1px))`,width:(0,d.yI)(o||0)},children:(0,P.tZ)(w.R,{durationDisplay:(0,d.ud)({left:s,width:o}),showDetail:r,spanBarHatch:!1,children:(0,d.bQ)(i)})})}renderHeader(e){let{dividerHandlerChildrenProps:t,scrollbarManagerChildrenProps:n}=e;const{hasGuideAnchor:r,index:a}=this.props,{showDetail:s}=this.state,{dividerPosition:i}=t;return(0,P.BX)(x.Qc,{showDetail:s,children:[(0,P.tZ)(x.E5,{"data-test-id":"transaction-row-title","data-type":"span-row-cell",style:{width:`calc(${(0,d.yI)(i)} - 0.5px)`,paddingTop:0},showDetail:s,onClick:this.toggleDisplayDetail,children:(0,P.tZ)(g.Z,{target:"trace_view_guide_row",disabled:!r,children:this.renderTitle(n)})}),(0,P.BX)(b.kP,{children:[this.renderDivider(t),this.renderErrorBadge()]}),(0,P.tZ)(x.E5,{"data-test-id":"transaction-row-duration","data-type":"span-row-cell",showStriping:a%2!=0,style:{width:`calc(${(0,d.yI)(1-i)} - 0.5px)`,paddingTop:0},showDetail:s,onClick:this.toggleDisplayDetail,children:(0,P.tZ)(g.Z,{target:"trace_view_guide_row_details",disabled:!r,children:this.renderRectangle()})}),!s&&this.renderGhostDivider(t)]})}renderDetail(){const{location:e,organization:t,isVisible:n,transaction:r}=this.props,{showDetail:a}=this.state;return(0,P.tZ)(s.$,{children:s=>{let{registerScrollFn:i,scrollToHash:o}=s;return(0,_.Ci)(r)?(i(`#txn-${r.event_id}`,this.scrollIntoView,!1),n&&a?(0,P.tZ)(Y,{location:e,organization:t,transaction:r,scrollToHash:o}):null):null}})}render(){const{isVisible:e,transaction:t}=this.props,{showDetail:n}=this.state;return(0,P.BX)(x.X2,{ref:this.transactionRowDOMRef,visible:e,showBorder:n,cursor:(0,_.Ci)(t)?"pointer":"default",children:[(0,P.tZ)(o.$6,{children:e=>(0,P.tZ)(i.$,{children:t=>this.renderHeader({dividerHandlerChildrenProps:t,scrollbarManagerChildrenProps:e})})}),this.renderDetail()]})}}function ee(e){return e*(D.Ll/2)+0}K.displayName="TransactionBar";const te=K;class ne extends r.Component{constructor(){super(...arguments),(0,m.Z)(this,"state",{isExpanded:!0}),(0,m.Z)(this,"toggleExpandedState",(()=>{this.setState((e=>{let{isExpanded:t}=e;return{isExpanded:!t}}))}))}componentDidUpdate(e,t){t.isExpanded!==this.state.isExpanded&&this.props.updateScrollState()}render(){const{location:e,organization:t,transaction:n,traceInfo:a,continuingDepths:s,isOrphan:i,isLast:o,index:l,isVisible:c,hasGuideAnchor:d,renderedChildren:p,barColor:h}=this.props,{isExpanded:u}=this.state;return(0,P.BX)(r.Fragment,{children:[(0,P.tZ)(te,{location:e,organization:t,index:l,transaction:n,traceInfo:a,continuingDepths:s,isOrphan:i,isLast:o,isExpanded:u,toggleExpandedState:this.toggleExpandedState,isVisible:c,hasGuideAnchor:d,barColor:h}),u&&p]})}}ne.displayName="TransactionGroup";const re=(0,o.Iw)(ne);var ae=n("./app/views/performance/traceDetails/utils.tsx"),se=n("./app/components/discover/discoverFeature.tsx");function ie(e){var t;let{traceInfo:n,traceEventView:r,organization:a,meta:s}=e;const i=n.transactions.size,o=null!==(t=null==s?void 0:s.transactions)&&void 0!==t?t:i;if(null===o||i>=o)return null;const c=r.getResultsViewUrlTarget(a.slug);return(0,P.tZ)(l.V,{children:(0,p._N)("Limited to a view of [count] transactions. To view the full list, [discover].",{count:i,discover:(0,P.tZ)(se.Z,{children:e=>{let{hasFeature:t}=e;return(0,P.tZ)(E.Z,{disabled:!t,to:c,children:(0,p.t)("Open in Discover")})}})})})}ie.displayName="LimitExceededMessage";const oe=ie;var le=n("./app/views/performance/traceDetails/traceNotFound.tsx");function ce(e){let{isVisible:t,numberOfHiddenTransactionsAbove:n}=e;return!t||n<1?null:(0,P.tZ)(l.V,{children:(0,P.tZ)("span",{children:1===n?(0,p._N)("[numOfTransaction] hidden transaction",{numOfTransaction:(0,P.tZ)("strong",{children:n})}):(0,p._N)("[numOfTransaction] hidden transactions",{numOfTransaction:(0,P.tZ)("strong",{children:n})})},"trace-info-message")})}function de(e){var t;let{location:n,meta:l,organization:p,traces:m,traceSlug:g,traceEventView:f,filteredTransactionIds:v,...Z}=e;const x=null===(t=a.Gd().getScope())||void 0===t?void 0:t.getTransaction(),w=null==x?void 0:x.startChild({op:"trace.render",description:"trace-view-content"});function b(e,t){let{continuingDepths:a,isOrphan:s,isLast:i,index:o,numberOfHiddenTransactionsAbove:l,traceInfo:c,hasGuideAnchor:h}=t;const{children:u,event_id:m}=e,g=e.generation+1,f=function(e,t){return!t||t.has(e.event_id)}(e,v),Z=u.reduce(((e,t,n)=>{const r=n===u.length-1,i=t.children.length>0,o=b(t,{continuingDepths:!r&&i?[...a,{depth:g,isOrphanDepth:s}]:a,isOrphan:s,isLast:r,index:e.lastIndex+1,numberOfHiddenTransactionsAbove:e.numberOfHiddenTransactionsAbove,traceInfo:c,hasGuideAnchor:!1});return e.lastIndex=o.lastIndex,e.numberOfHiddenTransactionsAbove=o.numberOfHiddenTransactionsAbove,e.renderedChildren.push(o.transactionGroup),e}),{renderedChildren:[],lastIndex:o,numberOfHiddenTransactionsAbove:f?0:l+1});return{transactionGroup:(0,P.BX)(r.Fragment,{children:[(0,P.tZ)(ce,{isVisible:f,numberOfHiddenTransactionsAbove:l}),(0,P.tZ)(re,{location:n,organization:p,traceInfo:c,transaction:{...e,generation:g},continuingDepths:a,isOrphan:s,isLast:i,index:o,isVisible:f,hasGuideAnchor:h,renderedChildren:Z.renderedChildren,barColor:(0,d.hd)(e["transaction.op"])})]},m),lastIndex:Z.lastIndex,numberOfHiddenTransactionsAbove:Z.numberOfHiddenTransactionsAbove}}(0,r.useEffect)((()=>{(0,h.Z)("performance_views.trace_view.view",{organization:p})}),[p]);const y=(0,r.createRef)(),D=(0,r.createRef)();if(null===m||m.length<=0)return(0,P.tZ)(le.Z,{meta:l,traceEventView:f,traceSlug:g,location:n,organization:p});const T=Z.traceInfo||(0,ae.Rg)(m),_={index:1,numberOfHiddenTransactionsAbove:0,traceInfo:T,transactionGroups:[]},{transactionGroups:C,numberOfHiddenTransactionsAbove:B}=m.reduce(((e,t,n)=>{const r=n===m.length-1,a=t.children.length>0,s=!r&&null!==m[n+1].parent_span_id,i=b(t,{...e,isOrphan:!(0,ae.uM)(t),isLast:r,continuingDepths:!r&&a?[{depth:0,isOrphanDepth:s}]:[],hasGuideAnchor:0===n});return e.index=i.lastIndex+1,e.numberOfHiddenTransactionsAbove=i.numberOfHiddenTransactionsAbove,e.transactionGroups.push(i.transactionGroup),e}),_),j=(0,P.tZ)(u.W3,{children:(0,P.tZ)(i.z,{interactiveLayerRef:y,children:(0,P.tZ)(i.$,{children:e=>{let{dividerPosition:t}=e;return(0,P.tZ)(o.zt,{dividerPosition:t,interactiveLayerRef:D,children:(0,P.BX)(u.LA,{children:[(0,P.BX)(u.cC,{children:[(0,P.tZ)(o.$6,{children:e=>{let{virtualScrollbarRef:n,scrollBarAreaRef:r,onDragStart:a,onScroll:s}=e;return(0,P.BX)(c.cs,{ref:D,style:{width:`calc(${(0,d.yI)(t)} - 0.5px)`},onScroll:s,children:[(0,P.tZ)("div",{style:{width:0,height:"1px"},ref:r}),(0,P.tZ)(c.Qk,{"data-type":"virtual-scrollbar",ref:n,onMouseDown:a,children:(0,P.tZ)(c.v6,{})})]})}}),(0,P.tZ)(c._i,{})]}),(0,P.BX)(u.uI,{ref:y,children:[(0,P.tZ)(s.z,{children:(0,P.tZ)(re,{location:n,organization:p,traceInfo:T,transaction:{traceSlug:g,generation:0,"transaction.duration":T.endTimestamp-T.startTimestamp,children:m,start_timestamp:T.startTimestamp,timestamp:T.endTimestamp},continuingDepths:[],isOrphan:!1,isLast:!1,index:0,isVisible:!0,hasGuideAnchor:!1,renderedChildren:C,barColor:(0,d.hd)("")})}),(0,P.tZ)(ce,{isVisible:!0,numberOfHiddenTransactionsAbove:B}),(0,P.tZ)(oe,{traceInfo:T,organization:p,traceEventView:f,meta:l})]})]})})}})})});return null==w||w.finish(),j}ce.displayName="TraceHiddenMessage"}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_traceDetails_traceView_tsx.329ccaa3399d3e537e2eefec346c09a2.js.map