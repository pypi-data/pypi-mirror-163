"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_charts_eventsChart_tsx-app_components_charts_optionSelector_tsx-app_components-0069b4"],{"./app/components/charts/areaChart.tsx":(e,t,s)=>{s.d(t,{T:()=>n});var o=s("./app/components/charts/series/lineSeries.tsx"),r=s("./app/components/charts/baseChart.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{series:t,stacked:s,colors:n,...i}=e;return(0,a.tZ)(r.Z,{...i,"data-test-id":"area-chart",colors:n,series:t.map(((e,t)=>{let{seriesName:r,data:a,...i}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.Z)({...e})}({stack:s?"area":void 0,name:r,data:a.map((e=>{let{name:t,value:s}=e;return[t,s]})),lineStyle:{color:null==n?void 0:n[t],opacity:1,width:.4},areaStyle:{color:null==n?void 0:n[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...i})}))})}n.displayName="AreaChart"},"./app/components/charts/chartZoom.tsx":(e,t,s)=>{s.d(t,{Z:()=>y});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("../node_modules/moment/moment.js"),n=s.n(a),i=s("../node_modules/query-string/index.js"),l=s("./app/actionCreators/pageFilters.tsx"),d=s("./app/components/charts/components/dataZoomInside.tsx");s("../node_modules/echarts/lib/component/dataZoomSlider.js");const p={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function c(e){return e&&Array.isArray(e)?e:[{...p,...e}]}var u=s("./app/components/charts/components/toolBox.tsx"),m=s("./app/utils/callIfFunction.tsx"),h=s("./app/utils/dates.tsx");const g=e=>e?n().utc(e).format(n().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class v extends r.Component{constructor(e){var t;super(e),t=this,(0,o.Z)(this,"history",void 0),(0,o.Z)(this,"currentPeriod",void 0),(0,o.Z)(this,"zooming",null),(0,o.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:g(e.start),end:g(e.end)}})),(0,o.Z)(this,"setPeriod",(function(e){let{period:s,start:o,end:r}=e,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:n,onZoom:d,usePageDate:p}=t.props,c=g(o),u=g(r);a&&t.history.push(t.currentPeriod),(0,m.g)(d,{period:s,start:c,end:u}),t.zooming=()=>{if(p&&n){const e={...n.location.query,pageStart:o?(0,h.v5)(o):void 0,pageEnd:r?(0,h.v5)(r):void 0,pageStatsPeriod:null!=s?s:void 0};i.stringify(e)!==i.stringify(n.location.query)&&n.push({pathname:n.location.pathname,query:e})}else(0,l.dR)({period:s,start:c?(0,h.hC)(c):c,end:u?(0,h.hC)(u):u},n);t.saveCurrentPeriod({period:s,start:o,end:r})}})),(0,o.Z)(this,"handleChartReady",(e=>{(0,m.g)(this.props.onChartReady,e)})),(0,o.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],(0,m.g)(this.props.onRestore,e,t))})),(0,o.Z)(this,"handleDataZoom",((e,t)=>{const s=t.getModel(),{startValue:o,endValue:r}=s._payload.batch[0];if(null===o&&null===r){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=n().utc(o),t=n().utc(r);this.setPeriod({period:null,start:e,end:t},!0)}(0,m.g)(this.props.onDataZoom,e,t)})),(0,o.Z)(this,"handleChartFinished",((e,t)=>{var s;"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const o=null===(s=t._componentsViews)||void 0===s?void 0:s.find((e=>e._features&&e._features.dataZoom));o&&!o._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,m.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:s,disabled:o,children:r,xAxisIndex:a,router:n,onZoom:i,onRestore:l,onChartReady:p,onDataZoom:m,onFinished:g,showSlider:v,chartZoomOptions:y,...x}=this.props,f=null!=e?e:void 0,Z=t?(0,h.hC)(t):void 0,b=s?(0,h.hC)(s):void 0;return r(o?{utc:f,start:Z,end:b,...x}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:f,start:Z,end:b,dataZoom:v?[...c({xAxisIndex:a,...y}),...(0,d.Z)({xAxisIndex:a,...y})]:(0,d.Z)({xAxisIndex:a,...y}),showTimeInTooltip:!0,toolBox:(0,u.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...x})}}v.displayName="ChartZoom";const y=v},"./app/components/charts/components/dataZoomInside.tsx":(e,t,s)=>{s.d(t,{Z:()=>r}),s("../node_modules/echarts/lib/component/dataZoomInside.js");const o={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function r(e){return e&&Array.isArray(e)?e:[{...o,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,s)=>{function o(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function r(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:o(t),...e}}s.d(t,{Z:()=>r})},"./app/components/charts/components/visualMap.tsx":(e,t,s)=>{function o(e){return e}s.d(t,{Z:()=>o}),s("../node_modules/echarts/lib/component/visualMap.js")},"./app/components/charts/errorPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});const o=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1six6h50"})("display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1;flex-shrink:0;overflow:hidden;height:",(e=>e.height||"200px"),";position:relative;border-color:transparent;margin-bottom:0;color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeExtraLarge),";")},"./app/components/charts/eventsChart.tsx":(e,t,s)=>{s.d(t,{Z:()=>R});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react/index.js")),a=s("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),n=s("../node_modules/lodash/isEqual.js"),i=s.n(n),l=s("./app/components/charts/areaChart.tsx"),d=s("./app/components/charts/barChart.tsx"),p=s("./app/components/charts/chartZoom.tsx"),c=s("./app/components/charts/errorPanel.tsx"),u=s("./app/components/charts/lineChart.tsx"),m=s("./app/components/charts/releaseSeries.tsx"),h=s("./app/components/charts/transitionChart.tsx"),g=s("./app/components/charts/transparentLoadingMask.tsx"),v=s("./app/components/charts/utils.tsx"),y=s("./app/components/charts/worldMapChart.tsx"),x=s("./app/icons/index.tsx"),f=s("./app/locale.tsx"),Z=s("./app/utils.tsx"),b=s("./app/utils/discover/charts.tsx"),j=s("./app/utils/discover/fields.tsx"),S=s("./app/utils/queryString.tsx"),w=s("./app/components/charts/eventsGeoRequest.tsx"),C=s("./app/components/charts/eventsRequest.tsx"),_=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class D extends r.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{seriesSelection:{},forceUpdate:!1}),(0,o.Z)(this,"handleLegendSelectChanged",(e=>{const{disableableSeries:t=[]}=this.props,{selected:s}=e,o=Object.keys(s).reduce(((e,o)=>{const r=["Releases","Other"].includes(o)||t.includes(o);return e[o]=!r||s[o],e}),{});this.setState({seriesSelection:o,forceUpdate:!0},(()=>this.setState({forceUpdate:!1})))}))}shouldComponentUpdate(e,t){return!(!t.forceUpdate&&i()(this.state.seriesSelection,t.seriesSelection)&&(e.reloading||!e.timeseriesData||i()(this.props.timeseriesData,e.timeseriesData)&&i()(this.props.releaseSeries,e.releaseSeries)&&i()(this.props.previousTimeseriesData,e.previousTimeseriesData)&&i()(this.props.tableData,e.tableData)))}getChartComponent(){const{showDaily:e,timeseriesData:t,yAxis:s,chartComponent:o}=this.props;if((0,Z.ri)(o))return o;if(e)return d.v;if(t.length>1)switch((0,j.fD)(s)){case"line":return u.w;case"area":return l.T;default:throw new Error(`Unknown multi plot type for ${s}`)}return l.T}render(){var e,t;const{theme:s,loading:o,reloading:r,yAxis:a,releaseSeries:n,zoomRenderProps:i,timeseriesData:l,previousTimeseriesData:p,showLegend:c,legendOptions:u,chartOptions:m,currentSeriesNames:h,previousSeriesNames:g,seriesTransformer:x,previousSeriesTransformer:Z,colors:S,height:w,timeframe:C,topEvents:D,tableData:P,fromDiscover:k,...R}=this.props,{seriesSelection:A}=this.state;let z=this.getChartComponent();if(z===y.y){const{data:e,title:t}=(0,v.JT)(P),s=[{seriesName:t,data:e}];return(0,_.tZ)(y.y,{series:s,fromDiscover:k})}z=z;const q=[...h.length>0?h:[(0,f.t)("Current")],...g.length>0?g:[(0,f.t)("Previous")]],T=(0,f.t)("Releases"),L=D&&D+1===l.length;L&&q.push("Other"),Array.isArray(n)&&q.push(T);const N=n&&n[0],M=Array.isArray(n)&&(null==N||null===(e=N.markLine)||void 0===e?void 0:e.data)&&N.markLine.data.length>=v.XO,O=Array.isArray(n)&&0===Object.keys(A).length&&M?{[T]:!1}:A,E=c?{right:16,top:12,data:q,selected:O,...null!=u?u:{}}:void 0;let I=Array.isArray(n)?[...l,...n]:l,F=p;var G;x&&(I=x(I)),Z&&(F=null===(G=F)||void 0===G?void 0:G.map((e=>Z(e))));const U=l.length?null!==(t=null==S?void 0:S.slice(0,I.length))&&void 0!==t?t:[...s.charts.getColorPalette(l.length-2-(L?1:0))]:void 0;U&&U.length&&L&&U.push(s.chartOther);const B={colors:U,grid:{left:"24px",right:"24px",top:"32px",bottom:"12px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",truncate:80,valueFormatter:e=>(0,b.CX)(e,(0,j.Px)(a))},xAxis:C?{min:C.start,max:C.end}:void 0,yAxis:{axisLabel:{color:s.chartLabel,formatter:e=>(0,b.gu)(e,(0,j.Px)(a))}},...null!=m?m:{},animation:typeof z!=typeof d.v&&void 0};return(0,_.tZ)(z,{...R,...i,...B,legend:E,onLegendSelectChanged:this.handleLegendSelectChanged,series:I,previousPeriod:F||void 0,height:w})}}D.displayName="Chart";const P=(0,a.d)(D);class k extends r.Component{isStacked(){const{topEvents:e,yAxis:t}=this.props;return"number"==typeof e&&e>0||Array.isArray(t)&&t.length>1}render(){const{api:e,organization:t,period:s,utc:o,query:a,router:n,start:i,end:l,projects:d,environments:u,showLegend:Z,minutesThresholdToDisplaySeconds:b,yAxis:D,disablePrevious:k,disableReleases:R,emphasizeReleases:A,currentSeriesName:z,previousSeriesName:q,seriesTransformer:T,previousSeriesTransformer:L,field:N,interval:M,showDaily:O,topEvents:E,orderby:I,confirmedQuery:F,colors:G,chartHeader:U,legendOptions:B,chartOptions:$,preserveReleaseQueryParams:Q,releaseQueryExtra:W,disableableSeries:H,chartComponent:V,usePageZoom:X,height:Y,withoutZerofill:J,fromDiscover:K,...ee}=this.props,te=!k&&!i&&!l,se=(0,S.qP)(D),oe=se.map((e=>{let t=e&&(0,j.GO)(e)?(0,j.vp)(e):e;return t&&t.length>60&&(t=t.substr(0,60)+"..."),t})),re=q?[q]:oe.map((e=>(0,f.t)("previous %s",e))),ae=z?[z]:oe,ne=O?"1d":M||(0,v.ZS)(this.props,"high");let ie=e=>{let{zoomRenderProps:t,releaseSeries:s,errored:o,loading:a,reloading:n,results:i,timeseriesData:l,previousTimeseriesData:d,timeframe:p,tableData:u}=e;if(o)return(0,_.tZ)(c.Z,{children:(0,_.tZ)(x.FC,{color:"gray300",size:"lg"})});const m=i||l;return(0,_.BX)(h.Z,{loading:a,reloading:n,height:Y?`${Y}px`:void 0,children:[(0,_.tZ)(g.Z,{visible:n}),r.isValidElement(U)&&U,(0,_.tZ)(P,{zoomRenderProps:t,loading:a,reloading:n,showLegend:Z,minutesThresholdToDisplaySeconds:b,releaseSeries:s||[],timeseriesData:null!=m?m:[],previousTimeseriesData:d,currentSeriesNames:ae,previousSeriesNames:re,seriesTransformer:T,previousSeriesTransformer:L,stacked:this.isStacked(),yAxis:se[0],showDaily:O,colors:G,legendOptions:B,chartOptions:$,disableableSeries:H,chartComponent:V,height:Y,timeframe:p,topEvents:E,tableData:null!=u?u:[],fromDiscover:K})]})};if(!R){const e=ie;ie=t=>(0,_.tZ)(m.Z,{utc:o,period:s,start:i,end:l,projects:d,environments:u,emphasizeReleases:A,preserveQueryParams:Q,queryExtra:W,children:s=>{let{releaseSeries:o}=s;return e({...t,releaseSeries:o})}})}return(0,_.tZ)(p.Z,{router:n,period:s,start:i,end:l,utc:o,usePageDate:X,...ee,children:o=>V===y.y?(0,_.tZ)(w.Z,{api:e,organization:t,yAxis:D,query:a,orderby:I,projects:d,period:s,start:i,end:l,environments:u,referrer:ee.referrer,children:e=>{let{errored:t,loading:s,reloading:r,tableData:a}=e;return ie({errored:t,loading:s,reloading:r,zoomRenderProps:o,tableData:a})}}):(0,_.tZ)(C.Z,{...ee,api:e,organization:t,period:s,project:d,environment:u,start:i,end:l,interval:ne,query:a,includePrevious:te,currentSeriesNames:ae,previousSeriesNames:re,yAxis:D,field:N,orderby:I,topEvents:E,confirmedQuery:F,partial:!0,withoutZerofill:J&&!this.isStacked(),children:e=>ie({...e,zoomRenderProps:o})})})}}k.displayName="EventsChart";const R=k},"./app/components/charts/eventsGeoRequest.tsx":(e,t,s)=>{s.d(t,{Z:()=>i}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("../node_modules/react/index.js"),r=s("./app/utils/dates.tsx"),a=s("./app/utils/discover/eventView.tsx"),n=s("./app/utils/discover/genericDiscoverQuery.tsx");const i=e=>{let{api:t,organization:s,yAxis:i,query:l,orderby:d,projects:p,period:c,start:u,end:m,environments:h,referrer:g,children:v}=e;const y=a.ZP.fromSavedQuery({id:void 0,name:"",version:2,fields:Array.isArray(i)?i:[i],query:l,orderby:null!=d?d:"",projects:p,range:null!=c?c:"",start:u?(0,r.v5)(u):void 0,end:m?(0,r.v5)(m):void 0,environment:h}),[x,f]=(0,o.useState)(void 0),[Z,b]=(0,o.useState)(!1),[j,S]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{let e=!0;return S(!1),x&&b(!0),(0,n.AA)(t,`/organizations/${s.slug}/events-geo/`,{...y.generateQueryStringObject(),referrer:g}).then((t=>{e&&(f([t[0]]),b(!1))})).catch((()=>{e&&(S(!0),b(!1))})),()=>{e=!1}}),[l,i,u,m,c,h,p,t]),v({errored:j,loading:!x&&!j,reloading:Z,tableData:x})}},"./app/components/charts/lineChart.tsx":(e,t,s)=>{s.d(t,{w:()=>n});var o=s("./app/components/charts/series/lineSeries.tsx"),r=s("./app/components/charts/baseChart.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{series:t,seriesOptions:s,...n}=e;return(0,a.tZ)(r.Z,{...n,series:t.map((e=>{let{seriesName:t,data:r,dataArray:a,...n}=e;return(0,o.Z)({...s,...n,name:t,data:a||(null==r?void 0:r.map((e=>{let{value:t,name:s}=e;return[s,t]}))),animation:!1,animationThreshold:1,animationDuration:0})}))})}n.displayName="LineChart"},"./app/components/charts/optionSelector.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),a=s("./app/components/featureBadge.tsx"),n=s("./app/components/forms/compactSelect.tsx"),i=s("./app/components/truncate.tsx"),l=s("./app/utils.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{options:t,onChange:s,selected:o,title:a,featureType:p,multiple:u,...m}=e;const h=(0,r.useMemo)((()=>t.map((e=>({...e,label:(0,d.tZ)(i.Z,{value:String(e.label),maxLength:60,expandDirection:"left"})})))),[t]);return(0,d.tZ)(n.Z,{size:"sm",options:h,value:o,onChange:function(e){s(u?e.map((e=>e.value)):e.value)},isOptionDisabled:function(e){return e.disabled||u&&3===o.length&&!o.includes(e.value)},multiple:u,triggerProps:{borderless:!0,prefix:(0,d.BX)(r.Fragment,{children:[a,(0,l.ri)(p)?(0,d.tZ)(c,{type:p}):null]})},placement:"bottom right",...m})}p.displayName="OptionSelector";const c=(0,o.Z)(a.Z,{target:"e1a4edto0"})({name:"6og82r",styles:"margin-left:0px"}),u=p},"./app/components/charts/releaseSeries.tsx":(e,t,s)=>{s.d(t,{Z:()=>w});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),a=s("../node_modules/react-router/es/index.js"),n=s("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),i=s("../node_modules/lodash/isEqual.js"),l=s.n(i),d=s("../node_modules/lodash/memoize.js"),p=s.n(d),c=s("../node_modules/lodash/partition.js"),u=s.n(c),m=s("./app/actionCreators/indicator.tsx"),h=s("./app/components/charts/components/markLine.tsx"),g=s("./app/locale.tsx"),v=s("./app/utils.tsx"),y=s("./app/utils/dates.tsx"),x=s("./app/utils/formatters.tsx"),f=s("./app/utils/parseLinkHeader.tsx"),Z=s("./app/utils/withApi.tsx"),b=s("./app/utils/withOrganization.tsx");function j(e,t,s){const o={};return Object.keys(s).forEach((e=>{let t=s[e];!t||"start"!==e&&"end"!==e||(t=(0,y.v5)(t)),t&&(o[e]=t)})),e.clear(),e.requestPromise(`/organizations/${t.slug}/releases/stats/`,{includeAllArgs:!0,method:"GET",query:o})}class S extends r.Component{constructor(){var e;super(...arguments),e=this,(0,o.Z)(this,"state",{releases:null,releaseSeries:[]}),(0,o.Z)(this,"_isMounted",!1),(0,o.Z)(this,"getOrganizationReleasesMemoized",p()(((e,t,s)=>j(e,t,s)),((e,t,s)=>Object.values(s).map((e=>JSON.stringify(e))).join("-")))),(0,o.Z)(this,"getReleaseSeries",(function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{organization:o,router:r,tooltip:a,environments:n,start:i,end:l,period:d,preserveQueryParams:p,queryExtra:c,theme:u}=e.props,m={...c};o.features.includes("global-views")&&(m.project=r.location.query.project),p&&(m.environment=[...n],m.start=i?(0,y.v5)(i):void 0,m.end=l?(0,y.v5)(l):void 0,m.statsPeriod=d||void 0);const f=(0,h.Z)({animation:!1,lineStyle:{color:u.purple300,opacity:.3,type:"solid",...s},label:{show:!1},data:t.map((e=>({xAxis:+new Date(e.date),name:(0,x.ko)(e.version,!0),value:(0,x.ko)(e.version,!0),onClick:()=>{r.push({pathname:`/organizations/${o.slug}/releases/${e.version}/`,query:m})},label:{formatter:()=>(0,x.ko)(e.version,!0)}}))),tooltip:a||{trigger:"item",formatter:t=>{let{data:s}=t;const o=(0,y.L0)(s.value,"MMM D, YYYY LT",{local:!e.props.utc}),r=(0,v.YU)((0,x.ko)(s.name,!0));return['<div class="tooltip-series">',`<div><span class="tooltip-label"><strong>${(0,g.t)("Release")}</strong></span> ${r}</div>`,"</div>",'<div class="tooltip-date">',o,"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")}}});return{seriesName:"Releases",color:u.purple200,data:[],markLine:f}}))}componentDidMount(){this._isMounted=!0;const{releases:e}=this.props;e?this.setReleasesWithSeries(e):this.fetchData()}componentDidUpdate(e){l()(e.projects,this.props.projects)&&l()(e.environments,this.props.environments)&&l()(e.start,this.props.start)&&l()(e.end,this.props.end)&&l()(e.period,this.props.period)&&l()(e.query,this.props.query)?l()(e.emphasizeReleases,this.props.emphasizeReleases)||this.setReleasesWithSeries(this.state.releases):this.fetchData()}componentWillUnmount(){this._isMounted=!1,this.props.api.clear()}async fetchData(){const{api:e,organization:t,projects:s,environments:o,period:r,start:a,end:n,memoized:i,query:l}=this.props,d={start:a,end:n,project:s,environment:o,statsPeriod:r,query:l};let p=!0;const c=[];for(;p;)try{const s=i?this.getOrganizationReleasesMemoized:j,[o,,r]=await s(e,t,d);c.push(...o),this._isMounted&&this.setReleasesWithSeries(c);const a=null==r?void 0:r.getResponseHeader("Link");if(a){var u,h;const e=(0,f.Z)(a);p=null!==(u=null==e||null===(h=e.next)||void 0===h?void 0:h.results)&&void 0!==u&&u,d.cursor=e.next.cursor}else p=!1}catch{(0,m.Iw)((0,g.t)("Error fetching releases")),p=!1}}setReleasesWithSeries(e){const{emphasizeReleases:t=[]}=this.props,s=[];if(t.length){const[o,r]=u()(e,(e=>!t.includes(e.version)));o.length&&s.push(this.getReleaseSeries(o,{type:"dotted"})),r.length&&s.push(this.getReleaseSeries(r,{opacity:.8}))}else s.push(this.getReleaseSeries(e));this.setState({releases:e,releaseSeries:s})}render(){const{children:e}=this.props;return e({releases:this.state.releases,releaseSeries:this.state.releaseSeries})}}S.displayName="ReleaseSeries";const w=(0,a.withRouter)((0,b.Z)((0,Z.Z)((0,n.d)(S))))},"./app/components/charts/stackedAreaChart.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("../node_modules/react/index.js"),r=s("./app/components/charts/areaChart.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class n extends o.Component{render(){return(0,a.tZ)(r.T,{tooltip:{filter:e=>e>0},...this.props,stacked:!0})}}n.displayName="StackedAreaChart";const i=n},"./app/components/charts/transitionChart.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("./app/components/charts/loadingPanel.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends r.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{prevReloading:this.props.reloading,prevLoading:this.props.loading,key:1})}static getDerivedStateFromProps(e,t){const s=t.prevReloading,o=e.reloading,r=t.prevLoading,a=e.loading;return r!==a?{prevReloading:o,prevLoading:a,key:t.key+1}:a?{prevReloading:o,prevLoading:a,key:t.key}:s&&!o?{prevReloading:o,prevLoading:a,key:t.key+1}:{prevReloading:o,prevLoading:a,key:t.key}}render(){const{height:e,loading:t,reloading:s}=this.props;return t&&!s?(0,n.tZ)(a.Z,{height:e,"data-test-id":"events-request-loading"}):(0,n.tZ)(r.Fragment,{children:this.props.children},String(this.state.key))}}i.displayName="TransitionChart",(0,o.Z)(i,"defaultProps",{height:"200px"});const l=i},"./app/components/charts/transparentLoadingMask.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/loadingMask.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,o.Z)((e=>{let{className:t,visible:s,children:o,...n}=e;const i=s?{...n,"data-test-id":"loading-placeholder"}:n;return(0,a.tZ)(r.Z,{className:t,...i,children:o})}),{target:"ewtkxp50"})((e=>!e.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/components/charts/worldMapChart.tsx":(e,t,s)=>{s.d(t,{y:()=>u}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("../node_modules/react/index.js"),r=s("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),a=s("../node_modules/echarts/core.js"),n=s("../node_modules/echarts/lib/core/echarts.js"),i=s("../node_modules/lodash/max.js"),l=s.n(i),d=s("./app/components/charts/components/visualMap.tsx");s("../node_modules/echarts/lib/chart/map.js");var p=s("./app/components/charts/baseChart.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e){let{series:t,seriesOptions:i,fromDiscover:u,fromDiscoverQueryList:m,...h}=e;const g=(0,r.a)(),[v,y]=(0,o.useState)((()=>({countryToCodeMap:null,map:null,codeToCountryMap:null})));if((0,o.useEffect)((()=>{let e=!1;return e||async function(){try{var e;const[t,o]=await Promise.all([s.e("app_data_countryCodesMap_tsx").then(s.bind(s,"./app/data/countryCodesMap.tsx")),s.e("app_data_world_json").then(s.t.bind(s,"./app/data/world.json",19))]),r=t.default,i=o.default;null===(e=n.je)||void 0===e||e.call(a,"sentryWorld",i);const l={};for(const e in i)l[r[e]]=e;y({countryToCodeMap:r,map:i,codeToCountryMap:l})}catch{}}(),()=>{e=!0}}),[]),null===v.countryToCodeMap||null===v.map)return null;const x=t.map((e=>{var t;let{seriesName:s,data:o,...r}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{map:""};return{roam:!0,...e,emphasis:{label:{show:!1},...e.emphasis},type:"map"}}({...i,...r,map:"sentryWorld",name:s,nameMap:null!==(t=v.countryToCodeMap)&&void 0!==t?t:void 0,aspectScale:.85,zoom:u?1.1:m?.9:1.3,center:[10.97,m?-12:9.71],itemStyle:{areaColor:g.gray200,borderColor:g.backgroundSecondary},emphasis:{itemStyle:{areaColor:g.pink300},label:{show:!1}},data:o,silent:m,roam:!m})})),f=l()(t.map((e=>{let{data:t}=e;return l()(t.map((e=>{let{value:t}=e;return t})))})))||1;return(0,c.tZ)(p.Z,{options:{backgroundColor:m?void 0:g.background,visualMap:[(0,d.Z)({show:!m,left:u?void 0:"right",right:u?5:void 0,min:0,max:f,inRange:{color:[g.purple200,g.purple300]},text:["High","Low"],textStyle:{color:g.textColor},calculable:!1})]},...h,yAxis:null,xAxis:null,series:x,tooltip:{formatter:e=>{var t;const{marker:s,name:o,value:r}=Array.isArray(e)?e[0]:e;if(isNaN(r))return"";const a="number"==typeof r?r.toLocaleString():"";return[`<div class="tooltip-series tooltip-series-solo">\n               <div><span class="tooltip-label">${s} <strong>${(null===(t=v.codeToCountryMap)||void 0===t?void 0:t[o])||o}</strong></span> ${a}</div>\n            </div>`,'<div class="tooltip-arrow"></div>'].join("")}},height:u?400:void 0})}u.displayName="WorldMapChart"},"./app/components/discover/discoverFeature.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var o=s("./app/components/acl/feature.tsx"),r=s("./app/components/acl/featureDisabled.tsx"),a=s("./app/components/hovercard.tsx"),n=s("./app/locale.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{children:t}=e;const s=(0,n.t)("Requires discover feature.");return(0,i.tZ)(o.Z,{hookName:"feature-disabled:open-discover",features:["organizations:discover-basic"],renderDisabled:e=>(0,i.tZ)(a.uI,{body:(0,i.tZ)(r.Z,{features:e.features,hideHelpToggle:!0,message:s,featureName:s}),children:e.children(e)}),children:e=>{let{hasFeature:s}=e;return t({hasFeature:s})}})}l.displayName="DiscoverFeature";const d=l},"./app/components/discoverButton.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var o=s("./app/components/button.tsx"),r=s("./app/components/discover/discoverFeature.tsx"),a=s("./app/locale.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{children:t,...s}=e;return(0,n.tZ)(r.Z,{children:e=>{let{hasFeature:r}=e;return(0,n.tZ)(o.ZP,{disabled:!r,"aria-label":(0,a.t)("Open in Discover"),...s,children:t})}})}i.displayName="DiscoverButton";const l=i},"./app/components/issues/groupList.tsx":(e,t,s)=>{s.d(t,{Z:()=>M});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("../node_modules/react-router/es/index.js"),n=s("../node_modules/lodash/isEqual.js"),i=s.n(n),l=s("../node_modules/lodash/omit.js"),d=s.n(l),p=s("../node_modules/query-string/index.js"),c=s("./app/actionCreators/members.tsx"),u=s("./app/components/emptyStateWarning.tsx"),m=s("./app/components/loadingError.tsx"),h=s("./app/components/loadingIndicator.tsx"),g=s("./app/components/pagination.tsx"),v=s("./app/components/panels/index.tsx"),y=s("./app/components/searchSyntax/parser.tsx"),x=s("./app/components/searchSyntax/utils.tsx"),f=s("./app/components/stream/group.tsx"),Z=s("./app/locale.tsx"),b=s("./app/stores/groupStore.tsx"),j=s("./app/utils/callIfFunction.tsx"),S=s("./app/utils/streamManager.tsx"),w=s("./app/utils/withApi.tsx"),C=s("./app/views/alerts/rules/metric/details/relatedIssuesNotAvailable.tsx"),_=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),D=s("./app/styles/space.tsx"),P=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const k=e=>{let{withChart:t=!0,narrowGroups:s=!1}=e;return(0,P.BX)(v.V9,{disablePadding:!0,children:[(0,P.tZ)(z,{children:(0,Z.t)("Issue")}),t&&(0,P.tZ)(T,{className:"hidden-xs hidden-sm "+(s?"hidden-md":""),children:(0,Z.t)("Graph")}),(0,P.tZ)(q,{children:(0,Z.t)("events")}),(0,P.tZ)(q,{children:(0,Z.t)("users")}),(0,P.tZ)(L,{className:"hidden-xs hidden-sm toolbar-header",children:(0,Z.t)("Assignee")})]})};k.displayName="GroupListHeader";const R=k,A=(0,_.Z)("div",{target:"emaz6xo4"})("display:flex;align-self:center;margin:0 ",(0,D.Z)(2),";color:",(e=>e.theme.subText),";"),z=(0,_.Z)(A,{target:"emaz6xo3"})("flex:1;width:66.66%;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){width:50%;}"),q=(0,_.Z)(A,{target:"emaz6xo2"})("justify-content:flex-end;width:60px;@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){width:80px;}"),T=(0,_.Z)(A,{target:"emaz6xo1"})({name:"1yz45kt",styles:"justify-content:space-between;width:160px"}),L=(0,_.Z)(A,{target:"emaz6xo0"})({name:"8mimsw",styles:"justify-content:flex-end;width:80px"});class N extends r.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{loading:!0,error:!1,errorData:null,groups:[],pageLinks:null}),(0,o.Z)(this,"listener",b.Z.listen((()=>this.onGroupChange()),void 0)),(0,o.Z)(this,"_streamManager",new S.Z(b.Z)),(0,o.Z)(this,"fetchData",(async()=>{b.Z.loadInitialData([]);const{api:e,orgId:t,queryParams:s}=this.props;e.clear(),this.setState({loading:!0,error:!1,errorData:null}),(0,c.MA)(e,t).then((e=>{this.setState({memberList:(0,c.M4)(e)})}));const o=this.getGroupListEndpoint(),r=(0,y.UG)((null!=s?s:this.getQueryParams()).query);if(r&&(0,x.ly)({tree:r,noResultValue:!1,visitorTest:e=>{let{token:t,returnResult:s}=e;return t.type===y.WU.LogicBoolean?s(!0):null}}))this.setState({error:!0,errorData:{detail:C.H},loading:!1});else try{var a;const[t,,s]=await e.requestPromise(o,{includeAllArgs:!0});this._streamManager.push(t),this.setState({error:!1,errorData:null,loading:!1,pageLinks:null!==(a=null==s?void 0:s.getResponseHeader("Link"))&&void 0!==a?a:null},(()=>{var e,t;null===(e=(t=this.props).onFetchSuccess)||void 0===e||e.call(t,this.state,this.handleCursorChange)}))}catch(e){this.setState({error:!0,errorData:e.responseJSON,loading:!1})}}))}componentDidMount(){this.fetchData()}shouldComponentUpdate(e,t){return!i()(this.state,t)||e.endpointPath!==this.props.endpointPath||e.query!==this.props.query||!i()(e.queryParams,this.props.queryParams)}componentDidUpdate(e){const t=["end"];e.orgId===this.props.orgId&&e.endpointPath===this.props.endpointPath&&e.query===this.props.query&&i()(d()(e.queryParams,t),d()(this.props.queryParams,t))||this.fetchData()}componentWillUnmount(){b.Z.reset(),(0,j.g)(this.listener)}getGroupListEndpoint(){const{orgId:e,endpointPath:t,queryParams:s}=this.props,o=null!=t?t:`/organizations/${e}/issues/`,r=null!=s?s:this.getQueryParams();return`${o}?${p.stringify(r)}`}getQueryParams(){const{location:e,query:t}=this.props,s=e.query;return s.limit=50,s.sort="new",s.query=t,s}handleCursorChange(e,t,s,o){const r=parseInt(s.page,10);let n=isNaN(r)?o:r+o;n<=0&&(e=void 0,n=void 0),a.browserHistory.push({pathname:t,query:{...s,cursor:e,page:n}})}onGroupChange(){const e=this._streamManager.getAllItems();i()(e,this.state.groups)||this.setState({groups:e})}render(){const{canSelectGroups:e,withChart:t,renderEmptyMessage:s,renderErrorMessage:o,withPagination:a,useFilteredStats:n,useTintRow:i,customStatsPeriod:l,queryParams:d,queryFilterDescription:p,narrowGroups:c}=this.props,{loading:y,error:x,errorData:b,groups:j,memberList:S,pageLinks:w}=this.state;if(y)return(0,P.tZ)(h.Z,{});if(x)return"function"==typeof o&&b?o(b,this.fetchData):(0,P.tZ)(m.Z,{onRetry:this.fetchData});if(0===j.length)return"function"==typeof s?s():(0,P.tZ)(v.s_,{children:(0,P.tZ)(v.N,{children:(0,P.tZ)(u.Z,{children:(0,P.tZ)("p",{children:(0,Z.t)("There don't seem to be any events fitting the query.")})})})});const C="auto"===(null==d?void 0:d.groupStatsPeriod)?null==d?void 0:d.groupStatsPeriod:f.g;return(0,P.BX)(r.Fragment,{children:[(0,P.BX)(v.s_,{children:[(0,P.tZ)(R,{withChart:!!t,narrowGroups:c}),(0,P.tZ)(v.N,{children:j.map((s=>{let{id:o,project:r}=s;const a=null!=S&&S.hasOwnProperty(r.slug)?S[r.slug]:void 0;return(0,P.tZ)(f.Z,{id:o,canSelect:e,withChart:t,memberList:a,useFilteredStats:n,useTintRow:i,customStatsPeriod:l,statsPeriod:C,queryFilterDescription:p,narrowGroups:c},o)}))})]}),a&&(0,P.tZ)(g.Z,{pageLinks:w,onCursor:this.handleCursorChange})]})}}N.displayName="GroupList",(0,o.Z)(N,"defaultProps",{canSelectGroups:!0,withChart:!0,withPagination:!0,useFilteredStats:!0,useTintRow:!0,narrowGroups:!1});const M=(0,w.Z)((0,a.withRouter)(N))},"./app/views/alerts/rules/metric/details/relatedIssuesNotAvailable.tsx":(e,t,s)=>{s.d(t,{H:()=>d,z:()=>p});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/acl/feature.tsx"),a=s("./app/components/alert.tsx"),n=s("./app/components/button.tsx"),i=s("./app/components/panels/index.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d='Error parsing search query: Boolean statements containing "OR" or "AND" are not supported in this search',p=e=>{let{buttonTo:t,buttonText:s}=e;return(0,l.tZ)(c,{type:"info",showIcon:!0,trailingItems:(0,l.tZ)(r.Z,{features:["discover-basic"],children:(0,l.tZ)(n.ZP,{type:"button",priority:"default",size:"xs",to:t,children:s})}),children:(0,l.tZ)("div",{"data-test-id":"loading-error-message",children:"Related Issues unavailable for this alert."})})};p.displayName="RelatedIssuesNotAvailable";const c=(0,o.Z)(a.Z,{target:"e14eefiq0"})(i.s_," &{border-radius:0;border-width:1px 0;}")}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_eventsChart_tsx-app_components_charts_optionSelector_tsx-app_components-0069b4.bb5736a88757187a67b7cc1b8522927c.js.map