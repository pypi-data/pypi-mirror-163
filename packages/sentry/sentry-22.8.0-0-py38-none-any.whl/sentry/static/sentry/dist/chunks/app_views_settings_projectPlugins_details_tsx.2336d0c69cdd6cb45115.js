"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_projectPlugins_details_tsx"],{"./app/utils/withPlugins.tsx":(t,e,s)=>{s.d(e,{Z:()=>Z});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("./app/actionCreators/plugins.tsx"),l=s("../node_modules/reflux/src/index.js"),a=s("./app/actions/pluginActions.tsx"),o=s("./app/utils/makeSafeRefluxStore.ts");const p={loading:!0,plugins:[],error:null,pageLinks:null},u={plugins:null,state:{...p},updating:new Map,unsubscribeListeners:[],reset(){return this.plugins=null,this.state={...p},this.updating=new Map,this.state},getInitialState(){return this.getState()},getState(){const{plugins:t,...e}=this.state;return{...e,plugins:this.plugins?Array.from(this.plugins.values()):[]}},init(){this.reset(),this.unsubscribeListeners.push(this.listenTo(a.Z.fetchAll,this.onFetchAll)),this.unsubscribeListeners.push(this.listenTo(a.Z.fetchAllSuccess,this.onFetchAllSuccess)),this.unsubscribeListeners.push(this.listenTo(a.Z.fetchAllError,this.onFetchAllError)),this.unsubscribeListeners.push(this.listenTo(a.Z.update,this.onUpdate)),this.unsubscribeListeners.push(this.listenTo(a.Z.updateSuccess,this.onUpdateSuccess)),this.unsubscribeListeners.push(this.listenTo(a.Z.updateError,this.onUpdateError))},triggerState(){this.trigger(this.getState())},onFetchAll(){let{resetLoading:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&(this.state.loading=!0,this.state.error=null,this.plugins=null),this.triggerState()},onFetchAllSuccess(t,e){let{pageLinks:s}=e;this.plugins=new Map(t.map((t=>[t.id,t]))),this.state.pageLinks=s||null,this.state.loading=!1,this.triggerState()},onFetchAllError(t){this.plugins=null,this.state.loading=!1,this.state.error=t,this.triggerState()},onUpdate(t,e){if(!this.plugins)return;const s=this.plugins.get(t);if(!s)return;const i={...s,...e};this.plugins.set(t,i),this.updating.set(t,s),this.triggerState()},onUpdateSuccess(t,e){this.updating.delete(t)},onUpdateError(t,e,s){const i=this.updating.get(t);i&&this.plugins&&(this.plugins.set(t,i),this.updating.delete(t),this.state.error=s,this.triggerState())}},d=(0,l.createStore)((0,o.Y)(u));var c=s("./app/utils.tsx"),h=s("./app/utils/getDisplayName.tsx"),g=s("./app/utils/withOrganization.tsx"),m=s("./app/utils/withProject.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Z=function(t){class e extends n.Component{constructor(){super(...arguments),(0,i.Z)(this,"state",{plugins:[],loading:!0}),(0,i.Z)(this,"unsubscribe",d.listen((t=>{let{plugins:e,loading:s}=t;this.setState({plugins:e,loading:s})}),void 0))}componentDidMount(){this.fetchPlugins()}componentDidUpdate(t,e,s){const{organization:i,project:n}=this.props,r=t.organization||(null==s?void 0:s.organization),l=t.project||(null==s?void 0:s.project);if(!(0,c.ri)(l)||!(0,c.ri)(r))return;const a=r.slug===i.slug,o=l.slug===(null==n?void 0:n.slug);a&&o||this.fetchPlugins()}componentWillUnmount(){this.unsubscribe()}fetchPlugins(){const{organization:t,project:e}=this.props;e&&t&&(0,r.MM)({projectId:e.slug,orgId:t.slug})}render(){return(0,b.tZ)(t,{...this.props,plugins:this.state})}}return e.displayName="WithPlugins",(0,i.Z)(e,"displayName",`withPlugins(${(0,h.Z)(t)})`),(0,g.Z)((0,m.Z)(e))}},"./app/views/asyncView.tsx":(t,e,s)=>{s.d(e,{Z:()=>l});var i=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class l extends i.Z{getTitle(){return""}render(){return(0,r.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}l.displayName="AsyncView"},"./app/views/settings/projectPlugins/details.tsx":(t,e,s)=>{s.r(e),s.d(e,{ProjectPluginDetails:()=>Z,default:()=>x});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./app/actionCreators/indicator.tsx")),l=s("./app/actionCreators/plugins.tsx"),a=s("./app/components/button.tsx"),o=s("./app/components/links/externalLink.tsx"),p=s("./app/components/pluginConfig.tsx"),u=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),c=s("./app/utils/integrationUtil.tsx"),h=s("./app/utils/withPlugins.tsx"),g=s("./app/views/asyncView.tsx"),m=s("./app/views/settings/components/settingsPageHeader.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class Z extends g.Z{constructor(){super(...arguments),(0,i.Z)(this,"handleReset",(()=>{const{projectId:t,orgId:e,pluginId:s}=this.props.params;(0,r.E3)((0,u.t)("Saving changesâ€¦")),(0,c.Db)("integrations.uninstall_clicked",{integration:s,integration_type:"plugin",view:"plugin_details",organization:this.props.organization}),this.api.request(`/projects/${e}/${t}/plugins/${s}/`,{method:"POST",data:{reset:!0},success:t=>{this.setState({pluginDetails:t}),(0,r.S9)((0,u.t)("Plugin was reset")),(0,c.Db)("integrations.uninstall_completed",{integration:s,integration_type:"plugin",view:"plugin_details",organization:this.props.organization})},error:()=>{(0,r.Iw)((0,u.t)("An error occurred"))}})})),(0,i.Z)(this,"handleEnable",(()=>{(0,l.Cg)(this.props.params),this.analyticsChangeEnableStatus(!0)})),(0,i.Z)(this,"handleDisable",(()=>{(0,l.rR)(this.props.params),this.analyticsChangeEnableStatus(!1)})),(0,i.Z)(this,"analyticsChangeEnableStatus",(t=>{const{pluginId:e}=this.props.params,s=t?"integrations.enabled":"integrations.disabled";(0,c.Db)(s,{integration:e,integration_type:"plugin",view:"plugin_details",organization:this.props.organization})}))}componentDidUpdate(t,e){super.componentDidUpdate(t,e),t.params.pluginId!==this.props.params.pluginId&&this.recordDetailsViewed()}componentDidMount(){this.recordDetailsViewed()}recordDetailsViewed(){const{pluginId:t}=this.props.params;(0,c.Db)("integrations.details_viewed",{integration:t,integration_type:"plugin",view:"plugin_details",organization:this.props.organization})}getTitle(){const{plugin:t}=this.state;return t&&t.name?t.name:"Sentry"}getEndpoints(){const{projectId:t,orgId:e,pluginId:s}=this.props.params;return[["pluginDetails",`/projects/${e}/${t}/plugins/${s}/`]]}trimSchema(t){return t.split("//")[1]}getEnabled(){const{pluginDetails:t}=this.state,{plugins:e}=this.props,s=e&&e.plugins&&e.plugins.find((t=>{let{slug:e}=t;return e===this.props.params.pluginId}));return s?s.enabled:t&&t.enabled}renderActions(){const{pluginDetails:t}=this.state;if(!t)return null;const e=this.getEnabled(),s=(0,b.tZ)(v,{size:"sm",onClick:this.handleEnable,children:(0,u.t)("Enable Plugin")}),i=(0,b.tZ)(v,{size:"sm",priority:"danger",onClick:this.handleDisable,children:(0,u.t)("Disable Plugin")}),n=e?i:s;return(0,b.BX)("div",{className:"pull-right",children:[t.canDisable&&n,(0,b.tZ)(a.ZP,{size:"sm",onClick:this.handleReset,children:(0,u.t)("Reset Configuration")})]})}renderBody(){var t,e;const{organization:s,project:i}=this.props,{pluginDetails:n}=this.state;return n?(0,b.BX)("div",{children:[(0,b.tZ)(m.Z,{title:n.name,action:this.renderActions()}),(0,b.BX)("div",{className:"row",children:[(0,b.tZ)("div",{className:"col-md-7",children:(0,b.tZ)(p.Z,{organization:s,project:i,data:n,enabled:this.getEnabled(),onDisablePlugin:this.handleDisable})}),(0,b.tZ)("div",{className:"col-md-4 col-md-offset-1",children:(0,b.BX)("div",{className:"pluginDetails-meta",children:[(0,b.tZ)("h4",{children:(0,u.t)("Plugin Information")}),(0,b.BX)("dl",{className:"flat",children:[(0,b.tZ)("dt",{children:(0,u.t)("Name")}),(0,b.tZ)("dd",{children:n.name}),(0,b.tZ)("dt",{children:(0,u.t)("Author")}),(0,b.tZ)("dd",{children:null===(t=n.author)||void 0===t?void 0:t.name}),(null===(e=n.author)||void 0===e?void 0:e.url)&&(0,b.BX)("div",{children:[(0,b.tZ)("dt",{children:(0,u.t)("URL")}),(0,b.tZ)("dd",{children:(0,b.tZ)(o.Z,{href:n.author.url,children:this.trimSchema(n.author.url)})})]}),(0,b.tZ)("dt",{children:(0,u.t)("Version")}),(0,b.tZ)("dd",{children:n.version})]}),n.description&&(0,b.BX)("div",{children:[(0,b.tZ)("h4",{children:(0,u.t)("Description")}),(0,b.tZ)("p",{className:"description",children:n.description})]}),n.resourceLinks&&(0,b.BX)("div",{children:[(0,b.tZ)("h4",{children:(0,u.t)("Resources")}),(0,b.tZ)("dl",{className:"flat",children:n.resourceLinks.map((t=>{let{title:e,url:s}=t;return(0,b.tZ)("dd",{children:(0,b.tZ)(o.Z,{href:s,children:e})},s)}))})]})]})})]})]}):null}}const x=(0,h.Z)(Z),v=(0,n.Z)(a.ZP,{target:"eq4tbyn0"})("margin-right:",(0,d.Z)(.75),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectPlugins_details_tsx.5e9c56c9777cd5a748f9ff8d544d98b4.js.map