"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_discover_genericDiscoverQuery_tsx-app_views_organizationGroupDetails_groupReplays_i-c05537"],{"./app/utils/discover/genericDiscoverQuery.tsx":(e,t,s)=>{s.d(t,{AA:()=>m,ZP:()=>h,o:()=>p});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react/index.js")),i=s("./app/locale.tsx"),n=s("./app/utils/discover/eventView.tsx"),a=s("./app/utils/performance/contexts/performanceEventViewContext.tsx"),l=s("./app/views/organizationContext.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class p{constructor(e,t){(0,r.Z)(this,"message",void 0),(0,r.Z)(this,"originalError",void 0),this.message=e,this.originalError=t}getOriginalError(){return this.originalError}}class d extends o.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{isLoading:!0,tableFetchID:void 0,error:null,tableData:null,pageLinks:null}),(0,r.Z)(this,"_shouldRefetchData",(e=>{const t=this.getPayload(this.props),s=this.getPayload(e);return!(0,n.ze)(t,s)||e.limit!==this.props.limit||e.route!==this.props.route||e.cursor!==this.props.cursor})),(0,r.Z)(this,"_parseError",(e=>{var t;if(this.props.parseError)return this.props.parseError(e);if(!e)return null;const s=null===(t=e.responseJSON)||void 0===t?void 0:t.detail;if("string"==typeof s)return new p(s,e);const r=null==s?void 0:s.message;return new p("string"==typeof r?r:(0,i.t)("An unknown error occurred."),e)})),(0,r.Z)(this,"fetchData",(async()=>{const{api:e,queryBatching:t,beforeFetch:s,afterFetch:r,didFetch:o,eventView:i,orgSlug:n,route:a,setError:l}=this.props;if(!i.isValid())return;const u=`/organizations/${n}/${a}/`,p=Symbol("tableFetchID"),d=this.getPayload(this.props);this.setState({isLoading:!0,tableFetchID:p}),null==l||l(void 0),null==s||s(e),e.clear();try{const[s,,i]=await m(e,u,d,t);if(this.state.tableFetchID!==p)return;const n=r?r(s,this.props):s;null==o||o(n),this.setState((e=>{var t;return{isLoading:!1,tableFetchID:void 0,error:null,pageLinks:null!==(t=null==i?void 0:i.getResponseHeader("Link"))&&void 0!==t?t:e.pageLinks,tableData:n}}))}catch(e){const t=this._parseError(e);this.setState({isLoading:!1,tableFetchID:void 0,error:t,tableData:null}),l&&l(null!=t?t:void 0)}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){const t=this._shouldRefetchData(e),s=!1===e.eventView.isValid()&&this.props.eventView.isValid(),r=!!this.props.shouldRefetchData&&this.props.shouldRefetchData(e,this.props);(t||s||r)&&this.fetchData()}getPayload(e){var t;const{cursor:s,limit:r,noPagination:o,referrer:i}=e,n=this.props.getRequestPayload?this.props.getRequestPayload(e):e.eventView.getEventsAPIPayload(e.location,e.forceAppendRawQueryString);return s&&(n.cursor=s),r&&(n.per_page=r),o&&(n.noPagination=o),i&&(n.referrer=i),Object.assign(n,null!==(t=e.queryExtras)&&void 0!==t?t:{}),n}render(){const{isLoading:e,error:t,tableData:s,pageLinks:r}=this.state,o={isLoading:e,error:t,tableData:s,pageLinks:r},i=this.props.children;return null==i?void 0:i(o)}}function c(e){var t,s,r,i;const n=null===(t=(0,o.useContext)(l.g))||void 0===t?void 0:t.slug,p=null===(s=(0,o.useContext)(a.uL))||void 0===s?void 0:s.eventView,c=null!==(r=e.orgSlug)&&void 0!==r?r:n,m=null!==(i=e.eventView)&&void 0!==i?i:p;if(void 0===c||void 0===m)throw new Error("GenericDiscoverQuery requires both an orgSlug and eventView");const h={...e,orgSlug:c,eventView:m};return(0,u.tZ)(d,{...h})}function m(e,t,s,r){return null!=r&&r.batchRequest?r.batchRequest(e,t,{query:s,includeAllArgs:!0}):e.requestPromise(t,{method:"GET",includeAllArgs:!0,query:{...s}})}d.displayName="_GenericDiscoverQuery",c.displayName="GenericDiscoverQuery";const h=c},"./app/utils/performance/contexts/performanceEventViewContext.tsx":(e,t,s)=>{s.d(t,{bq:()=>o,uL:()=>n}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("./app/utils/performance/contexts/utils.tsx");const[o,i,n]=(0,r.n)({name:"PerformanceEventViewContext"})},"./app/utils/performance/contexts/utils.tsx":(e,t,s)=>{s.d(t,{n:()=>o}),s("../node_modules/core-js/modules/es.error.cause.js");var r=s("../node_modules/react/index.js");function o(e){const{strict:t=!0,errorMessage:s=`useContext for "${e.name}" must be inside a Provider with a value`,name:o}=e,i=(0,r.createContext)(void 0);return i.displayName=o,[i.Provider,function(){const e=(0,r.useContext)(i);if(!e&&t)throw new Error(s);return e},i]}},"./app/utils/useLocation.tsx":(e,t,s)=>{s.d(t,{T:()=>o});var r=s("./app/utils/useRouteContext.tsx");function o(){return(0,r.s)().location}},"./app/utils/useParams.tsx":(e,t,s)=>{s.d(t,{U:()=>o});var r=s("./app/utils/useRouteContext.tsx");function o(){return(0,r.s)().params}},"./app/views/organizationGroupDetails/groupReplays/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>P});var r=s("./app/components/acl/feature.tsx"),o=s("./app/components/alert.tsx"),i=s("./app/locale.tsx"),n=s("./app/styles/organization.tsx"),a=s("./app/utils/useOrganization.tsx"),l=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),u=s("../node_modules/react/index.js"),p=s("./app/components/links/link.tsx"),d=s("./app/components/pagination.tsx"),c=s("./app/components/panels/index.tsx"),m=s("./app/icons/index.tsx"),h=s("./app/utils/discover/discoverQuery.tsx"),g=s("./app/utils/discover/eventView.tsx"),v=s("./app/utils/replays/getQueryParamAsString.tsx"),x=s("./app/utils/useLocation.tsx"),y=s("./app/utils/useParams.tsx"),f=s("./app/views/replays/replayTable.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const w=e=>{let{group:t}=e;const s=(0,x.T)(),r=(0,a.Z)(),o=(0,y.U)(),{project:n}=t,{query:l}=s,{cursor:p,page:c,...w}=l,j={field:(0,v.i)(l.sort)||"-timestamp"},L=j.field.startsWith("-")?"down":"up",P=(0,b.tZ)(m.CC,{color:"gray300",size:"xs",direction:L});return(0,b.tZ)(u.Fragment,{children:(0,b.tZ)(Z,{children:(0,b.tZ)(h.Z,{eventView:(()=>{const{groupId:e}=o,t={id:"",name:"",version:2,fields:["replayId","eventID","project","timestamp","url","user.display","user.email","user.id","user.ip_address","user.name","user.username"],projects:[+n.id],orderby:(0,v.i)(l.sort)||"-timestamp",query:`issue.id:${e} has:replayId`};return g.ZP.fromNewQueryWithLocation(t,s)})(),location:s,orgSlug:r.slug,limit:50,children:e=>{var t;return(0,b.BX)(u.Fragment,{children:[(0,b.tZ)(D,{isLoading:e.isLoading,isEmpty:0===(null===(t=e.tableData)||void 0===t?void 0:t.data.length),headers:[(0,i.t)("Session"),(0,b.BX)(_,{role:"columnheader","aria-sort":j.field.endsWith("timestamp")?"-timestamp"===j.field?"descending":"ascending":"none",to:{pathname:s.pathname,query:{...w,sort:"-timestamp"===j.field?"timestamp":"-timestamp"}},children:[(0,i.t)("Timestamp")," ",j.field.endsWith("timestamp")&&P]},"timestamp"),(0,i.t)("Duration"),(0,i.t)("Errors"),(0,i.t)("Interest")],children:e.tableData?(0,b.tZ)(f.Z,{idKey:"replayId",replayList:e.tableData.data}):null}),(0,b.tZ)(d.Z,{pageLinks:e.pageLinks})]})}})})})};w.displayName="GroupReplays";const D=(0,l.Z)(c.KB,{target:"e1g324zf2"})({name:"c1tmw0",styles:"grid-template-columns:minmax(0, 1fr) max-content max-content max-content max-content"}),Z=(0,l.Z)(n.JH,{target:"e1g324zf1"})("box-shadow:0px 0px 1px ",(e=>e.theme.gray200),";background-color:",(e=>e.theme.background),";"),_=(0,l.Z)(p.Z,{target:"e1g324zf0"})({name:"1qowyn7",styles:"color:inherit;:hover{color:inherit;}svg{vertical-align:top;}"}),j=w,L=e=>{let{group:t}=e;const s=(0,a.Z)();return(0,b.tZ)(r.Z,{features:["session-replay"],organization:s,renderDisabled:function(){return(0,b.tZ)(n.JH,{children:(0,b.tZ)(o.Z,{type:"warning",children:(0,i.t)("You don't have access to this feature")})})},children:(0,b.tZ)(j,{group:t})})};L.displayName="GroupReplaysContainer";const P=L}}]);
//# sourceMappingURL=../sourcemaps/app_utils_discover_genericDiscoverQuery_tsx-app_views_organizationGroupDetails_groupReplays_i-c05537.1cafeb1f491149e8fc5102886eac7ad8.js.map