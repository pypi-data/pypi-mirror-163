"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_profiling_profileDetails_tsx"],{"./app/components/gridEditable/sortLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/lodash/omit.js"),o=s.n(n),i=s("./app/components/links/link.tsx"),l=s("./app/icons/index.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{align:t,title:s,canSort:r,generateSortLink:n,onClick:o,direction:i}=e;const l=n();if(!l||!r)return(0,a.tZ)(c,{align:t,children:s});const d=i?(0,a.tZ)(p,{size:"xs",direction:"desc"===i?"down":"up"}):null;return(0,a.BX)(u,{align:t,to:l,onClick:o,children:[s," ",d]})}d.displayName="SortLink";const u=(0,r.Z)((e=>{const t=o()(e,["align"]);return(0,a.tZ)(i.Z,{...t})}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),c=(0,r.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),p=(0,r.Z)(l.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"}),m=d},"./app/utils/profiling/tableRenderer.tsx":(e,t,s)=>{s.d(t,{w:()=>o});var r=s("./app/components/gridEditable/sortLink.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{currentSort:t,generateSortLink:s,rightAlignedColumns:o,sortableColumns:i}=e;return(e,l)=>{var a;return(0,n.tZ)(r.Z,{align:null!=o&&o.has(e.key)?"right":"left",title:e.name,direction:(null==t?void 0:t.column)===e.key?null==t?void 0:t.direction:void 0,canSort:(null==i?void 0:i.has(e.key))||!1,generateSortLink:null!==(a=null==s?void 0:s(e.key))&&void 0!==a?a:()=>{}})}}},"./app/utils/profiling/units/units.ts":(e,t,s)=>{s.d(t,{ab:()=>l,s4:()=>o}),s("../node_modules/core-js/modules/es.error.cause.js");const r={nanoseconds:1e-9,microseconds:1e-6,milliseconds:.001,seconds:1},n=(e,t,s)=>e.toFixed(s)+t;function o(e){const t=r[e];if(void 0===t)throw new Error(`Cannot format from unit ${e}, duration mapping is not defined`);return e=>{const s=e*t;return s>=1?n(s,"s",2):s/.001>=1?n(s/.001,"ms",2):s/1e-6>=1?n(s/1e-6,"μs",2):n(s/1e-9,"ns",2)}}function i(e,t){return Math.floor(e).toString().padStart(t,"0")}function l(e){const t=r[e];if(void 0===t)throw new Error(`Cannot format from unit ${e}, duration mapping is not defined`);return e=>{const s=e*t,r=1e3*s;return`${i(s/60,2)}:${i(s%60,2)}.${i(r%1e3,3)}`}}},"./app/utils/useEffectAfterFirstRender.ts":(e,t,s)=>{s.d(t,{K:()=>n});var r=s("../node_modules/react/index.js");const n=(e,t)=>{const s=(0,r.useRef)(!0);(0,r.useEffect)((()=>{s.current?s.current=!1:e()}),t)}},"./app/views/profiling/profileDetails.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>R});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),o=s("../node_modules/react-router/es/index.js"),i=s("../node_modules/fuse.js/dist/fuse.esm.js"),l=s("../node_modules/query-string/index.js"),a=s("./app/components/gridEditable/index.tsx"),d=s("./app/components/layouts/thirds.tsx"),u=s("./app/components/pagination.tsx"),c=s("./app/components/searchBar.tsx"),p=s("./app/components/sentryDocumentTitle.tsx"),m=s("./app/locale.tsx"),g=s("./app/styles/space.tsx"),h=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),f=s("./app/utils/discover/styles.tsx"),y=s("./app/utils/profiling/routes.tsx"),w=s("./app/utils/profiling/tableRenderer.tsx"),x=s("./app/utils/profiling/units/units.ts"),b=s("./app/utils/queryString.tsx"),k=s("./app/utils/useEffectAfterFirstRender.ts"),Z=s("./app/utils/useLocation.tsx"),v=s("./app/utils/useOrganization.tsx"),j=s("./app/utils/useParams.tsx"),_=s("./app/views/profiling/profileGroupProvider.tsx"),S=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function C(e){const t=[];return e.forEach((e=>{e.selfWeight>0&&t.push(e)}),(()=>{})),t.sort(((e,t)=>t.selfWeight-e.selfWeight)).slice(0,500).map((t=>({symbol:t.frame.name,image:t.frame.image,thread:e.threadId,type:t.frame.is_application?"application":"system","self weight":t.selfWeight,"total weight":t.totalWeight})))}const $=50;function q(){const e=(0,Z.T)(),[t]=(0,_.useProfileGroup)(),s=(0,v.Z)();(0,n.useEffect)((()=>{(0,h.Z)("profiling_views.profile_summary",{organization:s})}),[s]);const r=(0,n.useMemo)((()=>{const t=(0,b.ro)(e.query.cursor,"");return parseInt(t,10)||0}),[e.query.cursor]),g=(0,n.useMemo)((()=>(0,b.ro)(e.query.query,"")),[e]),f=(0,n.useMemo)((()=>"resolved"===t.type?t.data.profiles.flatMap(C).sort(((e,t)=>t["self weight"]-e["self weight"])):[]),[t]),y=(0,n.useMemo)((()=>new i.default(f,{keys:["symbol"],threshold:.3})),[f]),x=(0,n.useCallback)((e=>e?y.search(e).map((e=>e.item)).sort(((e,t)=>t["self weight"]-e["self weight"])):f),[y,f]),[j,q]=(0,n.useState)((()=>x(g)));(0,k.K)((()=>{q(x(g))}),[f,g,x]);const z=(0,n.useMemo)((()=>{const t=r>=$?"true":"false",s=r>=$?r-$:0,n={...e.query,cursor:s},o=`<${e.pathname}${l.stringify(n)}>; rel="previous"; results="${t}"; cursor="${s}"`,i=r+$<j.length?"true":"false",a=r+$<j.length?r+$:0,d={...e.query,cursor:a};return`${o},<${e.pathname}${l.stringify(d)}>; rel="next"; results="${i}"; cursor="${a}"`}),[r,e,j]),T=(0,n.useCallback)((t=>{o.browserHistory.replace({...e,query:{...e.query,query:t,cursor:void 0}}),q(x(t))}),[e,x]);return(0,S.tZ)(n.Fragment,{children:(0,S.tZ)(p.Z,{title:(0,m.t)("Profiling — Details"),orgSlug:s.slug,children:(0,S.tZ)(d.uT,{children:(0,S.BX)(d.or,{fullWidth:!0,children:[(0,S.tZ)(W,{children:(0,S.tZ)(c.Z,{defaultQuery:"",query:g,placeholder:(0,m.t)("Search for frames"),onChange:T})}),(0,S.tZ)(a.ZP,{title:(0,m.t)("Slowest Functions"),isLoading:"loading"===t.type,error:"errored"===t.type,data:j.slice(r,r+$),columnOrder:I.map((e=>M[e])),columnSortBy:[],grid:{renderHeadCell:(0,w.w)({rightAlignedColumns:E}),renderBodyCell:L},location:e}),(0,S.tZ)(u.Z,{pageLinks:z})]})})})})}q.displayName="ProfileDetails";const E=new Set(["self weight","total weight"]),W=(0,r.Z)("div",{target:"ecwa59y0"})("display:grid;gap:",(0,g.Z)(2),";grid-template-columns:auto;margin-bottom:",(0,g.Z)(2),";");function L(e,t,s,r){return(0,S.tZ)(T,{column:e,dataRow:t,rowIndex:s,columnIndex:r})}L.displayName="renderFunctionCell";const z=(0,x.s4)("nanoseconds");function T(e){let{column:t,dataRow:s}=e;const r=s[t.key],{orgId:n,projectId:i,eventId:l}=(0,j.U)();switch(t.key){case"self weight":case"total weight":return(0,S.tZ)(f.Hw,{children:z(r)});case"image":return(0,S.tZ)(f.W2,{children:null!=r?r:"Unknown"});case"thread":return(0,S.tZ)(f.W2,{children:(0,S.tZ)(o.Link,{to:(0,y.TH)({orgSlug:n,projectSlug:i,profileId:l,query:{tid:s.thread}}),children:r})});default:return(0,S.tZ)(f.W2,{children:r})}}const I=["symbol","image","thread","type","self weight","total weight"],M={symbol:{key:"symbol",name:(0,m.t)("Symbol"),width:a.z7},image:{key:"image",name:(0,m.t)("Binary"),width:a.z7},thread:{key:"thread",name:(0,m.t)("Thread"),width:a.z7},type:{key:"type",name:(0,m.t)("Type"),width:a.z7},"self weight":{key:"self weight",name:(0,m.t)("Self Weight"),width:a.z7},"total weight":{key:"total weight",name:(0,m.t)("Total Weight"),width:a.z7}},R=q}}]);
//# sourceMappingURL=../sourcemaps/app_views_profiling_profileDetails_tsx.d6544c068728c9e4856157658e807ef8.js.map