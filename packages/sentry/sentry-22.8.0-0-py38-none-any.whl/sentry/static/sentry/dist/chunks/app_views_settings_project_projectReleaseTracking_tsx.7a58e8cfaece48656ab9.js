"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_projectReleaseTracking_tsx"],{"./app/components/pluginList.tsx":(e,t,s)=>{s.d(t,{Z:()=>w});var n=s("./app/actionCreators/plugins.tsx"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/components/panels/index.tsx"),r=s("./app/components/textOverflow.tsx"),a=s("./app/locale.tsx"),l=s("./app/plugins/components/pluginIcon.tsx"),p=s("./app/styles/space.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=e=>{let{plugins:t,onEnablePlugin:s}=e;return 0===t.length?null:(0,c.BX)(o.s_,{children:[(0,c.tZ)(o.V9,{children:(0,a.t)("Inactive Integrations")}),(0,c.tZ)(o.N,{children:(0,c.tZ)(u,{children:t.map((e=>(0,c.tZ)(h,{onClick:()=>s(e),className:`ref-plugin-enable-${e.id}`,children:(0,c.BX)(g,{children:[(0,c.tZ)(m,{pluginId:e.id}),(0,c.tZ)(r.Z,{children:e.shortName||e.name})]})},e.id)))})})]})};d.displayName="InactivePlugins";const u=(0,i.Z)("div",{target:"e4awzvo3"})("display:flex;padding:",(0,p.Z)(1),";flex:1;flex-wrap:wrap;"),h=(0,i.Z)("button",{target:"e4awzvo2"})("margin:",(0,p.Z)(1),";width:175px;text-align:center;font-size:",(e=>e.theme.fontSizeSmall),";color:#889ab0;letter-spacing:0.1px;font-weight:600;text-transform:uppercase;border:1px solid #eee;background:inherit;border-radius:",(e=>e.theme.borderRadius),";padding:10px;&:hover{border-color:#ccc;}"),g=(0,i.Z)("div",{target:"e4awzvo1"})({name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"}),m=(0,i.Z)(l.ZP,{target:"e4awzvo0"})("margin-right:",(0,p.Z)(1),";"),Z=d;var b=s("./app/components/pluginConfig.tsx");const x=e=>{let{organization:t,project:s,pluginList:i,onDisablePlugin:r=(()=>{}),onEnablePlugin:l=(()=>{})}=e;const p=e=>{(0,n.rR)({projectId:s.slug,orgId:t.slug,pluginId:e.slug}),r(e)};return i.length?(0,c.BX)("div",{children:[i.filter((e=>e.enabled)).map((e=>(0,c.tZ)(b.Z,{data:e,organization:t,project:s,onDisablePlugin:p},e.id))),(0,c.tZ)(Z,{plugins:i.filter((e=>!e.enabled&&!e.isHidden)),onEnablePlugin:e=>{(0,n.Cg)({projectId:s.slug,orgId:t.slug,pluginId:e.slug}),l(e)}})]}):(0,c.tZ)(o.s_,{children:(0,c.tZ)(o.Lv,{children:(0,a.t)("Oops! Looks like there aren't any available integrations installed.")})})};x.displayName="PluginList";const w=x},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});const n=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;const i=`${e} - ${t}`,o=n?`${i} - ${n}`:i;return s?`${o} - Sentry`:o}},"./app/utils/withPlugins.tsx":(e,t,s)=>{s.d(t,{Z:()=>b});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),o=s("./app/actionCreators/plugins.tsx"),r=s("../node_modules/reflux/src/index.js"),a=s("./app/actions/pluginActions.tsx"),l=s("./app/utils/makeSafeRefluxStore.ts");const p={loading:!0,plugins:[],error:null,pageLinks:null},c={plugins:null,state:{...p},updating:new Map,unsubscribeListeners:[],reset(){return this.plugins=null,this.state={...p},this.updating=new Map,this.state},getInitialState(){return this.getState()},getState(){const{plugins:e,...t}=this.state;return{...t,plugins:this.plugins?Array.from(this.plugins.values()):[]}},init(){this.reset(),this.unsubscribeListeners.push(this.listenTo(a.Z.fetchAll,this.onFetchAll)),this.unsubscribeListeners.push(this.listenTo(a.Z.fetchAllSuccess,this.onFetchAllSuccess)),this.unsubscribeListeners.push(this.listenTo(a.Z.fetchAllError,this.onFetchAllError)),this.unsubscribeListeners.push(this.listenTo(a.Z.update,this.onUpdate)),this.unsubscribeListeners.push(this.listenTo(a.Z.updateSuccess,this.onUpdateSuccess)),this.unsubscribeListeners.push(this.listenTo(a.Z.updateError,this.onUpdateError))},triggerState(){this.trigger(this.getState())},onFetchAll(){let{resetLoading:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&(this.state.loading=!0,this.state.error=null,this.plugins=null),this.triggerState()},onFetchAllSuccess(e,t){let{pageLinks:s}=t;this.plugins=new Map(e.map((e=>[e.id,e]))),this.state.pageLinks=s||null,this.state.loading=!1,this.triggerState()},onFetchAllError(e){this.plugins=null,this.state.loading=!1,this.state.error=e,this.triggerState()},onUpdate(e,t){if(!this.plugins)return;const s=this.plugins.get(e);if(!s)return;const n={...s,...t};this.plugins.set(e,n),this.updating.set(e,s),this.triggerState()},onUpdateSuccess(e,t){this.updating.delete(e)},onUpdateError(e,t,s){const n=this.updating.get(e);n&&this.plugins&&(this.plugins.set(e,n),this.updating.delete(e),this.state.error=s,this.triggerState())}},d=(0,r.createStore)((0,l.Y)(c));var u=s("./app/utils.tsx"),h=s("./app/utils/getDisplayName.tsx"),g=s("./app/utils/withOrganization.tsx"),m=s("./app/utils/withProject.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const b=function(e){class t extends i.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{plugins:[],loading:!0}),(0,n.Z)(this,"unsubscribe",d.listen((e=>{let{plugins:t,loading:s}=e;this.setState({plugins:t,loading:s})}),void 0))}componentDidMount(){this.fetchPlugins()}componentDidUpdate(e,t,s){const{organization:n,project:i}=this.props,o=e.organization||(null==s?void 0:s.organization),r=e.project||(null==s?void 0:s.project);if(!(0,u.ri)(r)||!(0,u.ri)(o))return;const a=o.slug===n.slug,l=r.slug===(null==i?void 0:i.slug);a&&l||this.fetchPlugins()}componentWillUnmount(){this.unsubscribe()}fetchPlugins(){const{organization:e,project:t}=this.props;t&&e&&(0,o.MM)({projectId:t.slug,orgId:e.slug})}render(){return(0,Z.tZ)(e,{...this.props,plugins:this.state})}}return t.displayName="WithPlugins",(0,n.Z)(t,"displayName",`withPlugins(${(0,h.Z)(e)})`),(0,g.Z)((0,m.Z)(t))}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var n=s("./app/components/asyncComponent.tsx"),i=s("./app/components/sentryDocumentTitle.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends n.Z{getTitle(){return""}render(){return(0,o.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/project/projectReleaseTracking.tsx":(e,t,s)=>{s.r(t),s.d(t,{ProjectReleaseTracking:()=>j,default:()=>v});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("./app/actionCreators/indicator.tsx")),o=s("./app/components/alert.tsx"),r=s("./app/components/autoSelectText.tsx"),a=s("./app/components/button.tsx"),l=s("./app/components/confirm.tsx"),p=s("./app/components/forms/field/index.tsx"),c=s("./app/components/forms/textCopyInput.tsx"),d=s("./app/components/links/externalLink.tsx"),u=s("./app/components/loadingIndicator.tsx"),h=s("./app/components/panels/index.tsx"),g=s("./app/components/pluginList.tsx"),m=s("./app/locale.tsx"),Z=s("./app/utils/getDynamicText.tsx"),b=s("./app/utils/routeTitle.tsx"),x=s("./app/utils/withPlugins.tsx"),w=s("./app/views/asyncView.tsx"),y=s("./app/views/settings/components/settingsPageHeader.tsx"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const k={token:"YOUR_TOKEN",webhookUrl:"YOUR_WEBHOOK_URL"};class j extends w.Z{constructor(){super(...arguments),(0,n.Z)(this,"handleRegenerateToken",(()=>{const{orgId:e,projectId:t}=this.props.params;this.api.request(`/projects/${e}/${t}/releases/token/`,{method:"POST",data:{project:t},success:e=>{this.setState({data:{token:e.token,webhookUrl:e.webhookUrl}}),(0,i.S9)((0,m.t)("Your deploy token has been regenerated. You will need to update any existing deploy hooks."))},error:()=>{(0,i.Iw)((0,m.t)("Unable to regenerate deploy token, please try again"))}})}))}getTitle(){const{projectId:e}=this.props.params;return(0,b.Z)((0,m.t)("Releases"),e,!1)}getEndpoints(){const{orgId:e,projectId:t}=this.props.params;return[["data",`/projects/${e}/${t}/releases/token/`,{},{allowError:e=>e&&403===e.status}]]}getReleaseWebhookIntructions(){const{webhookUrl:e}=this.state.data||k;return"curl "+e+" \\\n  -X POST \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"version\": \"abcdefg\"}'"}renderBody(){const{organization:e,project:t,plugins:s}=this.props,n=e.access.includes("project:write");if(s.loading)return(0,f.tZ)(u.Z,{});const i=s.plugins.filter((e=>"release-tracking"===e.type&&e.hasConfiguration));let{token:b,webhookUrl:x}=this.state.data||k;return b=(0,Z.Z)({value:b,fixed:"__TOKEN__"}),x=(0,Z.Z)({value:x,fixed:"__WEBHOOK_URL__"}),(0,f.BX)("div",{children:[(0,f.tZ)(y.Z,{title:(0,m.t)("Release Tracking")}),!n&&(0,f.tZ)(o.Z,{type:"warning",children:(0,m.t)("You do not have sufficient permissions to access Release tokens, placeholders are displayed below.")}),(0,f.tZ)("p",{children:(0,m.t)("Configure release tracking for this project to automatically record new releases of your application.")}),(0,f.BX)(h.s_,{children:[(0,f.tZ)(h.V9,{children:(0,m.t)("Client Configuration")}),(0,f.BX)(h.N,{withPadding:!0,children:[(0,f.tZ)("p",{children:(0,m._N)("Start by binding the [release] attribute in your application, take a look at [link] to see how to configure this for the SDK you are using.",{link:(0,f.tZ)(d.Z,{href:"https://docs.sentry.io/platform-redirect/?next=/configuration/releases/",children:"our docs"}),release:(0,f.tZ)("code",{children:"release"})})}),(0,f.tZ)("p",{children:(0,m.t)("This will annotate each event with the version of your application, as well as automatically create a release entity in the system the first time it's seen.")}),(0,f.tZ)("p",{children:(0,m.t)("In addition you may configure a release hook (or use our API) to push a release and include additional metadata with it.")})]})]}),(0,f.BX)(h.s_,{children:[(0,f.tZ)(h.V9,{children:(0,m.t)("Deploy Token")}),(0,f.BX)(h.N,{children:[(0,f.tZ)(p.Z,{label:(0,m.t)("Token"),help:(0,m.t)("A unique secret which is used to generate deploy hook URLs"),children:(0,f.tZ)(c.ZP,{children:b})}),(0,f.tZ)(p.Z,{label:(0,m.t)("Regenerate Token"),help:(0,m.t)("If a service becomes compromised, you should regenerate the token and re-configure any deploy hooks with the newly generated URL."),children:(0,f.tZ)("div",{children:(0,f.tZ)(l.Z,{disabled:!n,priority:"danger",onConfirm:this.handleRegenerateToken,message:(0,m.t)("Are you sure you want to regenerate your token? Your current token will no longer be usable."),children:(0,f.tZ)(a.ZP,{type:"button",priority:"danger",disabled:!n,children:(0,m.t)("Regenerate Token")})})})})]})]}),(0,f.BX)(h.s_,{children:[(0,f.tZ)(h.V9,{children:(0,m.t)("Webhook")}),(0,f.BX)(h.N,{withPadding:!0,children:[(0,f.tZ)("p",{children:(0,m.t)("If you simply want to integrate with an existing system, sometimes its easiest just to use a webhook.")}),(0,f.tZ)(r.Z,{children:(0,f.tZ)("pre",{children:x})}),(0,f.tZ)("p",{children:(0,m.t)('The release webhook accepts the same parameters as the "Create a new Release" API endpoint.')}),(0,Z.Z)({value:(0,f.tZ)(r.Z,{children:(0,f.tZ)("pre",{children:this.getReleaseWebhookIntructions()})}),fixed:(0,f.tZ)("pre",{children:"curl __WEBHOOK_URL__ \\\n  -X POST \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"version\": \"abcdefg\"}'"})})]})]}),(0,f.tZ)(g.Z,{organization:e,project:t,pluginList:i}),(0,f.BX)(h.s_,{children:[(0,f.tZ)(h.V9,{children:(0,m.t)("API")}),(0,f.BX)(h.N,{withPadding:!0,children:[(0,f.tZ)("p",{children:(0,m.t)("You can notify Sentry when you release new versions of your application via our HTTP API.")}),(0,f.tZ)("p",{children:(0,m._N)("See the [link:releases documentation] for more information.",{link:(0,f.tZ)(d.Z,{href:"https://docs.sentry.io/workflow/releases/"})})})]})]})]})}}const v=(0,x.Z)(j)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectReleaseTracking_tsx.ff8f0d5c9e9aab9eda8335b2b1c07d3a.js.map