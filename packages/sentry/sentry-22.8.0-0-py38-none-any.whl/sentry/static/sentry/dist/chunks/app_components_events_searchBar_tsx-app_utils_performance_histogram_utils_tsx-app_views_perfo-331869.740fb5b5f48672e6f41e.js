"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_events_searchBar_tsx-app_utils_performance_histogram_utils_tsx-app_views_perfo-331869"],{"./app/components/events/searchBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>Z}),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/core-js/modules/es.string.replace.js");var n=s("../node_modules/react/index.js"),r=s("../node_modules/lodash/assign.js"),o=s.n(r),a=s("../node_modules/lodash/flatten.js"),i=s.n(a),l=s("../node_modules/lodash/memoize.js"),c=s.n(l),d=s("../node_modules/lodash/omit.js"),u=s.n(d),p=s("./app/actionCreators/tags.tsx"),m=s("./app/components/smartSearchBar/index.tsx"),h=s("./app/constants/index.tsx"),g=s("./app/types/index.tsx"),f=s("./app/utils.tsx"),v=s("./app/utils/discover/fields.tsx"),y=s("./app/utils/fields/index.ts"),j=s("./app/utils/measurements/measurements.tsx"),x=s("./app/utils/useApi.tsx"),b=s("./app/utils/withTags.tsx"),T=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const S=new RegExp(`^${h.c$}|\\${h.ir}`,"g");function w(e){const{maxSearchItems:t,organization:s,tags:r,omitTags:a,fields:l,projectIds:d,includeSessionTagsValues:h,maxMenuHeight:b}=e,w=(0,x.Z)();(0,n.useEffect)((()=>{var e,t;null===(e=(t=Z.cache).clear)||void 0===e||e.call(t)}),[d]);const Z=c()(((e,t,n)=>{const r=null==d?void 0:d.map(String);return(0,v.h1)(e.key)||(0,v.Xr)(e.key)?Promise.resolve([]):(0,p.Fo)(w,s.slug,e.key,t,r,n,!0,h).then((e=>i()(e.filter((e=>{let{name:t}=e;return(0,f.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:s}=e;return`${s}-${t}`})),_=e=>{const t=(e=>Object.fromEntries(e.filter((e=>!Object.keys(v.wZ).includes(e.field)&&!(0,v.GO)(e.field))).map((e=>[e.field,{key:e.field,name:e.field,kind:y.IV.FUNCTION}]))))(null!=l?l:[]),n=Object.fromEntries(Object.keys(v.wZ).map((e=>[e,{...v.wZ[e],kind:y.IV.FIELD}]))),i=(e=>Object.fromEntries(Object.keys(e).map((t=>[t,{...e[t],kind:y.IV.MEASUREMENT}]))))(e),c=Object.fromEntries(v.$4.map((e=>[e,{key:e,name:e,kind:y.IV.METRICS}]))),d=Object.fromEntries(Object.keys(v.jg).map((e=>[e,{...v.jg[e],kind:y.IV.FIELD}]))),p=s.features.includes("performance-view")?Object.assign({},i,c,n,t):u()(n,v.J8),m=Object.fromEntries(Object.keys(r).map((e=>[e,{...r[e],kind:y.IV.TAG}])));o()(p,m,n,d);const h=Object.keys(p);return h.sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),p.has={key:y.Sh.HAS,name:"Has property",values:h,predefined:!0,kind:y.IV.FIELD},u()(p,null!=a?a:[])};return(0,T.tZ)(j.Z,{children:s=>{let{measurements:n}=s;return(0,T.tZ)(m.Z,{hasRecentSearches:!0,savedSearchType:g.L4.EVENT,onGetTagValues:Z,supportedTags:_(n),prepareQuery:e=>e.replace(S,""),maxSearchItems:t,excludeEnvironment:!0,maxMenuHeight:null!=b?b:300,...e})}})}w.displayName="SearchBar";const Z=(0,b.Z)(w)},"./app/utils/measurements/measurements.tsx":(e,t,s)=>{s.d(t,{Z:()=>u,i:()=>c}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("../node_modules/react/index.js"),r=s("./app/utils/performance/vitals/constants.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){return Object.fromEntries(Object.entries(e).map((e=>{let[t,s]=e;return[t,{name:s.name,key:t}]})))}const i=a(r.TT),l=a(r.r9);function c(){return{...l,...i}}function d(e){let{children:t}=e;const s=c();return(0,o.tZ)(n.Fragment,{children:t({measurements:s})})}d.displayName="Measurements";const u=d},"./app/utils/performance/histogram/utils.tsx":(e,t,s)=>{s.d(t,{GT:()=>a,_W:()=>o,te:()=>r}),s("../node_modules/core-js/modules/es.error.cause.js");var n=s("./app/utils/formatters.tsx");function r(e){return e.length>=2?e[1].bin-e[0].bin:0}function o(e){const t=r(e);return e.map((e=>{const s=e.bin;return{start:s,end:s+t}}))}function a(e){let{precision:t,type:s,additionalFieldsFn:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=e=>{switch(s){case"duration":const r=null!=t?t:e<1e3?0:3;return(0,n.g9)(e/1e3,r,!0);case"number":const o=10**(null!=t?t:0);return(Math.round((e+Number.EPSILON)*o)/o).toLocaleString();default:throw new Error(`Unable to format type: ${s}`)}};return e.map((e=>{var t;return{value:e.count,name:o(e.bin),...null!==(t=null==r?void 0:r(e.bin))&&void 0!==t?t:{}}}))}},"./app/utils/performance/urls.ts":(e,t,s)=>{s.d(t,{D:()=>o});var n=s("./app/components/events/interfaces/spans/utils.tsx"),r=s("./app/utils.tsx");function o(e,t,s,o,a){const i={...o||{},transaction:s};(0,r.ri)(i.transaction)||delete i.transaction;const l={pathname:`/organizations/${e}/performance/${t}/`,query:i,hash:(0,r.ri)(a)?(0,n.ct)(a):void 0};return(0,r.ri)(l.hash)||delete l.hash,l}},"./app/utils/withTags.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),o=s("./app/stores/tagStore.tsx"),a=s("./app/utils/getDisplayName.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends r.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{tags:o.Z.getStateTags()}),(0,n.Z)(this,"unsubscribe",o.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...s}=this.props;return(0,i.tZ)(e,{tags:null!=t?t:this.state.tags,...s})}}return t.displayName="WithTags",(0,n.Z)(t,"displayName",`withTags(${(0,a.Z)(e)})`),t}},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(e,t,s)=>{s.d(t,{Zq:()=>p,_S:()=>l,q3:()=>i,qg:()=>u,tb:()=>d,xr:()=>c}),s("../node_modules/core-js/modules/es.array.includes.js");var n=s("./app/locale.tsx"),r=s("./app/utils/queryString.tsx"),o=s("./app/views/performance/transactionSummary/filter.tsx"),a=s("./app/views/performance/transactionSummary/utils.tsx");let i;function l(e,t){const{p99:s,p95:r,p75:a,p50:l}=t||{p99:0,p95:0,p75:0,p50:0};return{[i.p50]:{name:i.p50,query:l?[["transaction.duration",`<=${l.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(e)||"transaction.duration"},label:(0,n.t)("p50")},[i.p75]:{name:i.p75,query:a?[["transaction.duration",`<=${a.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(e)||"transaction.duration"},label:(0,n.t)("p75")},[i.p95]:{name:i.p95,query:r?[["transaction.duration",`<=${r.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(e)||"transaction.duration"},label:(0,n.t)("p95")},[i.p99]:{name:i.p99,query:s?[["transaction.duration",`<=${s.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,o.T$)(e)||"transaction.duration"},label:(0,n.t)("p99")},[i.p100]:{name:i.p100,label:(0,n.t)("p100")}}}function c(e){let{orgSlug:t,transaction:s,projectID:n,query:r}=e;return{pathname:`/organizations/${t}/performance/summary/events/`,query:{transaction:s,project:n,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:r.query}}}function d(e){return t=(0,r.ro)(e.query.showTransactions,i.p100),Object.values(i).includes(t)?t:i.p100;var t}function u(e,t){var s,n;const r=l(t),o=null===(s=r[e].sort)||void 0===s?void 0:s.kind,a=null===(n=r[e].sort)||void 0===n?void 0:n.field,i={showTransactions:e};return o&&a&&(i.sort=`${"desc"===o?"-":""}${a}`),i}function p(e){switch(e){case a.K0.OUTLIER:return i.p100;case a.K0.SLOW:return i.p95;default:return}}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(i||(i={}))},"./app/views/performance/transactionSummary/transactionThresholdModal.tsx":(e,t,s)=>{s.d(t,{ZP:()=>q,fY:()=>E});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("../node_modules/lodash/cloneDeep.js"),i=s.n(a),l=s("../node_modules/lodash/set.js"),c=s.n(l),d=s("./app/actionCreators/indicator.tsx"),u=s("./app/components/button.tsx"),p=s("./app/components/buttonBar.tsx"),m=s("./app/components/forms/field/index.tsx"),h=s("./app/components/forms/selectControl.tsx"),g=s("./app/components/input.tsx"),f=s("./app/components/links/link.tsx"),v=s("./app/locale.tsx"),y=s("./app/styles/space.tsx"),j=s("./app/utils.tsx"),x=s("./app/utils/withApi.tsx"),b=s("./app/utils/withProjects.tsx"),T=s("./app/views/performance/transactionSummary/utils.tsx"),S=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let w;!function(e){e.TRANSACTION_DURATION="duration",e.LARGEST_CONTENTFUL_PAINT="lcp"}(w||(w={}));const Z=[{label:(0,v.t)("Transaction Duration"),value:"duration"},{label:(0,v.t)("Largest Contentful Paint"),value:"lcp"}];class _ extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{threshold:this.props.transactionThreshold,metric:this.props.transactionThresholdMetric,error:null}),(0,n.Z)(this,"handleApply",(e=>{e.preventDefault();const{api:t,closeModal:s,organization:n,transactionName:r,onApply:o}=this.props,a=this.getProject();if(!(0,j.ri)(a))return;const i=`/organizations/${n.slug}/project-transaction-threshold-override/`;t.requestPromise(i,{method:"POST",includeAllArgs:!0,query:{project:a.id},data:{transaction:r,threshold:this.state.threshold,metric:this.state.metric}}).then((()=>{s(),o&&o(this.state.threshold,this.state.metric)})).catch((e=>{var t,s,n,r;this.setState({error:e});const o=null!==(t=null!==(s=null===(n=e.responseJSON)||void 0===n?void 0:n.threshold)&&void 0!==s?s:null===(r=e.responseJSON)||void 0===r?void 0:r.non_field_errors)&&void 0!==t?t:null;(0,d.Iw)(o)}))})),(0,n.Z)(this,"handleFieldChange",(e=>t=>{this.setState((s=>{const n=i()(s);return c()(n,e,t),{...n,errors:void 0}}))})),(0,n.Z)(this,"handleReset",(e=>{e.preventDefault();const{api:t,closeModal:s,organization:n,transactionName:r,onApply:o}=this.props,a=this.getProject();if(!(0,j.ri)(a))return;const i=`/organizations/${n.slug}/project-transaction-threshold-override/`;t.requestPromise(i,{method:"DELETE",includeAllArgs:!0,query:{project:a.id},data:{transaction:r}}).then((()=>{const e=`/projects/${n.slug}/${a.slug}/transaction-threshold/configure/`;this.props.api.requestPromise(e,{method:"GET",includeAllArgs:!0,query:{project:a.id}}).then((e=>{let[t]=e;this.setState({threshold:t.threshold,metric:t.metric}),s(),o&&o(this.state.threshold,this.state.metric)})).catch((e=>{var t,s;const n=null!==(t=null===(s=e.responseJSON)||void 0===s?void 0:s.threshold)&&void 0!==t?t:null;(0,d.Iw)(n)}))})).catch((e=>{this.setState({error:e})}))}))}getProject(){const{projects:e,eventView:t,project:s}=this.props;if((0,j.ri)(s))return e.find((e=>e.id===s));const n=String(t.project[0]);return e.find((e=>e.id===n))}renderModalFields(){return(0,S.BX)(o.Fragment,{children:[(0,S.tZ)(m.Z,{"data-test-id":"response-metric",label:(0,v.t)("Calculation Method"),inline:!1,help:(0,v.t)("This determines which duration metric is used for the Response Time Threshold."),showHelpInTooltip:!0,flexibleControlStateSize:!0,stacked:!0,required:!0,children:(0,S.tZ)(h.Z,{required:!0,options:Z.slice(),name:"responseMetric",label:(0,v.t)("Calculation Method"),value:this.state.metric,onChange:e=>{this.handleFieldChange("metric")(e.value)}})}),(0,S.tZ)(m.Z,{"data-test-id":"response-time-threshold",label:(0,v.t)("Response Time Threshold (ms)"),inline:!1,help:(0,v.t)("The satisfactory response time for the calculation method defined above. This is used to calculate Apdex and User Misery scores."),showHelpInTooltip:!0,flexibleControlStateSize:!0,stacked:!0,required:!0,children:(0,S.tZ)(g.Z,{type:"number",name:"threshold",required:!0,pattern:"[0-9]*(\\.[0-9]*)?",onChange:e=>{this.handleFieldChange("threshold")(e.target.value)},value:this.state.threshold,step:100,min:100})})]})}render(){const{Header:e,Body:t,Footer:s,organization:n,transactionName:r,eventView:a}=this.props,i=this.getProject(),l=a.clone();l.query=l.getQueryWithAdditionalConditions();const c=(0,T.e1)({orgSlug:n.slug,transaction:r,query:l.generateQueryStringObject(),projectID:null==i?void 0:i.id});return(0,S.BX)(o.Fragment,{children:[(0,S.tZ)(e,{closeButton:!0,children:(0,S.tZ)("h4",{children:(0,v.t)("Transaction Settings")})}),(0,S.BX)(t,{children:[(0,S.tZ)(k,{children:(0,v._N)("The changes below will only be applied to [transaction]. To set it at a more global level, go to [projectSettings: Project Settings].",{transaction:(0,S.tZ)(f.Z,{to:c,children:r}),projectSettings:(0,S.tZ)(f.Z,{to:`/settings/${n.slug}/projects/${null==i?void 0:i.slug}/performance/`})})}),this.renderModalFields()]}),(0,S.tZ)(s,{children:(0,S.BX)(p.ZP,{gap:1,children:[(0,S.tZ)(u.ZP,{priority:"default",onClick:this.handleReset,"data-test-id":"reset-all",children:(0,v.t)("Reset All")}),(0,S.tZ)(u.ZP,{"aria-label":(0,v.t)("Apply"),priority:"primary",onClick:this.handleApply,"data-test-id":"apply-threshold",children:(0,v.t)("Apply")})]})})]})}}_.displayName="TransactionThresholdModal";const k=(0,r.Z)("div",{target:"ezg6l150"})("margin-bottom:",(0,y.Z)(4),";"),E={name:"9w3zq5",styles:"width:100%;max-width:650px;margin:70px auto"},q=(0,x.Z)((0,b.Z)(_))},"./app/views/performance/transactionSummary/utils.tsx":(e,t,s)=>{s.d(t,{K0:()=>c,PU:()=>u,Z6:()=>m,e1:()=>p,uI:()=>g,vd:()=>h,xf:()=>d});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/styles/space.tsx"),o=s("./app/utils/discover/urls.tsx"),a=s("./app/utils/performance/urls.ts"),i=s("./app/utils/tokenizeSearch.tsx"),l=s("./app/views/performance/traceDetails/utils.tsx");let c;function d(e){const t=u(e);return t.removeFilter("transaction"),t}function u(e){const t=new i.MY(e);return t.removeFilter("event.type"),t}function p(e){let{orgSlug:t,transaction:s,projectID:n,query:r,unselectedSeries:o="p100()",display:a,trendFunction:i,trendColumn:l,showTransactions:c,additionalQuery:u}=e;const p=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/`}({orgSlug:t});let m;return m="string"==typeof r.query?d(r.query).formatString():r.query,{pathname:p,query:{transaction:s,project:n,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:m,unselectedSeries:o,showTransactions:c,display:a,trendFunction:i,trendColumn:l,...u}}}function m(e){return(t,s,n)=>{const r=`${s.trace}`;return r?(0,l.YA)(t,r,e,{}):{}}}function h(e){return(t,s,n,r)=>{const i=(0,o.JE)(s);return(0,a.D)(t.slug,i,e,n,r)}}!function(e){e.FASTEST="fastest",e.SLOW="slow",e.OUTLIER="outlier",e.RECENT="recent"}(c||(c={}));const g=(0,n.Z)("div",{target:"e1radvp0"})("margin-top:",(0,r.Z)(3),";")}}]);
//# sourceMappingURL=../sourcemaps/app_components_events_searchBar_tsx-app_utils_performance_histogram_utils_tsx-app_views_perfo-331869.d1f20f997b7c5e48235b47fd76ff5746.js.map