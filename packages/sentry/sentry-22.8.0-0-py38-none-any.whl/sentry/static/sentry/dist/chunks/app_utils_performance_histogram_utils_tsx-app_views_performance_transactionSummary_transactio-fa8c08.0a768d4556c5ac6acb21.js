"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_performance_histogram_utils_tsx-app_views_performance_transactionSummary_transactio-fa8c08"],{"./app/components/events/searchBar.tsx":(e,t,r)=>{r.d(t,{Z:()=>T}),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/core-js/modules/es.string.replace.js");var n=r("../node_modules/react/index.js"),s=r("../node_modules/lodash/assign.js"),a=r.n(s),o=r("../node_modules/lodash/flatten.js"),i=r.n(o),l=r("../node_modules/lodash/memoize.js"),p=r.n(l),c=r("../node_modules/lodash/omit.js"),u=r.n(c),d=r("./app/actionCreators/tags.tsx"),m=r("./app/components/smartSearchBar/index.tsx"),h=r("./app/constants/index.tsx"),g=r("./app/types/index.tsx"),f=r("./app/utils.tsx"),y=r("./app/utils/discover/fields.tsx"),v=r("./app/utils/fields/index.ts"),x=r("./app/utils/measurements/measurements.tsx"),j=r("./app/utils/useApi.tsx"),b=r("./app/utils/withTags.tsx"),w=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Z=new RegExp(`^${h.c$}|\\${h.ir}`,"g");function S(e){const{maxSearchItems:t,organization:r,tags:s,omitTags:o,fields:l,projectIds:c,includeSessionTagsValues:h,maxMenuHeight:b}=e,S=(0,j.Z)();(0,n.useEffect)((()=>{var e,t;null===(e=(t=T.cache).clear)||void 0===e||e.call(t)}),[c]);const T=p()(((e,t,n)=>{const s=null==c?void 0:c.map(String);return(0,y.h1)(e.key)||(0,y.Xr)(e.key)?Promise.resolve([]):(0,d.Fo)(S,r.slug,e.key,t,s,n,!0,h).then((e=>i()(e.filter((e=>{let{name:t}=e;return(0,f.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:r}=e;return`${r}-${t}`})),_=e=>{const t=(e=>Object.fromEntries(e.filter((e=>!Object.keys(y.wZ).includes(e.field)&&!(0,y.GO)(e.field))).map((e=>[e.field,{key:e.field,name:e.field,kind:v.IV.FUNCTION}]))))(null!=l?l:[]),n=Object.fromEntries(Object.keys(y.wZ).map((e=>[e,{...y.wZ[e],kind:v.IV.FIELD}]))),i=(e=>Object.fromEntries(Object.keys(e).map((t=>[t,{...e[t],kind:v.IV.MEASUREMENT}]))))(e),p=Object.fromEntries(y.$4.map((e=>[e,{key:e,name:e,kind:v.IV.METRICS}]))),c=Object.fromEntries(Object.keys(y.jg).map((e=>[e,{...y.jg[e],kind:v.IV.FIELD}]))),d=r.features.includes("performance-view")?Object.assign({},i,p,n,t):u()(n,y.J8),m=Object.fromEntries(Object.keys(s).map((e=>[e,{...s[e],kind:v.IV.TAG}])));a()(d,m,n,c);const h=Object.keys(d);return h.sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),d.has={key:v.Sh.HAS,name:"Has property",values:h,predefined:!0,kind:v.IV.FIELD},u()(d,null!=o?o:[])};return(0,w.tZ)(x.Z,{children:r=>{let{measurements:n}=r;return(0,w.tZ)(m.Z,{hasRecentSearches:!0,savedSearchType:g.L4.EVENT,onGetTagValues:T,supportedTags:_(n),prepareQuery:e=>e.replace(Z,""),maxSearchItems:t,excludeEnvironment:!0,maxMenuHeight:null!=b?b:300,...e})}})}S.displayName="SearchBar";const T=(0,b.Z)(S)},"./app/utils/measurements/measurements.tsx":(e,t,r)=>{r.d(t,{Z:()=>u,i:()=>p}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("../node_modules/react/index.js"),s=r("./app/utils/performance/vitals/constants.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){return Object.fromEntries(Object.entries(e).map((e=>{let[t,r]=e;return[t,{name:r.name,key:t}]})))}const i=o(s.TT),l=o(s.r9);function p(){return{...l,...i}}function c(e){let{children:t}=e;const r=p();return(0,a.tZ)(n.Fragment,{children:t({measurements:r})})}c.displayName="Measurements";const u=c},"./app/utils/performance/histogram/utils.tsx":(e,t,r)=>{r.d(t,{GT:()=>o,_W:()=>a,te:()=>s}),r("../node_modules/core-js/modules/es.error.cause.js");var n=r("./app/utils/formatters.tsx");function s(e){return e.length>=2?e[1].bin-e[0].bin:0}function a(e){const t=s(e);return e.map((e=>{const r=e.bin;return{start:r,end:r+t}}))}function o(e){let{precision:t,type:r,additionalFieldsFn:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e=>{switch(r){case"duration":const s=null!=t?t:e<1e3?0:3;return(0,n.g9)(e/1e3,s,!0);case"number":const a=10**(null!=t?t:0);return(Math.round((e+Number.EPSILON)*a)/a).toLocaleString();default:throw new Error(`Unable to format type: ${r}`)}};return e.map((e=>{var t;return{value:e.count,name:a(e.bin),...null!==(t=null==s?void 0:s(e.bin))&&void 0!==t?t:{}}}))}},"./app/utils/performance/urls.ts":(e,t,r)=>{r.d(t,{D:()=>a});var n=r("./app/components/events/interfaces/spans/utils.tsx"),s=r("./app/utils.tsx");function a(e,t,r,a,o){const i={...a||{},transaction:r};(0,s.ri)(i.transaction)||delete i.transaction;const l={pathname:`/organizations/${e}/performance/${t}/`,query:i,hash:(0,s.ri)(o)?(0,n.ct)(o):void 0};return(0,s.ri)(l.hash)||delete l.hash,l}},"./app/utils/withTags.tsx":(e,t,r)=>{r.d(t,{Z:()=>l});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),a=r("./app/stores/tagStore.tsx"),o=r("./app/utils/getDisplayName.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends s.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{tags:a.Z.getStateTags()}),(0,n.Z)(this,"unsubscribe",a.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...r}=this.props;return(0,i.tZ)(e,{tags:null!=t?t:this.state.tags,...r})}}return t.displayName="WithTags",(0,n.Z)(t,"displayName",`withTags(${(0,o.Z)(e)})`),t}},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(e,t,r)=>{r.d(t,{Zq:()=>d,_S:()=>l,q3:()=>i,qg:()=>u,tb:()=>c,xr:()=>p}),r("../node_modules/core-js/modules/es.array.includes.js");var n=r("./app/locale.tsx"),s=r("./app/utils/queryString.tsx"),a=r("./app/views/performance/transactionSummary/filter.tsx"),o=r("./app/views/performance/transactionSummary/utils.tsx");let i;function l(e,t){const{p99:r,p95:s,p75:o,p50:l}=t||{p99:0,p95:0,p75:0,p50:0};return{[i.p50]:{name:i.p50,query:l?[["transaction.duration",`<=${l.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p50")},[i.p75]:{name:i.p75,query:o?[["transaction.duration",`<=${o.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p75")},[i.p95]:{name:i.p95,query:s?[["transaction.duration",`<=${s.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p95")},[i.p99]:{name:i.p99,query:r?[["transaction.duration",`<=${r.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,n.t)("p99")},[i.p100]:{name:i.p100,label:(0,n.t)("p100")}}}function p(e){let{orgSlug:t,transaction:r,projectID:n,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/events/`,query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function c(e){return t=(0,s.ro)(e.query.showTransactions,i.p100),Object.values(i).includes(t)?t:i.p100;var t}function u(e,t){var r,n;const s=l(t),a=null===(r=s[e].sort)||void 0===r?void 0:r.kind,o=null===(n=s[e].sort)||void 0===n?void 0:n.field,i={showTransactions:e};return a&&o&&(i.sort=`${"desc"===a?"-":""}${o}`),i}function d(e){switch(e){case o.K0.OUTLIER:return i.p100;case o.K0.SLOW:return i.p95;default:return}}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(i||(i={}))},"./app/views/performance/transactionSummary/utils.tsx":(e,t,r)=>{r.d(t,{K0:()=>p,PU:()=>u,Z6:()=>m,e1:()=>d,uI:()=>g,vd:()=>h,xf:()=>c});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=r("./app/styles/space.tsx"),a=r("./app/utils/discover/urls.tsx"),o=r("./app/utils/performance/urls.ts"),i=r("./app/utils/tokenizeSearch.tsx"),l=r("./app/views/performance/traceDetails/utils.tsx");let p;function c(e){const t=u(e);return t.removeFilter("transaction"),t}function u(e){const t=new i.MY(e);return t.removeFilter("event.type"),t}function d(e){let{orgSlug:t,transaction:r,projectID:n,query:s,unselectedSeries:a="p100()",display:o,trendFunction:i,trendColumn:l,showTransactions:p,additionalQuery:u}=e;const d=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/`}({orgSlug:t});let m;return m="string"==typeof s.query?c(s.query).formatString():s.query,{pathname:d,query:{transaction:r,project:n,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:m,unselectedSeries:a,showTransactions:p,display:o,trendFunction:i,trendColumn:l,...u}}}function m(e){return(t,r,n)=>{const s=`${r.trace}`;return s?(0,l.YA)(t,s,e,{}):{}}}function h(e){return(t,r,n,s)=>{const i=(0,a.JE)(r);return(0,o.D)(t.slug,i,e,n,s)}}!function(e){e.FASTEST="fastest",e.SLOW="slow",e.OUTLIER="outlier",e.RECENT="recent"}(p||(p={}));const g=(0,n.Z)("div",{target:"e1radvp0"})("margin-top:",(0,s.Z)(3),";")},"./app/views/performance/trends/index.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>W});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("./app/components/noProjectMessage.tsx"),i=r("./app/components/sentryDocumentTitle.tsx"),l=r("./app/locale.tsx"),p=r("./app/styles/organization.tsx"),c=r("./app/utils/withApi.tsx"),u=r("./app/utils/withOrganization.tsx"),d=r("./app/utils/withPageFilters.tsx"),m=r("./app/utils/withProjects.tsx"),h=r("./app/views/performance/data.tsx"),g=r("../node_modules/react-router/es/index.js"),f=r("./app/components/alert.tsx"),y=r("./app/components/breadcrumbs.tsx"),v=r("./app/components/datePageFilter.tsx"),x=r("./app/components/environmentPageFilter.tsx"),j=r("./app/components/events/searchBar.tsx"),b=r("./app/components/forms/compactSelect.tsx"),w=r("./app/components/layouts/thirds.tsx"),Z=r("./app/components/organizations/pageFilterBar.tsx"),S=r("./app/components/organizations/pageFilters/container.tsx"),T=r("./app/components/projectPageFilter.tsx"),_=r("./app/constants/index.tsx"),E=r("./app/styles/space.tsx"),k=r("./app/utils/analytics.tsx"),q=r("./app/utils/discover/fields.tsx"),F=r("./app/utils/queryString.tsx"),P=r("./app/utils/tokenizeSearch.tsx"),C=r("./app/views/performance/utils.tsx"),I=r("./app/views/performance/trends/changedTransactions.tsx"),O=r("./app/views/performance/trends/types.tsx"),V=r("./app/views/performance/trends/utils.tsx"),$=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const z={start:null,end:null,utc:!1,period:V._1};class D extends a.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{}),(0,n.Z)(this,"handleSearch",(e=>{const{location:t}=this.props,r=(0,V.Ws)();g.browserHistory.push({pathname:t.pathname,query:{...t.query,...r,query:String(e).trim()||void 0}})})),(0,n.Z)(this,"setError",(e=>{this.setState({error:e})})),(0,n.Z)(this,"handleTrendFunctionChange",(e=>{const{organization:t,location:r}=this.props,n={};Object.values(O.ER).forEach((e=>{const t=(0,V.j_)(e);n[t]=void 0})),(0,k.ec)({eventKey:"performance_views.trends.change_function",eventName:"Performance Views: Change Function",organization_id:parseInt(t.id,10),function_name:e}),this.setState({previousTrendFunction:(0,V.CE)(r).field});const s=(0,V.Ws)();g.browserHistory.push({pathname:r.pathname,query:{...r.query,...n,...s,trendFunction:e}})})),(0,n.Z)(this,"handleParameterChange",(e=>{const{organization:t,location:r}=this.props,n=(0,V.Ws)();(0,k.ec)({eventKey:"performance_views.trends.change_parameter",eventName:"Performance Views: Change Parameter",organization_id:parseInt(t.id,10),parameter_name:e}),g.browserHistory.push({pathname:r.pathname,query:{...r.query,...n,trendParameter:e}})}))}renderError(){const{error:e}=this.state;return e?(0,$.tZ)(f.Z,{type:"error",showIcon:!0,children:e}):null}getPerformanceLink(){const{location:e}=this.props,t={...e.query},r=(0,F.ro)(e.query.query,""),n=new P.MY(r);return n.removeFilter("tpm()"),n.removeFilter("confidence()"),n.removeFilter("transaction.duration"),t.query=n.formatString(),{pathname:(0,C.de)(this.props.organization),query:t}}render(){const{organization:e,eventView:t,location:r,projects:n}=this.props,{previousTrendFunction:s}=this.state,a=t.clone();(0,V.iF)(a,r);const o=(0,q.db)(e,[{field:"absolute_correlation()"},{field:"trend_percentage()"},{field:"trend_difference()"},{field:"count_percentage()"},{field:"tpm()"},{field:"tps()"}],["epm()","eps()"]),i=(0,V.CE)(r),p=(0,V.IO)(r,n,t.project),c=(0,C.Ov)(r);return(0,$.BX)(S.Z,{defaultSelection:{datetime:z},children:[(0,$.tZ)(w.h4,{children:(0,$.BX)(w.oB,{children:[(0,$.tZ)(y.Z,{crumbs:[{label:"Performance",to:this.getPerformanceLink()},{label:"Trends"}]}),(0,$.tZ)(w.Dx,{children:(0,l.t)("Trends")})]})}),(0,$.tZ)(w.uT,{children:(0,$.tZ)(w.or,{fullWidth:!0,children:(0,$.BX)(N,{location:r,eventView:t,projects:n,children:[(0,$.BX)(L,{children:[(0,$.BX)(Z.Z,{condensed:!0,children:[(0,$.tZ)(T.Z,{}),(0,$.tZ)(x.Z,{}),(0,$.tZ)(v.Z,{alignDropdown:"left"})]}),(0,$.tZ)(R,{searchSource:"trends",organization:e,projectIds:a.project,query:c,fields:o,onSearch:this.handleSearch,maxQueryLength:_.dI}),(0,$.tZ)(b.Z,{triggerProps:{prefix:(0,l.t)("Percentile")},value:i.field,options:V.T1.map((e=>{let{label:t,field:r}=e;return{value:r,label:t}})),onChange:e=>this.handleTrendFunctionChange(e.value)}),(0,$.tZ)(b.Z,{triggerProps:{prefix:(0,l.t)("Parameter")},value:p.label,options:V.cs.map((e=>{let{label:t}=e;return{value:t,label:t}})),onChange:e=>this.handleParameterChange(e.value)})]}),(0,$.BX)(B,{children:[(0,$.tZ)(I.Z,{trendChangeType:O.ER.IMPROVED,previousTrendFunction:s,trendView:a,location:r,setError:this.setError}),(0,$.tZ)(I.Z,{trendChangeType:O.ER.REGRESSION,previousTrendFunction:s,trendView:a,location:r,setError:this.setError})]})]})})})]})}}D.displayName="TrendsContent";class N extends a.Component{constructor(){super(...arguments),(0,n.Z)(this,"hasPushedDefaults",!1)}render(){const{children:e,location:t,eventView:r,projects:n}=this.props,s=(0,F.ro)(t.query.query),o=(0,V.IO)(t,n,r.project),i=new P.MY(s||"");if(s||this.hasPushedDefaults)return this.hasPushedDefaults=!0,(0,$.tZ)(a.Fragment,{children:e});this.hasPushedDefaults=!0,i.setFilterValues("tpm()",[">0.01"]),i.setFilterValues(o.column,[">0",`<${V.bg}`]);const l=i.formatString();return r.query=l,g.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,query:String(l).trim()||void 0}}),null}}N.displayName="DefaultTrends";const L=(0,s.Z)("div",{target:"e1yf76wj2"})("display:grid;gap:",(0,E.Z)(2),";margin-bottom:",(0,E.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(3, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto 1fr auto auto;}"),R=(0,s.Z)(j.Z,{target:"e1yf76wj1"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/5;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),B=(0,s.Z)("div",{target:"e1yf76wj0"})("display:grid;gap:",(0,E.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(2, minmax(0, 1fr));}"),M=(0,d.Z)(D);class H extends a.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{eventView:(0,h.C)(this.props.location,this.props.projects,{isTrends:!0}),error:void 0}),(0,n.Z)(this,"setError",(e=>{this.setState({error:e})}))}static getDerivedStateFromProps(e,t){return{...t,eventView:(0,h.C)(e.location,e.projects,{isTrends:!0})}}getDocumentTitle(){return[(0,l.t)("Trends"),(0,l.t)("Performance")].join(" - ")}renderContent(){const{organization:e,location:t,projects:r}=this.props,{eventView:n}=this.state;return(0,$.tZ)(M,{organization:e,location:t,eventView:n,projects:r})}render(){const{organization:e}=this.props;return(0,$.tZ)(i.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,children:(0,$.tZ)(U,{children:(0,$.tZ)(o.Z,{organization:e,children:this.renderContent()})})})}}H.displayName="TrendsSummary";const W=(0,u.Z)((0,m.Z)((0,d.Z)((0,c.Z)(H)))),U=(0,s.Z)(p.JH,{target:"e183k9ay0"})({name:"1hcx8jb",styles:"padding:0"})}}]);
//# sourceMappingURL=../sourcemaps/app_utils_performance_histogram_utils_tsx-app_views_performance_transactionSummary_transactio-fa8c08.6c1f56998a9e111e6f6f72eee023f41a.js.map