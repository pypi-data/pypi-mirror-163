"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_actionCreators_members_tsx-app_components_acl_feature_tsx-app_components_dropdownMenuCont-268ea8"],{"./app/actionCreators/members.tsx":(e,t,s)=>{s.d(t,{M4:()=>a,MA:()=>l,R_:()=>u,hS:()=>d}),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("../node_modules/@sentry/hub/esm/exports.js"),o=s("./app/actions/memberActions.tsx"),r=s("./app/stores/memberListStore.tsx");function i(e){return{...e.user,role:e.role}}async function l(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=`/organizations/${t}/users/`,l=s?{project:s}:{};try{const a=await e.requestPromise(o,{method:"GET",query:l});a||n.$e((e=>{e.setExtras({orgId:t,projectIds:s}),n.Tb(new Error("Members is undefined"))}));const d=null==a?void 0:a.filter((e=>{let{user:t}=e;return t}));return d?(r.Z.loadInitialData(d.map(i)),a):[]}catch(e){n.rJ({resp:e}),n.Tb(e)}return[]}function a(e){return e.reduce(((e,t)=>{for(const s of t.projects)e.hasOwnProperty(s)||(e[s]=[]),e[s].push(t.user);return e}),{})}async function d(e,t){let{orgId:s,memberId:n,data:r}=t;o.Z.update(n,r);const i=`/organizations/${s}/members/${n}/`;try{const t=await e.requestPromise(i,{method:"PUT",data:r});return o.Z.updateSuccess(t),t}catch(e){throw o.Z.updateError(e),e}}async function u(e,t){let{orgId:s,memberId:n,regenerate:r,data:i}=t;o.Z.resendMemberInvite(s,i);const l=`/organizations/${s}/members/${n}/`;try{const t=await e.requestPromise(l,{method:"PUT",data:{regenerate:r,reinvite:!0}});return o.Z.resendMemberInviteSuccess(t),t}catch(e){throw o.Z.resendMemberInviteError(e),e}}},"./app/components/acl/feature.tsx":(e,t,s)=>{s.d(t,{Z:()=>f});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),r=s("./app/stores/hookStore.tsx"),i=s("./app/utils/isRenderFunc.tsx"),l=s("./app/utils/withConfig.tsx"),a=s("./app/utils/withOrganization.tsx"),d=s("./app/utils/withProject.tsx"),u=s("./app/components/alert.tsx"),c=s("./app/locale.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p=()=>(0,m.tZ)(u.Z,{type:"info",showIcon:!0,children:(0,c.t)("This feature is coming soon!")});p.displayName="ComingSoon";const h=p;class g extends o.Component{getAllFeatures(){const{organization:e,project:t,config:s}=this.props;return{configFeatures:s.features?Array.from(s.features):[],organization:e&&e.features||[],project:t&&t.features||[]}}hasFeature(e,t){const s=e.match(/^projects:(.+)/),n=e.match(/^organizations:(.+)/),{configFeatures:o,organization:r,project:i}=t;return!!o.includes(e)||(s?i.includes(s[1]):n?r.includes(n[1]):r.includes(e)||i.includes(e))}render(){const{children:e,features:t,renderDisabled:s,hookName:n,organization:o,project:l,requireAll:a}=this.props,d=this.getAllFeatures(),u=!t||t[a?"every":"some"]((e=>this.hasFeature(e,d)));let c=!1!==s&&("function"==typeof s?s:()=>(0,m.tZ)(h,{}));if(n){const e=r.Z.get(n);e.length>0&&(c=e[0])}const p={organization:o,project:l,features:t,hasFeature:u};return u||!1===c?(0,i.l)(e)?e({renderDisabled:s,...p}):u&&e?e:null:c({children:e,...p})}}g.displayName="Feature",(0,n.Z)(g,"defaultProps",{renderDisabled:!1,requireAll:!0});const f=(0,a.Z)((0,d.Z)((0,l.Z)(g)))},"./app/components/dropdownMenuControl.tsx":(e,t,s)=>{s.d(t,{Z:()=>N});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("../node_modules/@react-aria/button/dist/module.js"),i=s("../node_modules/@react-aria/menu/dist/module.js"),l=s("../node_modules/@react-aria/utils/dist/module.js"),a=s("../node_modules/@react-stately/collections/dist/module.js"),d=s("../node_modules/@react-stately/menu/dist/module.js"),u=s("./app/components/dropdownButton.tsx"),c=s("../node_modules/@react-aria/focus/dist/module.js"),m=s("../node_modules/@react-aria/interactions/dist/module.js"),p=s("../node_modules/@react-aria/overlays/dist/module.js"),h=s("../node_modules/@react-aria/separator/dist/module.js"),g=s("../node_modules/@react-stately/tree/dist/module.js"),f=s("./app/components/links/link.tsx"),b=s("./app/components/menuListItem.tsx"),y=s("./app/icons/index.tsx"),v=s("./app/utils/usePrevious.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const w=e=>{var t;let{node:s,isLastNode:n,state:r,onClose:a,closeOnSelect:d,isSubmenuTrigger:u=!1,submenuTriggerRef:c,renderAs:p="li",...h}=e;const g=(0,o.useRef)(null),w=r.disabledKeys.has(s.key),x=r.selectionManager.focusedKey===s.key,{key:P,onAction:S,to:j,label:z,showDividers:k,...M}=s.value,{size:_}=s.props,C=null!=c?c:g,[O,R]=(0,o.useState)(!1),{hoverProps:D}=(0,m.XI)({onHoverChange:R}),I=(0,v.Z)(O),T=(0,v.Z)(x);(0,o.useEffect)((()=>{if((O!==I||x!==T)&&O&&x){if(u)return void r.selectionManager.select(s.key);r.selectionManager.clearSelection()}}),[O,x,I,T,u,s.key,r.selectionManager]);const{keyboardProps:N}=(0,m.v5)({onKeyDown:e=>{if("Enter"===e.key&&j){var t,n;const s=new MouseEvent("click",{ctrlKey:e.ctrlKey,metaKey:e.metaKey});return null===(t=C.current)||void 0===t||null===(n=t.querySelector(`${b.i}`))||void 0===n||n.dispatchEvent(s),void a()}"ArrowRight"===e.key&&u?r.selectionManager.select(s.key):e.continuePropagation()}}),{menuItemProps:A,labelProps:E,descriptionProps:F}=(0,i.iX)({key:s.key,onAction:()=>{j||(u?r.selectionManager.select(s.key):null==S||S(P))},closeOnSelect:!j&&d,onClose:a,isDisabled:w},r,C),B=(0,l.dG)(h,A,D,N),K=null!==(t=s.rendered)&&void 0!==t?t:z,$=k&&!n,q={as:j?f.Z:"div",to:j};return(0,Z.tZ)(b.Z,{ref:C,as:p,"data-test-id":P,label:K,isDisabled:w,isFocused:x,showDivider:$,innerWrapProps:q,labelProps:E,detailsProps:F,size:_,...B,...M,...u&&{role:"menuitemradio",trailingItems:(0,Z.BX)(o.Fragment,{children:[M.trailingItems,(0,Z.tZ)(y.g6,{size:"xs",direction:"right","aria-hidden":"true"})]})}})};w.displayName="MenuItem";const x=w;var P=s("./app/styles/space.tsx");function S(e){let{node:t,children:s}=e;const{itemProps:n,headingProps:o,groupProps:r}=(0,i.x7)({heading:t.rendered,"aria-label":t["aria-label"]});return(0,Z.BX)(z,{...n,children:[t.rendered&&(0,Z.tZ)(k,{...o,children:t.rendered}),(0,Z.tZ)(M,{...r,children:s})]})}S.displayName="MenuSection";const j=S,z=(0,n.Z)("li",{target:"enwb5272"})({name:"ffhm6p",styles:"list-style-type:none"}),k=(0,n.Z)("span",{target:"enwb5271"})("display:inline-block;font-weight:600;font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.subText),";text-transform:uppercase;white-space:nowrap;margin:",(0,P.Z)(1)," ",(0,P.Z)(1.5)," ",(0,P.Z)(.5),";padding-right:",(0,P.Z)(1),";",z,":first-of-type &{margin-top:",(0,P.Z)(.5),";}"),M=(0,n.Z)("ul",{target:"enwb5270"})({name:"1kz5jpr",styles:"list-style-type:none;padding:0;margin:0"});function _(e){var t,s;let{offset:n=8,crossOffset:r=0,containerPadding:a=0,placement:d="bottom left",closeOnSelect:u=!0,triggerRef:f,triggerWidth:b,size:y,isSubmenu:v,menuTitle:w,closeRootMenu:P,closeCurrentSubmenu:S,isDismissable:z=!0,shouldCloseOnBlur:k=!0,...M}=e;const _=(0,g.D)({...M,selectionMode:"single"}),C=(0,o.useMemo)((()=>[..._.collection]),[_.collection]),T=(0,o.useRef)(null),{menuProps:A}=(0,i.H9)({...M,selectionMode:"single"},_,T),{separatorProps:E}=(0,h.z)({elementType:"li"}),{keyboardProps:F}=(0,m.v5)({onKeyDown:e=>{v&&"ArrowLeft"===e.key?null==S||S():e.continuePropagation()}}),B=(0,o.useRef)(null),{overlayProps:K}=(0,p.Ir)({onClose:P,shouldCloseOnBlur:k,isDismissable:z,isOpen:!0,shouldCloseOnInteractOutside:e=>{var t;return e&&f.current!==e&&!(null!==(t=f.current)&&void 0!==t&&t.contains(e))}},B),{overlayProps:$,placement:q}=(0,p.tN)({targetRef:f,overlayRef:B,offset:n,crossOffset:r,placement:d,containerPadding:a,isOpen:!0,boundaryElement:null!==(t=document.querySelector(".app"))&&void 0!==t?t:void 0}),[W,L]=(0,o.useState)(!0);(0,o.useEffect)((()=>{const e=!C.some((e=>e.hasChildNodes&&!e.value.isSubmenu?[...e.childNodes].some((e=>_.selectionManager.isSelected(`${e.key}`))):_.selectionManager.isSelected(`${e.key}`)));L(e)}),[C,_.selectionManager]);const X={...A,...!W&&{onKeyUp:()=>null,onKeyDown:()=>null}},U=e=>e.map(((t,s)=>{var n;const r=e.length-1===s,i=!r&&("section"===t.type||"section"===(null===(n=e[s+1])||void 0===n?void 0:n.type));let l;return l="section"===t.type?(0,Z.tZ)(j,{node:t,children:U([...t.childNodes])}):t.value.isSubmenu?((e,t)=>(0,Z.tZ)(N,{items:e.value.children,trigger:s=>{let{props:n,ref:o}=s;return(0,Z.tZ)(x,{renderAs:"div",node:e,isLastNode:t,state:_,isSubmenuTrigger:!0,submenuTriggerRef:o,...n})},menuTitle:e.value.submenuTitle,placement:"right top",offset:-4,crossOffset:-8,closeOnSelect:u,isOpen:_.selectionManager.isSelected(e.key),size:y,isSubmenu:!0,closeRootMenu:P,closeCurrentSubmenu:()=>_.selectionManager.clearSelection(),renderWrapAs:"li"}))(t,r):((e,t)=>(0,Z.tZ)(x,{node:e,isLastNode:t,state:_,onClose:P,closeOnSelect:u}))(t,r),(0,Z.BX)(o.Fragment,{children:[l,i&&(0,Z.tZ)(I,{...E})]},t.key)}));return(0,Z.tZ)(c.MT,{restoreFocus:!0,autoFocus:!0,children:(0,Z.tZ)(O,{ref:B,placementProp:q,...(0,l.dG)(K,$,F),children:(0,Z.BX)(R,{ref:T,...X,style:{maxHeight:null===(s=$.style)||void 0===s?void 0:s.maxHeight,minWidth:b},children:[w&&(0,Z.tZ)(D,{children:w}),U(C)]})})})}_.displayName="Menu";const C=_,O=(0,n.Z)("div",{target:"e1747fp53"})("max-width:24rem;border-radius:",(e=>e.theme.borderRadius),";background:",(e=>e.theme.backgroundElevated),";box-shadow:0 0 0 1px ",(e=>e.theme.translucentBorder),",",(e=>e.theme.dropShadowHeavy),";font-size:",(e=>e.theme.fontSizeMedium),";margin:",(0,P.Z)(1)," 0;",(e=>"top"===e.placementProp&&"margin-bottom: 0;")," ",(e=>"bottom"===e.placementProp&&"margin-top: 0;"),"z-index:",(e=>e.theme.zIndex.dropdown),"!important;"),R=(0,n.Z)("ul",{target:"e1747fp52"})("margin:0;padding:",(0,P.Z)(.5)," 0;font-size:",(e=>e.theme.fontSizeMedium),";overflow-x:hidden;overflow-y:auto;&:focus{outline:none;}"),D=(0,n.Z)("div",{target:"e1747fp51"})("font-weight:600;font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.headingColor),";white-space:nowrap;padding:",(0,P.Z)(.25)," ",(0,P.Z)(1.5)," ",(0,P.Z)(.75),";margin-bottom:",(0,P.Z)(.5),";border-bottom:solid 1px ",(e=>e.theme.innerBorder),";"),I=(0,n.Z)("li",{target:"e1747fp50"})("list-style-type:none;border-top:solid 1px ",(e=>e.theme.innerBorder),";margin:",(0,P.Z)(.5)," ",(0,P.Z)(1.5),";");function T(e){let{items:t,trigger:s,triggerLabel:n,triggerProps:c={},isDisabled:m,isSubmenu:p=!1,closeRootMenu:h,closeCurrentSubmenu:g,renderWrapAs:f="div",size:b="md",className:y,...v}=e;const w=(0,o.useRef)(null),x=null!=m?m:!t||0===t.length,P=(0,d.W)(v),{menuTriggerProps:S,menuProps:j}=(0,i.u4)({type:"menu",isDisabled:x},P,w),{buttonProps:z}=(0,r.U)({isDisabled:x,...S,...p&&{onKeyUp:e=>e.continuePropagation(),onKeyDown:e=>e.continuePropagation(),onPress:()=>null,onPressStart:()=>null,onPressEnd:()=>null}},w),[k,M]=(0,o.useState)(),_=(0,o.useCallback)((async()=>{var e;await new Promise((e=>window.setTimeout(e)));const t=null===(e=w.current)||void 0===e?void 0:e.offsetWidth;!p&&t&&M(t)}),[p]);return(0,l.yU)({ref:w,onResize:_}),(0,o.useEffect)((()=>{void 0===window.ResizeObserver&&_()}),[_]),(0,Z.BX)(A,{className:y,as:f,role:"presentation",children:[s?s({props:{size:b,isOpen:P.isOpen,...c,...z},ref:w}):(0,Z.tZ)(u.Z,{ref:w,size:b,isOpen:P.isOpen,...c,...z,children:n}),P.isOpen?(0,Z.tZ)(C,{...v,...j,triggerRef:w,triggerWidth:k,size:b,isSubmenu:p,isDismissable:!p&&v.isDismissable,shouldCloseOnBlur:!p&&v.shouldCloseOnBlur,closeRootMenu:null!=h?h:P.close,closeCurrentSubmenu:g,items:function e(t){return t.filter((e=>!e.hidden)).map((t=>({...t,...t.children?{children:e(t.children)}:{}})))}(t),children:e=>e.children&&e.children.length>0&&!e.isSubmenu?(0,Z.tZ)(a.$0,{title:e.label,items:e.children,children:e=>(0,Z.tZ)(a.ck,{size:b,...e,children:e.label})},e.key):(0,Z.tZ)(a.ck,{size:b,...e,children:e.label})}):null]})}T.displayName="MenuControl";const N=T,A=(0,n.Z)("div",{target:"e1xefvzy0"})({name:"ffhm6p",styles:"list-style-type:none"})},"./app/utils/usePrevious.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var n=s("../node_modules/react/index.js");const o=function(e){const t=(0,n.useRef)(e);return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_members_tsx-app_components_acl_feature_tsx-app_components_dropdownMenuCont-268ea8.d8194814264e00b0dc5baf836f3eb2f2.js.map