"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_dashboardsV2_detail_tsx-node_modules_downsample_methods_ASAP_js"],{"./app/components/globalSdkUpdateAlert.tsx":(e,t,a)=>{a.d(t,{_:()=>w}),a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/core-js/modules/es.array.includes.js");var s=a("../node_modules/react/index.js"),i=a("./app/actionCreators/prompts.tsx"),r=a("./app/components/alert.tsx"),n=a("./app/constants/pageFilters.tsx"),o=a("./app/locale.tsx"),d=a("./app/stores/sidebarPanelStore.tsx"),l=a("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),c=a("./app/utils/promptIsDismissed.tsx"),h=a("./app/utils/useApi.tsx"),u=a("./app/utils/useOrganization.tsx"),p=a("./app/utils/usePageFilters.tsx"),m=a("./app/utils/withSdkUpdates.tsx"),g=a("./app/components/sidebar/types.tsx"),b=a("./app/components/button.tsx"),f=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function v(e){var t,a;const m=(0,h.Z)(),v=(0,u.Z)(),{selection:w}=(0,p.Z)(),[y,Z]=(0,s.useState)(!1),x=(0,s.useCallback)((()=>{(0,i.Xt)(m,{organizationId:v.id,feature:"sdk_updates",status:"snoozed"}),(0,l.Z)("sdk_updates.snoozed",{organization:v}),Z(!1)}),[m,v]),D=(0,s.useCallback)((()=>{d.Z.activatePanel(g.z.Broadcasts),(0,l.Z)("sdk_updates.clicked",{organization:v})}),[v]);return(0,s.useEffect)((()=>{(0,l.Z)("sdk_updates.seen",{organization:v});let e=!1;return(0,i.vu)(m,{organizationId:v.id,feature:"sdk_updates"}).then((t=>{e||Z(!(0,c.IB)(t))})),()=>{e=!0}}),[m,v]),y&&null!==(t=e.sdkUpdates)&&void 0!==t&&t.length?(0===(null==w||null===(a=w.projects)||void 0===a?void 0:a.length)||(null==w?void 0:w.projects[0])===n.mP?e.sdkUpdates:e.sdkUpdates.filter((e=>{var t;return null==w||null===(t=w.projects)||void 0===t?void 0:t.includes(parseInt(e.projectId,10))}))).every((e=>0===e.suggestions.length))?null:(0,f.tZ)(r.Z,{type:"info",showIcon:!0,className:e.className,trailingItems:(0,f.BX)(s.Fragment,{children:[(0,f.tZ)(b.ZP,{priority:"link",size:"zero",title:(0,o.t)("Dismiss for the next two weeks"),onClick:x,children:(0,o.t)("Remind me later")}),(0,f.tZ)("span",{children:"|"}),(0,f.tZ)(b.ZP,{priority:"link",size:"zero",onClick:D,children:(0,o.t)("Review updates")})]}),children:(0,o.t)("You have outdated SDKs in your projects. Update them for important fixes and features.")}):null}v.displayName="InnerGlobalSdkUpdateAlert";const w=(0,m.Z)(v)},"./app/utils/releases/releasesProvider.tsx":(e,t,a)=>{a.d(t,{Bo:()=>h,lR:()=>l}),a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/core-js/modules/es.error.cause.js");var s=a("../node_modules/react/index.js"),i=a("./app/actionCreators/indicator.tsx"),r=a("./app/locale.tsx"),n=a("./app/utils/handleXhrErrorResponse.tsx"),o=a("./app/utils/useApi.tsx"),d=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{children:t,organization:a,selection:l,skipLoad:h=!1}=e;const u=(0,o.Z)(),[p,m]=(0,s.useState)([]),[g,b]=(0,s.useState)(""),[f,v]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{if(h)return void v(!1);let e=!1;return v(!0),function(e,t,a,s){const{environments:i,projects:r}=a;return e.requestPromise(`/organizations/${t}/releases/`,{method:"GET",data:{sort:"date",project:r,per_page:50,environment:i,query:s}})}(u,a.slug,l,g).then((t=>{e?v(!1):(v(!1),m(t))})).catch((t=>{var a;if(e)return void v(!1);const s=null!==(a=null==t?void 0:t.responseJSON)&&void 0!==a?a:(0,r.t)("Unable to fetch releases");(0,i.Iw)(s),v(!1),(0,n.Z)(s)(t)})),()=>{e=!0}}),[h,u,a.slug,JSON.stringify(l),g]),(0,d.tZ)(c.Provider,{value:{releases:p,loading:f,onSearch:function(e){b(e)}},children:t})}l.displayName="ReleasesProvider";const c=(0,s.createContext)(void 0);function h(){const e=(0,s.useContext)(c);if(!e)throw new Error("releasesContext was called outside of ReleasesProvider");return e}c.Consumer},"./app/views/dashboardsV2/detail.tsx":(e,t,a)=>{a.d(t,{R:()=>ve,Z:()=>Se});var s=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/core-js/modules/es.array.includes.js"),a("../node_modules/core-js/modules/es.string.replace.js"),a("../node_modules/react/index.js")),n=a("../node_modules/react-router/es/index.js"),o=a("../node_modules/lodash/cloneDeep.js"),d=a.n(o),l=a("../node_modules/lodash/isEqual.js"),c=a.n(l),h=a("../node_modules/lodash/omit.js"),u=a.n(h),p=a("./app/actionCreators/dashboards.tsx"),m=a("./app/actionCreators/indicator.tsx"),g=a("./app/actionCreators/modal.tsx"),b=a("./app/components/breadcrumbs.tsx"),f=a("./app/components/datePageFilter.tsx"),v=a("./app/components/environmentPageFilter.tsx"),w=a("./app/components/hookOrDefault.tsx"),y=a("./app/components/layouts/thirds.tsx"),Z=a("./app/components/modals/widgetViewerModal/utils.tsx"),x=a("./app/components/noProjectMessage.tsx"),D=a("./app/components/organizations/pageFilterBar.tsx"),E=a("./app/components/organizations/pageFilters/container.tsx"),S=a("./app/components/projectPageFilter.tsx"),C=a("./app/components/sentryDocumentTitle.tsx"),j=a("./app/locale.tsx"),P=a("./app/styles/organization.tsx"),A=a("./app/styles/space.tsx"),_=a("./app/utils.tsx"),k=a("./app/utils/analytics.tsx"),I=a("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),z=a("./app/utils/withApi.tsx"),W=a("./app/utils/withOrganization.tsx"),R=a("./app/utils/withProjects.tsx"),N=a("./app/views/dashboardsV2/utils.tsx"),q=a("./app/views/performance/landing/metricsDataSwitcherAlert.tsx"),L=a("./app/views/performance/data.tsx"),M=a("./app/views/performance/landing/metricsDataSwitcher.tsx"),U=a("./app/views/dashboardsV2/widgetViewer/widgetViewerContext.tsx"),V=a("./app/components/acl/feature.tsx"),T=a("./app/components/acl/featureDisabled.tsx"),B=a("./app/components/assistant/guideAnchor.tsx"),F=a("./app/components/button.tsx"),$=a("./app/components/buttonBar.tsx"),O=a("./app/components/confirm.tsx"),X=a("./app/components/hovercard.tsx"),Y=a("./app/components/tooltip.tsx"),K=a("./app/icons/index.tsx"),H=a("./app/views/dashboardsV2/types.tsx"),G=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function J(e){let{organization:t,dashboardState:a,dashboards:s,hasUnsavedFilters:i,widgetLimitReached:n,onEdit:o,onCommit:d,onDelete:l,onCancel:c,onAddWidget:h}=e;function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,j.t)("Cancel");return(0,G.tZ)(F.ZP,{"data-test-id":"dashboard-cancel",onClick:e=>{e.preventDefault(),c()},children:e})}return[H.n3.EDIT,H.n3.PENDING_DELETE].includes(a)?(0,G.BX)(ee,{gap:1,children:[u(),(0,G.tZ)(O.Z,{priority:"danger",message:(0,j.t)("Are you sure you want to delete this dashboard?"),onConfirm:l,disabled:s.length<=1,children:(0,G.tZ)(F.ZP,{"data-test-id":"dashboard-delete",priority:"danger",children:(0,j.t)("Delete")})}),(0,G.tZ)(F.ZP,{"data-test-id":"dashboard-commit",onClick:e=>{e.preventDefault(),d()},priority:"primary",children:(0,j.t)("Save and Finish")})]},"edit-controls"):a===H.n3.CREATE?(0,G.BX)(ee,{gap:1,children:[u(),(0,G.tZ)(F.ZP,{"data-test-id":"dashboard-commit",onClick:e=>{e.preventDefault(),d()},priority:"primary",children:(0,j.t)("Save and Finish")})]},"create-controls"):a===H.n3.PREVIEW?(0,G.BX)(ee,{gap:1,children:[u((0,j.t)("Go Back")),(0,G.tZ)(F.ZP,{"data-test-id":"dashboard-commit",onClick:e=>{e.preventDefault(),d()},priority:"primary",children:(0,j.t)("Add Dashboard")})]},"preview-controls"):(0,G.tZ)(ee,{gap:1,children:(0,G.tZ)(Q,{children:e=>(0,G.BX)(r.Fragment,{children:[(0,G.tZ)(F.ZP,{"data-test-id":"dashboard-edit",onClick:e=>{e.preventDefault(),o()},icon:(0,G.tZ)(K.yl,{}),disabled:!e||i,title:i&&ve,priority:"default",children:(0,j.t)("Edit Dashboard")}),e?(0,G.tZ)(Y.Z,{title:(0,j._N)("Max widgets ([maxWidgets]) per dashboard reached.",{maxWidgets:H.ZU}),disabled:!n,children:(0,G.tZ)(B.Z,{disabled:!t.features.includes("dashboards-releases"),target:"releases_widget",children:(0,G.tZ)(F.ZP,{"data-test-id":"add-widget-library",priority:"primary",disabled:n,icon:(0,G.tZ)(K.N_,{isCircled:!0}),onClick:()=>{(0,I.Z)("dashboards_views.widget_library.opened",{organization:t}),h()},children:(0,j.t)("Add Widget")})})}):null]})})},"controls")}J.displayName="Controls";const Q=e=>{let{children:t}=e;return(0,G.tZ)(V.Z,{hookName:"feature-disabled:dashboards-edit",features:["organizations:dashboards-edit"],renderDisabled:e=>(0,G.tZ)(X.uI,{body:(0,G.tZ)(T.Z,{features:e.features,hideHelpToggle:!0,featureName:(0,j.t)("Dashboard Editing")}),children:e.children(e)}),children:e=>{let{hasFeature:a}=e;return t(a)}})};Q.displayName="DashboardEditFeature";const ee=(0,i.Z)($.ZP,{target:"e78awt50"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-auto-flow:row;grid-row-gap:",(0,A.Z)(1),";width:100%;}"),te=J;var ae=a("./app/views/dashboardsV2/dashboard.tsx"),se=a("./app/views/dashboardsV2/data.tsx"),ie=a("./app/utils/queryString.tsx"),re=a("./app/utils/releases/releasesProvider.tsx"),ne=a("./app/utils/useOrganization.tsx"),oe=a("./app/utils/usePageFilters.tsx"),de=a("./app/views/dashboardsV2/releasesSelectControl.tsx");function le(e){var t,a;let{filters:s,hasUnsavedChanges:i,isEditingDashboard:n,isPreview:o,location:d,onCancel:l,onDashboardFilterChange:c,onSave:h}=e;const{selection:u}=(0,oe.Z)(),p=(0,ne.Z)(),m=null!==(t=null!==(a=d.query)&&void 0!==a&&a[H.qA.RELEASE]?(0,ie.qP)(d.query[H.qA.RELEASE]):null==s?void 0:s[H.qA.RELEASE])&&void 0!==t?t:[];return(0,G.BX)(ce,{children:[(0,G.BX)(D.Z,{condensed:!0,children:[(0,G.tZ)(S.Z,{disabled:n}),(0,G.tZ)(v.Z,{disabled:n}),(0,G.tZ)(f.Z,{alignDropdown:"left",disabled:n})]}),(0,G.tZ)(V.Z,{features:["dashboards-top-level-filter"],children:(0,G.BX)(r.Fragment,{children:[(0,G.tZ)(he,{children:(0,G.tZ)(ue,{children:(0,G.tZ)(re.lR,{organization:p,selection:u,children:(0,G.tZ)(de.Z,{handleChangeFilter:c,selectedReleases:m,isDisabled:n})})})}),i&&!n&&!o&&(0,G.BX)(he,{children:[(0,G.tZ)(F.ZP,{priority:"primary",onClick:h,children:(0,j.t)("Save")}),(0,G.tZ)(F.ZP,{onClick:l,children:(0,j.t)("Cancel")})]})]})})]})}le.displayName="FiltersBar";const ce=(0,i.Z)("div",{target:"eecuk2e2"})("display:flex;flex-direction:row;gap:",(0,A.Z)(1.5),";margin-bottom:",(0,A.Z)(2),";@media (max-width: ",(e=>e.theme.breakpoints.small),"){display:grid;grid-auto-flow:row;}"),he=(0,i.Z)($.ZP,{target:"eecuk2e1"})("display:grid;gap:",(0,A.Z)(1.5),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;align-items:flex-start;gap:",(0,A.Z)(1.5),";}"),ue=(0,i.Z)("div",{target:"eecuk2e0"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){max-width:300px;}");var pe=a("./app/views/dashboardsV2/layoutUtils.tsx"),me=a("./app/components/editableText.tsx");function ge(e){let{dashboard:t,isEditing:a,onUpdate:s}=e;return(0,G.tZ)("div",{children:t?(0,G.tZ)(me.Z,{isDisabled:!a,value:t.title,onChange:e=>s({...t,title:e}),errorMessage:(0,j.t)("Please set a title for this dashboard"),autoSelect:!0}):(0,j.t)("Dashboards")})}ge.displayName="DashboardTitle";const be=ge,fe=(0,j.t)("You have unsaved changes, are you sure you want to leave?"),ve=(0,j.t)("You have unsaved dashboard filters. You can save or discard them."),we=(0,w.Z)({hookName:"component:dashboards-header"});class ye extends r.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{dashboardState:this.props.initialState,modifiedDashboard:this.updateModifiedDashboard(this.props.initialState),widgetLimitReached:this.props.dashboard.widgets.length>=H.ZU,setData:e=>{this.setState(e)}}),(0,s.Z)(this,"onEdit",(()=>{const{dashboard:e}=this.props;(0,k.ec)({eventKey:"dashboards2.edit.start",eventName:"Dashboards2: Edit start",organization_id:parseInt(this.props.organization.id,10)}),this.setState({dashboardState:H.n3.EDIT,modifiedDashboard:(0,N.qk)(e)})})),(0,s.Z)(this,"onRouteLeave",(()=>{const{dashboard:e}=this.props,{modifiedDashboard:t}=this.state;if(![H.n3.VIEW,H.n3.PENDING_DELETE,H.n3.PREVIEW].includes(this.state.dashboardState)&&!c()(t,e))return fe})),(0,s.Z)(this,"onUnload",(e=>{const{dashboard:t}=this.props,{modifiedDashboard:a}=this.state;[H.n3.VIEW,H.n3.PENDING_DELETE,H.n3.PREVIEW].includes(this.state.dashboardState)||c()(a,t)||(e.preventDefault(),e.returnValue=fe)})),(0,s.Z)(this,"onDelete",(e=>()=>{const{api:t,organization:a,location:s}=this.props;if(null==e||!e.id)return;const i=this.state.dashboardState;this.setState({dashboardState:H.n3.PENDING_DELETE},(()=>{(0,p.iM)(t,a.slug,e.id).then((()=>{(0,m.S9)((0,j.t)("Dashboard deleted")),(0,k.ec)({eventKey:"dashboards2.delete",eventName:"Dashboards2: Delete",organization_id:parseInt(this.props.organization.id,10)}),n.browserHistory.replace({pathname:`/organizations/${a.slug}/dashboards/`,query:s.query})})).catch((()=>{this.setState({dashboardState:i})}))}))})),(0,s.Z)(this,"onCancel",(()=>{const{organization:e,dashboard:t,location:a,params:s}=this.props,{modifiedDashboard:i}=this.state;let r=!c()(i,t);if(t.widgets.every((e=>{let{layout:t}=e;return!(0,_.ri)(t)}))&&(r=!c()({...i,widgets:null==i?void 0:i.widgets.map((e=>u()(e,"layout")))},{...t,widgets:t.widgets.map((e=>u()(e,"layout")))})),!r||this.isPreview||confirm(fe)){if(s.dashboardId)return(0,k.ec)({eventKey:"dashboards2.edit.cancel",eventName:"Dashboards2: Edit cancel",organization_id:parseInt(this.props.organization.id,10)}),void this.setState({dashboardState:H.n3.VIEW,modifiedDashboard:null});(0,k.ec)({eventKey:"dashboards2.create.cancel",eventName:"Dashboards2: Create cancel",organization_id:parseInt(this.props.organization.id,10)}),n.browserHistory.replace({pathname:`/organizations/${e.slug}/dashboards/`,query:a.query})}})),(0,s.Z)(this,"handleChangeFilter",(e=>{var t;const{dashboard:a,location:s}=this.props,{modifiedDashboard:i}=this.state,r=i||a;Object.keys(e).every((t=>{var a;return!(null!==(a=r.filters)&&void 0!==a&&a[t])&&0===e[t].length}))||c()(e,null===(t=a.filters)||void 0===t?void 0:t.release)||n.browserHistory.push({...s,query:{...s.query,...e}})})),(0,s.Z)(this,"handleUpdateWidgetList",(e=>{const{organization:t,dashboard:a,api:s,onDashboardUpdate:i,location:r}=this.props,{modifiedDashboard:o}=this.state,d=(0,pe.RI)(e),l=(0,pe.Sp)(d),c={...(0,N.qk)(o||a),widgets:(0,pe._F)(e,l)};this.setState({modifiedDashboard:c,widgetLimitReached:e.length>=H.ZU}),this.isEditing||this.isPreview||(0,p.Y)(s,t.slug,c).then((e=>{i&&(i(e),this.setState({modifiedDashboard:null})),(0,m.S9)((0,j.t)("Dashboard updated")),a&&e.id!==a.id&&n.browserHistory.replace({pathname:`/organizations/${t.slug}/dashboard/${e.id}/`,query:{...r.query}})}),(()=>{}))})),(0,s.Z)(this,"handleAddCustomWidget",(e=>{const{dashboard:t}=this.props,{modifiedDashboard:a}=this.state,s=a||t;this.onUpdateWidget([...s.widgets,e])})),(0,s.Z)(this,"onAddWidget",(()=>{const{organization:e,dashboard:t,router:a,location:s,params:{dashboardId:i}}=this.props;this.setState({modifiedDashboard:(0,N.qk)(t)}),e.features.includes("new-widget-builder-experience-design")&&!e.features.includes("new-widget-builder-experience-modal-access")&&i?a.push({pathname:`/organizations/${e.slug}/dashboard/${i}/widget/new/`,query:{...s.query,source:H.EN.DASHBOARDS}}):(0,g.openAddDashboardWidgetModal)({organization:e,dashboard:t,onAddLibraryWidget:e=>this.handleUpdateWidgetList(e),source:H.EN.LIBRARY})})),(0,s.Z)(this,"onCommit",(()=>{const{api:e,organization:t,location:a,dashboard:s,onDashboardUpdate:i}=this.props,{modifiedDashboard:r,dashboardState:o}=this.state;switch(o){case H.n3.PREVIEW:case H.n3.CREATE:if(r){this.isPreview&&(0,I.Z)("dashboards_manage.templates.add",{organization:t,dashboard_id:s.id,dashboard_title:s.title,was_previewed:!0});let i=r;var d;t.features.includes("dashboards-top-level-filter")&&(i={...(0,N.qk)(r),...(0,N.EK)(a),filters:null!==(d=(0,N.lM)(a))&&void 0!==d?d:r.filters}),(0,p.JR)(e,t.slug,i,this.isPreview).then((e=>{(0,m.S9)((0,j.t)("Dashboard created")),(0,k.ec)({eventKey:"dashboards2.create.complete",eventName:"Dashboards2: Create complete",organization_id:parseInt(t.id,10)}),this.setState({dashboardState:H.n3.VIEW}),n.browserHistory.replace({pathname:`/organizations/${t.slug}/dashboard/${e.id}/`,query:{query:u()(a.query,H.qA.RELEASE)}})}),(()=>{}))}break;case H.n3.EDIT:if(r)return c()(s,r)?void this.setState({dashboardState:H.n3.VIEW,modifiedDashboard:null}):void(0,p.Y)(e,t.slug,r).then((e=>{i&&i(e),(0,m.S9)((0,j.t)("Dashboard updated")),(0,k.ec)({eventKey:"dashboards2.edit.complete",eventName:"Dashboards2: Edit complete",organization_id:parseInt(t.id,10)}),this.setState({dashboardState:H.n3.VIEW,modifiedDashboard:null}),s&&e.id!==s.id&&n.browserHistory.replace({pathname:`/organizations/${t.slug}/dashboard/${e.id}/`,query:{...a.query}})}),(()=>{}));this.setState({dashboardState:H.n3.VIEW,modifiedDashboard:null});break;case H.n3.VIEW:default:this.setState({dashboardState:H.n3.VIEW,modifiedDashboard:null})}})),(0,s.Z)(this,"setModifiedDashboard",(e=>{this.setState({modifiedDashboard:e})})),(0,s.Z)(this,"onUpdateWidget",(e=>{this.setState((t=>({...t,widgetLimitReached:e.length>=H.ZU,modifiedDashboard:{...t.modifiedDashboard||this.props.dashboard,widgets:e}})))}))}componentDidMount(){const{route:e,router:t}=this.props;t.setRouteLeaveHook(e,this.onRouteLeave),window.addEventListener("beforeunload",this.onUnload),this.checkIfShouldMountWidgetViewerModal()}componentDidUpdate(e){this.checkIfShouldMountWidgetViewerModal(),e.initialState!==this.props.initialState&&this.setState({dashboardState:this.props.initialState})}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}checkIfShouldMountWidgetViewerModal(){const{params:{widgetId:e,dashboardId:t},organization:a,dashboard:s,location:i,router:r}=this.props,{seriesData:n,tableData:o,pageLinks:l,totalIssuesCount:c}=this.state;if((0,Z.X)(i.pathname)){var h;const b=(0,_.ri)(e)&&(null!==(h=s.widgets.find((t=>{let{id:a}=t;return a===String(e)})))&&void 0!==h?h:s.widgets[e]);var p;b?((0,g.openWidgetViewerModal)({organization:a,widget:b,seriesData:n,tableData:o,pageLinks:l,totalIssuesCount:c,onClose:()=>{const e=u()(i.query,Object.values(Z.R));r.push({pathname:i.pathname.replace(/widget\/[0-9]+\/$/,""),query:e})},onEdit:()=>{if(a.features.includes("new-widget-builder-experience-design")&&!a.features.includes("new-widget-builder-experience-modal-access")){const e=s.widgets.indexOf(b);if(t)return void r.push({pathname:`/organizations/${a.slug}/dashboard/${t}/widget/${e}/edit/`,query:{...i.query,source:H.EN.DASHBOARDS}})}(0,g.openAddDashboardWidgetModal)({organization:a,widget:b,onUpdateWidget:e=>{const t=s.widgets.indexOf(b),a=d()(s.widgets);a[t]=e,this.handleUpdateWidgetList(a)},source:H.EN.DASHBOARDS})}}),(0,I.Z)("dashboards_views.widget_viewer.open",{organization:a,widget_type:null!==(p=b.widgetType)&&void 0!==p?p:H.l9.DISCOVER,display_type:b.displayType})):(r.replace({pathname:`/organizations/${a.slug}/dashboard/${s.id}/`,query:i.query}),(0,m.Iw)((0,j.t)("Widget not found")))}}updateModifiedDashboard(e){const{dashboard:t}=this.props;switch(e){case H.n3.PREVIEW:case H.n3.CREATE:case H.n3.EDIT:return(0,N.qk)(t);default:return null}}get isPreview(){const{dashboardState:e}=this.state;return H.n3.PREVIEW===e}get isEditing(){const{dashboardState:e}=this.state;return[H.n3.EDIT,H.n3.CREATE,H.n3.PENDING_DELETE].includes(e)}get isWidgetBuilderRouter(){const{location:e,params:t,organization:a}=this.props,{dashboardId:s,widgetIndex:i}=t;return[`/organizations/${a.slug}/dashboards/new/widget/new/`,`/organizations/${a.slug}/dashboard/${s}/widget/new/`,`/organizations/${a.slug}/dashboards/new/widget/${i}/edit/`,`/organizations/${a.slug}/dashboard/${s}/widget/${i}/edit/`].includes(e.pathname)}get dashboardTitle(){const{dashboard:e}=this.props,{modifiedDashboard:t}=this.state;return t?t.title:e.title}renderWidgetBuilder(){const{children:e,dashboard:t}=this.props,{modifiedDashboard:a}=this.state;return(0,r.isValidElement)(e)?(0,r.cloneElement)(e,{dashboard:null!=a?a:t,onSave:this.isEditing?this.onUpdateWidget:this.handleUpdateWidgetList}):e}renderDefaultDashboardDetail(){const{organization:e,dashboard:t,dashboards:a,params:s,router:i,location:r}=this.props,{modifiedDashboard:n,dashboardState:o,widgetLimitReached:d}=this.state,{dashboardId:l}=s;return(0,G.tZ)(E.Z,{defaultSelection:{datetime:{start:null,end:null,utc:!1,period:se.GY}},skipLoadLastUsed:e.features.includes("dashboards-top-level-filter")&&(0,N.Lo)(t),children:(0,G.tZ)(P.JH,{children:(0,G.BX)(x.Z,{organization:e,children:[(0,G.BX)(Ze,{children:[(0,G.tZ)(xe,{children:(0,G.tZ)(be,{dashboard:null!=n?n:t,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing})}),(0,G.tZ)(te,{organization:e,dashboards:a,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onAddWidget:this.onAddWidget,onDelete:this.onDelete(t),dashboardState:o,widgetLimitReached:d})]}),(0,G.tZ)(we,{organization:e}),(0,G.BX)(Ee,{condensed:!0,children:[(0,G.tZ)(S.Z,{}),(0,G.tZ)(v.Z,{}),(0,G.tZ)(f.Z,{alignDropdown:"left"})]}),(0,G.tZ)(ae.ZP,{paramDashboardId:l,dashboard:null!=n?n:t,organization:e,isEditing:this.isEditing,widgetLimitReached:d,onUpdate:this.onUpdateWidget,handleUpdateWidgetList:this.handleUpdateWidgetList,handleAddCustomWidget:this.handleAddCustomWidget,isPreview:this.isPreview,router:i,location:r})]})})})}getBreadcrumbLabel(){const{dashboardState:e}=this.state;let t=this.dashboardTitle;return e===H.n3.CREATE?t=(0,j.t)("Create Dashboard"):this.isPreview&&(t=(0,j.t)("Preview Dashboard")),t}renderDashboardDetail(){const{api:e,organization:t,dashboard:a,dashboards:s,params:i,router:r,location:o,newWidget:d,onSetNewWidget:l,onDashboardUpdate:c,projects:h}=this.props,{modifiedDashboard:g,dashboardState:f,widgetLimitReached:v,seriesData:w,setData:Z}=this.state,{dashboardId:D}=i,S=t.features.includes("dashboards-top-level-filter")&&"default-overview"!==a.id&&f!==H.n3.CREATE&&(0,N.S$)(a,o),P=(0,L.C)(o,h),A=a.widgets.some(N.Gx);return(0,G.tZ)(C.Z,{title:a.title,orgSlug:t.slug,children:(0,G.tZ)(E.Z,{defaultSelection:{datetime:{start:null,end:null,utc:!1,period:se.GY}},skipLoadLastUsed:t.features.includes("dashboards-top-level-filter")&&(0,N.Lo)(a),children:(0,G.tZ)(De,{children:(0,G.BX)(x.Z,{organization:t,children:[(0,G.BX)(y.h4,{children:[(0,G.BX)(y.oB,{children:[(0,G.tZ)(b.Z,{crumbs:[{label:(0,j.t)("Dashboards"),to:`/organizations/${t.slug}/dashboards/`},{label:this.getBreadcrumbLabel()}]}),(0,G.tZ)(y.Dx,{children:(0,G.tZ)(be,{dashboard:null!=g?g:a,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing})})]}),(0,G.tZ)(y.kP,{children:(0,G.tZ)(te,{organization:t,dashboards:s,hasUnsavedFilters:S,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onAddWidget:this.onAddWidget,onDelete:this.onDelete(a),dashboardState:f,widgetLimitReached:v})})]}),(0,G.tZ)(y.uT,{children:(0,G.BX)(y.or,{fullWidth:!0,children:[(t.features.includes("dashboards-mep")||t.features.includes("mep-rollout-flag"))&&A?(0,G.tZ)(M.d,{organization:t,eventView:P,location:o,hideLoadingIndicator:!0,children:e=>(0,G.tZ)(q.v,{organization:t,eventView:P,projects:h,location:o,router:r,...e})}):null,(0,G.tZ)(le,{filters:(null!=g?g:a).filters,location:o,hasUnsavedChanges:S,isEditingDashboard:f!==H.n3.CREATE&&this.isEditing,isPreview:this.isPreview,onDashboardFilterChange:this.handleChangeFilter,onCancel:()=>{(0,N.Z5)(a,o),this.setState({modifiedDashboard:{...null!=g?g:a,filters:a.filters}})},onSave:()=>{var s;const i={...(0,N.qk)(null!=g?g:a),...(0,N.EK)(o),filters:null!==(s=(0,N.lM)(o))&&void 0!==s?s:(null!=g?g:a).filters};(0,p.Y)(e,t.slug,i).then((e=>{c&&(c(e),this.setState({modifiedDashboard:null})),(0,m.S9)((0,j.t)("Dashboard filters updated")),n.browserHistory.replace({pathname:`/organizations/${t.slug}/dashboard/${e.id}/`,query:u()(o.query,H.qA.RELEASE)})}),(()=>{}))}}),(0,G.tZ)(U.M.Provider,{value:{seriesData:w,setData:Z},children:(0,G.tZ)(ae.ZP,{paramDashboardId:D,dashboard:null!=g?g:a,organization:t,isEditing:this.isEditing,widgetLimitReached:v,onUpdate:this.onUpdateWidget,handleUpdateWidgetList:this.handleUpdateWidgetList,handleAddCustomWidget:this.handleAddCustomWidget,router:r,location:o,newWidget:d,onSetNewWidget:l,isPreview:this.isPreview})})]})})]})})})})}render(){const{organization:e}=this.props;return this.isWidgetBuilderRouter?this.renderWidgetBuilder():e.features.includes("dashboards-edit")?this.renderDashboardDetail():this.renderDefaultDashboardDetail()}}ye.displayName="DashboardDetail";const Ze=(0,i.Z)("div",{target:"e1anno2f3"})("display:grid;grid-template-columns:minmax(0, 1fr);grid-row-gap:",(0,A.Z)(2),";align-items:center;margin-bottom:",(0,A.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:minmax(0, 1fr) max-content;grid-column-gap:",(0,A.Z)(2),";height:40px;}"),xe=(0,i.Z)(y.Dx,{target:"e1anno2f2"})({name:"1i9vogi",styles:"margin-top:0"}),De=(0,i.Z)(P.JH,{target:"e1anno2f1"})({name:"1hcx8jb",styles:"padding:0"}),Ee=(0,i.Z)(D.Z,{target:"e1anno2f0"})("margin-bottom:",(0,A.Z)(2),";"),Se=(0,R.Z)((0,z.Z)((0,W.Z)(ye)))},"./app/views/dashboardsV2/releasesSelectControl.tsx":(e,t,a)=>{a.d(t,{Z:()=>y});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/react/index.js")),r=a("../node_modules/lodash/debounce.js"),n=a.n(r),o=a("./app/components/badge.tsx"),d=a("./app/components/featureBadge.tsx"),l=a("./app/components/forms/compactSelect.tsx"),c=a("./app/components/textOverflow.tsx"),h=a("./app/constants/index.tsx"),u=a("./app/icons/index.tsx"),p=a("./app/locale.tsx"),m=a("./app/styles/space.tsx"),g=a("./app/utils/releases/releasesProvider.tsx"),b=a("./app/views/dashboardsV2/types.tsx"),f=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v=[{label:(0,p.t)("Latest Release(s)"),value:"latest"}];function w(e){let{handleChangeFilter:t,selectedReleases:a,className:s,isDisabled:r}=e;const{releases:o,loading:m,onSearch:w}=(0,g.Bo)(),[y,E]=(0,i.useState)(a);(0,i.useEffect)((()=>{E(a)}),[a]);const S=y.length?(0,f.BX)(c.Z,{children:[y[0]," "]}):(0,p.t)("All Releases");return(0,f.tZ)(l.Z,{multiple:!0,isClearable:!0,isSearchable:!0,isDisabled:r,isLoading:m,menuTitle:(0,f.BX)(D,{children:[(0,p.t)("Filter Releases"),(0,f.tZ)(d.Z,{type:"beta"})]}),className:s,onInputChange:n()((e=>{w(e)}),h.Dk),options:[{value:"_releases",label:(0,p.t)("Sorted by date created"),options:o.length?[...v,...o.map((e=>{var t;return{label:null!==(t=e.shortVersion)&&void 0!==t?t:e.version,value:e.version}}))]:[]}],onChange:e=>E(e.map((e=>e.value))),onClose:()=>{w(""),null==t||t({[b.qA.RELEASE]:y})},value:y,triggerLabel:(0,f.BX)(x,{children:[S," ",y.length>1&&(0,f.tZ)(Z,{text:"+"+(y.length-1)})]}),triggerProps:{icon:(0,f.tZ)(u.Or,{})}})}w.displayName="ReleasesSelectControl";const y=w,Z=(0,s.Z)(o.Z,{target:"e1ysg74p2"})({name:"ozd7xs",styles:"flex-shrink:0"}),x=(0,s.Z)("span",{target:"e1ysg74p1"})({name:"yn3x4i",styles:"width:100%;text-align:left;align-items:center;display:inline-grid;grid-template-columns:1fr auto"}),D=(0,s.Z)("span",{target:"e1ysg74p0"})("display:inline-block;padding-top:",(0,m.Z)(.5),";padding-bottom:",(0,m.Z)(.5),";")},"./app/views/performance/landing/metricsDataSwitcher.tsx":(e,t,a)=>{a.d(t,{d:()=>f});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=a("../node_modules/react/index.js"),r=a("../node_modules/react-router/es/index.js"),n=a("./app/components/loadingIndicator.tsx"),o=a("./app/utils/dates.tsx"),d=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),l=a("../node_modules/lodash/omit.js"),c=a.n(l),h=a("./app/utils/discover/genericDiscoverQuery.tsx"),u=a("./app/utils/useApi.tsx"),p=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){let{eventView:t,location:a}=e;return c()(t.getEventsAPIPayload(a),["field","sort","per_page","query"])}function g(e){let{children:t,...a}=e;const s=(0,u.Z)();return(0,p.tZ)(h.ZP,{route:"events-metrics-compatibility",getRequestPayload:m,...a,api:s,children:e=>{let{tableData:a,...s}=e;return t({tableData:a,...s})}})}g.displayName="MetricsCompatibilityQuery";var b=a("./app/utils/queryString.tsx");function f(e){if(!(0,d.gp)(e.organization))return(0,p.tZ)(i.Fragment,{children:e.children({forceTransactionsOnly:!0})});const t={location:e.location,orgSlug:e.organization.slug,cursor:"0:0:0"},a=function(e){const t=e.clone();return t.start||t.end||(t.statsPeriod?(0,o.YJ)(t.statsPeriod)>1&&(t.statsPeriod="1h",t.start=void 0,t.end=void 0):(t.statsPeriod="1h",t.start=void 0,t.end=void 0)),t}(e.eventView);return(0,p.tZ)(i.Fragment,{children:(0,p.tZ)(g,{eventView:a,...t,children:t=>{if(t.isLoading&&!e.hideLoadingIndicator)return(0,p.tZ)(i.Fragment,{children:(0,p.tZ)(y,{children:(0,p.tZ)(n.Z,{})})});const a=function(e,t){const a={forceTransactionsOnly:!0};if(!e)return a;const s=e.compatible_projects;return t?a:e?function(e){var t;const a=w(e);return null===(t=e.dynamic_sampling_projects)||void 0===t||!t.length||0===a.metricsCount}(e)||function(e){return!w(e).metricsCount}(e)?a:function(e){return w(e).nullCount>0}(e)?{shouldWarnIncompatibleSDK:!0,forceTransactionsOnly:!0,compatibleProjects:s}:function(e){const t=w(e);return t.unparamCount>=t.metricsCount}(e)?{shouldNotifyUnnamedTransactions:!0,forceTransactionsOnly:!0,compatibleProjects:s}:function(e){return w(e).unparamCount>0}(e)?{shouldNotifyUnnamedTransactions:!0,compatibleProjects:s,forceTransactionsOnly:!1}:{forceTransactionsOnly:!1}:a}(t.tableData,!!t.error);return(0,p.tZ)(v,{eventView:e.eventView,location:e.location,outcome:a,switcherChildren:e.children})}})})}function v(e){let{switcherChildren:t,outcome:a,location:s,eventView:n}=e;const{query:o}=s,l=(0,b.ro)(o[d.tm],""),c=(0,b.ro)(o.query,""),h=l===d.oR.transactionsOnly,u=c&&h&&!a.forceTransactionsOnly;return(0,i.useEffect)((()=>{u&&r.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:void 0,[d.tm]:void 0}})}),[u,s]),c&&h&&!a.forceTransactionsOnly&&(n.query=""),(0,p.tZ)(i.Fragment,{children:t(a)})}function w(e){let{sum:t}=e;try{const e=Number(t.metrics);return{metricsCount:e,unparamCount:Number(t.metrics_unparam),nullCount:Number(t.metrics_null)}}catch(e){return{metricsCount:0,unparamCount:0,nullCount:0}}}f.displayName="MetricsDataSwitcher",v.displayName="MetricsSwitchHandler";const y=(0,s.Z)("div",{target:"e1r04u5n0"})({name:"zl1inp",styles:"display:flex;justify-content:center"})},"./app/views/performance/landing/metricsDataSwitcherAlert.tsx":(e,t,a)=>{a.d(t,{v:()=>b}),a("../node_modules/core-js/modules/es.array.includes.js");var s=a("../node_modules/react/index.js"),i=a("./app/actionCreators/pageFilters.tsx"),r=a("./app/components/alert.tsx"),n=a("./app/components/globalSdkUpdateAlert.tsx"),o=a("./app/components/links/externalLink.tsx"),d=a("./app/components/links/link.tsx"),l=a("./app/components/sidebar/types.tsx"),c=a("./app/locale.tsx"),h=a("./app/stores/sidebarPanelStore.tsx"),u=a("./app/views/performance/utils.tsx"),p=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const m=["javascript","node","python","ruby","native","react-native","dotnet","unity","flutter","dart","java","android"],g=["javascript.cordova","javascript.nextjs","native.minidumps"];function b(e){const t=(0,s.useCallback)((()=>{h.Z.activatePanel(l.z.Broadcasts)}),[]),a=(0,s.useMemo)((()=>{const t=(0,u.bY)(e.location,e.projects);if(t.length<1)return null;const a=t[0];if(g.includes(a))return null;const s=m.find((e=>a.includes(e)));return s?`https://docs.sentry.io/platforms/${s}/enriching-events/transaction-name/`:null}),[e.location,e.projects]),b=(0,s.useCallback)((()=>{(0,i.id)(e.compatibleProjects||[],e.router)}),[e.compatibleProjects,e.router]);if(!e.shouldNotifyUnnamedTransactions&&!e.shouldWarnIncompatibleSDK)return(0,p.tZ)(n._,{});const f=(0,u.uq)(e);if(e.shouldWarnIncompatibleSDK){const a=(0,p.tZ)(d.Z,{to:"",onClick:t,children:(0,c.t)("update your SDK version")});return(0,u.rL)(e.eventView)?(0,p.tZ)(r.Z,{type:"warning",showIcon:!0,"data-test-id":"landing-mep-alert-multi-project-incompatible",children:(0,c._N)("A few projects are incompatible with server side sampling. You can either [updateSDK] or [onlyViewCompatible]",{updateSDK:a,onlyViewCompatible:(0,p.tZ)(d.Z,{to:"",onClick:b,children:(0,c.t)("only view compatible projects.")})})}):(0,p.tZ)(r.Z,{type:"warning",showIcon:!0,"data-test-id":"landing-mep-alert-single-project-incompatible",children:(0,c._N)("Your project has an outdated SDK which is incompatible with server side sampling. To enable this feature [updateSDK].",{updateSDK:a})})}if(e.shouldNotifyUnnamedTransactions){const e=(0,p.tZ)(d.Z,{to:f,children:(0,c.t)("open them in Discover.")});return a?(0,p.tZ)(r.Z,{type:"warning",showIcon:!0,"data-test-id":"landing-mep-alert-unnamed-discover-or-set",children:(0,c._N)("You have some unparameterized transactions which are incompatible with server side sampling. You can either [setNames] or [discover]",{setNames:(0,p.tZ)(o.Z,{href:a,children:(0,c.t)("set names manually")}),discover:e})}):(0,p.tZ)(r.Z,{type:"warning",showIcon:!0,"data-test-id":"landing-mep-alert-unnamed-discover",children:(0,c._N)("You have some unparameterized transactions which are incompatible with server side sampling. You can [discover]",{discover:e})})}return null}},"../node_modules/downsample/methods/ASAP.js":(e,t)=>{function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}var s={"PointValueExtractor<unknown>":e=>"function"==typeof e,XYDataPoint:e=>null!=e&&s.X(e.x)&&"number"==typeof e.y,X:e=>"number"==typeof e||e instanceof Date},i=e=>{for(var t=0,a=0;a<e.length;a+=1)t+=e[a];return t/e.length},r=(e,t)=>{for(var a=e.length,s=new Array(a),i=0;i<a;i++)s[i]=t(e[i],i);return s},n=e=>s["PointValueExtractor<unknown>"](e)?e:t=>t[e],o=(e,t)=>({x:e,y:t}),d=()=>({x:e=>{var t=s.XYDataPoint(e)?e.x:e[0];return t instanceof Date?t.getTime():t},y:e=>"y"in e?e.y:e[1],toPoint:o}),l=(e,t)=>new e.constructor(t),c=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=[],i=0,r=0;r<t;r++)i+=e[r];for(var n=t;n<=e.length;n++)(n-t)%a==0&&s.push(i/t),i+=e[n]-e[n-t];return s},h=e=>{var t=n(e.x),a=n(e.y),s=e.toPoint;return function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0===e.length)return e;for(var o,d=r(e,a),c=r(e,t),h=l(e,0),u=0,p=0;p<i;p++)u+=d[p];for(var m=i;m<=d.length;m++)(m-i)%n==0&&(o=s((c[m-i]+c[m-1])/2,u/i,m-i),h[h.length]=o),u+=d[m]-d[m-i];return h}};function u(e,t){if(e.length!=t.length)throw"Mismatched lengths";var a=e.length;0!=a&&(0==(a&a-1)?function(e,t){if(e.length!=t.length)throw"Mismatched lengths";var a=e.length;if(1!=a){for(var s=-1,i=0;i<32;i++)1<<i==a&&(s=i);if(-1==s)throw"Length is not a power of 2";for(var r=new Array(a/2),n=new Array(a/2),o=0;o<a/2;o++)r[o]=Math.cos(2*Math.PI*o/a),n[o]=Math.sin(2*Math.PI*o/a);for(var d=0;d<a;d++){var l=m(d,s);if(l>d){var c=e[d];e[d]=e[l],e[l]=c,c=t[d],t[d]=t[l],t[l]=c}}for(var h=2;h<=a;h*=2)for(var u=h/2,p=a/h,g=0;g<a;g+=h)for(var b=g,f=0;b<g+u;b++,f+=p){var v=e[b+u]*r[f]+t[b+u]*n[f],w=-e[b+u]*n[f]+t[b+u]*r[f];e[b+u]=e[b]-v,t[b+u]=t[b]-w,e[b]+=v,t[b]+=w}}}(e,t):function(e,t){if(e.length!=t.length)throw"Mismatched lengths";for(var a=e.length,s=1;s<2*a+1;)s*=2;for(var i=new Array(a),r=new Array(a),n=0;n<a;n++){var o=n*n%(2*a);i[n]=Math.cos(Math.PI*o/a),r[n]=Math.sin(Math.PI*o/a)}for(var d=new Array(s),l=new Array(s),c=0;c<a;c++)d[c]=e[c]*i[c]+t[c]*r[c],l[c]=-e[c]*r[c]+t[c]*i[c];for(var h=a;h<s;h++)d[h]=l[h]=0;var m=new Array(s),g=new Array(s);m[0]=i[0],g[0]=r[0];for(var b=1;b<a;b++)m[b]=m[s-b]=i[b],g[b]=g[s-b]=r[b];for(var f=a;f<=s-a;f++)m[f]=g[f]=0;var v=new Array(s),w=new Array(s);!function(e,t,a,s,i,r){if(e.length!=t.length||e.length!=a.length||a.length!=s.length||e.length!=i.length||i.length!=r.length)throw"Mismatched lengths";var n=e.length;e=e.slice(),t=t.slice(),a=a.slice(),s=s.slice(),u(e,t),u(a,s);for(var o=0;o<n;o++){var d=e[o]*a[o]-t[o]*s[o];t[o]=t[o]*a[o]+e[o]*s[o],e[o]=d}p(e,t);for(var l=0;l<n;l++)i[l]=e[l]/n,r[l]=t[l]/n}(d,l,m,g,v,w);for(var y=0;y<a;y++)e[y]=v[y]*i[y]+w[y]*r[y],t[y]=-v[y]*r[y]+w[y]*i[y]}(e,t))}function p(e,t){u(t,e)}function m(e,t){for(var a=0,s=0;s<t;s++)a=a<<1|1&e,e>>>=1;return a}h(d());var g,b,f,v=e=>(e=>{for(var t=i(e),a=0,s=0;s<e.length;s+=1)a+=(e[s]-t)*(e[s]-t);return Math.sqrt(a/e.length)})((e=>{var t=e.length-1;if(t<1)return[];for(var a=new Array(t),s=0;s<t;s++)a[s]=e[s+1]-e[s];return a})(e)),w=e=>{for(var t,a,s=e.length,r=i(e),n=0,o=0,d=0;d<s;d++)n+=(a=(t=e[d]-r)*t)*a,o+=a;return s*n/(o*o)},y=(g=d(),b=n(g.y),f=h(g),function e(t,s){if(0===t.length)return t;if(s<=0)throw new Error("Supplied non-positive resolution parameter to ASAP: ".concat(s));if(t.length>=2*s){var n=Math.trunc(t.length/s);return e(f(t,n,n),s)}for(var o=r(t,b),d=((e,t)=>{for(var s=e.length,r=i(e),n=Math.pow(2,Math.trunc(Math.log2(s))+1),o=new Array(n).fill(0),d=new Array(n).fill(0),l=0;l<s;l+=1)o[l]=e[l]-r;u(o,d);for(var c=0;c<o.length;c+=1)o[c]=Math.pow(o[c],2)+Math.pow(d[c],2),d[c]=0;p(o,d);for(var h=[],m=1;m<t;m++)h[m]=o[m]/o[0];var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,a=e.length;if(a<=1)return[[],0];var s=0,i=[];if(e.length>1)for(var r=e[1]>e[0],n=1,o=2;o<e.length;o+=1)!r&&e[o]>e[o-1]?(n=o,r=!r):r&&e[o]>e[n]?n=o:r&&e[o]<e[o-1]&&(n>1&&e[n]>t&&(i.push(n),e[n]>s&&(s=e[n])),r=!r);if(i.length<=1)for(var d=2;d<a;d+=1)i.push(d);return[i,s]}(h),b=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],s=!0,i=!1,r=void 0;try{for(var n,o=e[Symbol.iterator]();!(s=(n=o.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(e){i=!0,r=e}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(g,2);return{correlations:h,peaks:b[0],maxCorrelation:b[1]}})(o,Math.round(o.length/10)),l=d.correlations,h=d.peaks,m=d.maxCorrelation,g=w(o),y=v(o),Z=1,x=1,D=-1,E=o.length/10,S=h.length-1;S>=0;S-=1){var C=h[S];if(C<x||1===C)break;if(!(Math.sqrt(1-l[C])*Z>Math.sqrt(1-l[Z])*C)){var j=c(o,C,1),P=w(j),A=v(j);P>=g&&(A<y&&(y=A,Z=C),x=Math.round(Math.max(C*Math.sqrt((m-1)/(l[C]-1)),x)),D<0&&(D=S))}}return D>0&&(D<h.length-2&&(E=h[D+1]),x=Math.max(x,h[D]+1)),Z=((e,t,a,s,i,r)=>{for(;e<=t;){var n=Math.round((e+t)/2),o=c(a,n,1);if(w(o)>=i){var d=v(o);d<s&&(r=n,s=d),e=n+1}else t=n-1}return r})(x,E,o,y,g,Z),f(t,Z,1)});t.Cl=y}}]);
//# sourceMappingURL=../sourcemaps/app_views_dashboardsV2_detail_tsx-node_modules_downsample_methods_ASAP_js.db54f714fb64f12bc882d9ce157bc30b.js.map