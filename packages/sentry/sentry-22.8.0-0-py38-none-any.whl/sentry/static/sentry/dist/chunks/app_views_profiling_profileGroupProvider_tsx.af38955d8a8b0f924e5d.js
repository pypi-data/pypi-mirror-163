"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_profiling_profileGroupProvider_tsx"],{"./app/components/profiling/breadcrumb.tsx":(e,t,r)=>{r.d(t,{a:()=>u});var o=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/react/index.js")),n=r("./app/components/breadcrumbs.tsx"),s=r("./app/locale.tsx"),a=r("./app/utils/profiling/routes.tsx"),l=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e){let{location:t,organization:r,trails:o}=e;const n=(0,i.useMemo)((()=>o.map((e=>function(e,t){let{location:r,organization:o}=t;switch(e.type){case"landing":return{to:(0,a.XR)({location:r,orgSlug:o.slug}),label:(0,s.t)("Profiling"),preservePageFilters:!0};case"profile summary":return{to:(0,a.R0)({location:r,orgSlug:o.slug,projectSlug:e.payload.projectSlug,transaction:e.payload.transaction}),label:(0,s.t)("Profile Summary"),preservePageFilters:!0};case"flamechart":return{to:("flamechart"===e.payload.tab?a.TH:a.Qy)({location:r,orgSlug:o.slug,projectSlug:e.payload.projectSlug,profileId:e.payload.profileId}),label:e.payload.transaction,preservePageFilters:!0};default:throw new Error(`Unknown breadcrumb type: ${JSON.stringify(e)}`)}}(e,{location:t,organization:r})))),[t,r,o]);return(0,l.tZ)(p,{crumbs:n})}u.displayName="Breadcrumb";const p=(0,o.Z)(n.Z,{target:"edt2s550"})({name:"1hcx8jb",styles:"padding:0"})},"./app/utils/profiling/callTreeNode.tsx":(e,t,r)=>{r.d(t,{n:()=>s});var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=r("./app/utils/profiling/frame.tsx"),n=r("./app/utils/profiling/weightedNode.tsx");class s extends n.${constructor(e,t){super(),(0,o.Z)(this,"frame",void 0),(0,o.Z)(this,"locked",!1),(0,o.Z)(this,"parent",void 0),(0,o.Z)(this,"recursive",void 0),(0,o.Z)(this,"children",[]),this.recursive=null,this.parent=t,this.frame=e}setParent(e){this.parent=e}setRecursiveThroughNode(e){this.recursive=e}isRecursive(){return!!this.recursive}isDirectRecursive(){return!!this.parent&&this.parent.frame===this.frame}isLocked(){return this.locked}lock(){this.locked=!0}isRoot(){return i.R.Root.name===this.frame.name}}(0,o.Z)(s,"Root",new s(i.R.Root,null))},"./app/utils/profiling/frame.tsx":(e,t,r)=>{r.d(t,{R:()=>s});var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=r("./app/locale.tsx"),n=r("./app/utils/profiling/weightedNode.tsx");class s extends n.${constructor(e,t){super(),(0,o.Z)(this,"key",void 0),(0,o.Z)(this,"name",void 0),(0,o.Z)(this,"file",void 0),(0,o.Z)(this,"line",void 0),(0,o.Z)(this,"column",void 0),(0,o.Z)(this,"is_application",void 0),(0,o.Z)(this,"image",void 0),(0,o.Z)(this,"resource",void 0),(0,o.Z)(this,"threadId",void 0),this.key=e.key,this.file=e.file,this.name=e.name,this.resource=e.resource,this.line=e.line,this.column=e.column,this.is_application="web"===t?void 0===e.line&&void 0===e.column:!!e.is_application,this.image=e.image,this.threadId=e.threadId,"web"===t&&(e.name||(this.name=(0,i.t)("anonymous")),void 0===e.line&&void 0===e.column&&(this.name+=` ${(0,i.t)("[native code]")}`))}isRoot(){return this.name===s.Root.name}}(0,o.Z)(s,"Root",new s({key:"sentry root",name:"sentry root",is_application:!1},"mobile"))},"./app/utils/profiling/profile/importProfile.tsx":(e,t,r)=>{r.d(t,{T:()=>E,B:()=>T}),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=r("../node_modules/@sentry/hub/esm/exports.js");function i(e){return!("type"in e)&&Array.isArray(e.resources)}function n(e){return"object"==typeof e&&"traceEvents"in e}function s(e){return Array.isArray(e)&&!e.some((e=>"P"===e.ph&&"ProfileChunk"===e.name))}var a=r("./app/utils/profiling/frame.tsx"),l=r("./app/utils/profiling/profile/utils.tsx"),u=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=(r("../node_modules/core-js/modules/es.array.at.js"),r("../node_modules/core-js/modules/es.string.at-alternative.js"),r("./app/utils.tsx")),d=r("./app/utils/profiling/callTreeNode.tsx"),c=r("./app/utils/profiling/profile/profile.tsx");class h extends c.N{constructor(){super(...arguments),(0,u.Z)(this,"appendOrderStack",[this.appendOrderTree]),(0,u.Z)(this,"stack",[]),(0,u.Z)(this,"lastValue",0)}static FromProfile(e,t){const r=new h(e.endValue-e.startValue,e.startValue,e.endValue,e.name,e.unit,e.threadID);r.lastValue=Math.max(0,e.startValue);for(const o of e.events){const e=t[o.frame];if(!e)throw new Error(`Cannot retrieve event: ${o.frame} from frame index`);switch(o.type){case"O":r.enterFrame(e,o.at);break;case"C":r.leaveFrame(e,o.at);break;default:throw new TypeError(`Unknown event type ${o.type}`)}}return r.build()}addWeightToFrames(e){const t=e-this.lastValue;for(const e of this.stack)e.addToTotalWeight(t);const r=(0,p.SI)(this.stack);r&&r.addToSelfWeight(e)}addWeightsToNodes(e){const t=e-this.lastValue;for(const e of this.appendOrderStack)e.addToTotalWeight(t);const r=(0,p.SI)(this.appendOrderStack);r&&r.addToSelfWeight(t)}enterFrame(e,t){this.addWeightToFrames(t),this.addWeightsToNodes(t);const r=(0,p.SI)(this.appendOrderStack);if(r){const o=t-this.lastValue;if(o<0)throw new Error("Sample delta cannot be negative, samples may be corrupt or out of order");o>0&&(this.samples.push(r),this.weights.push(o));const i=(0,p.SI)(r.children);let n;i&&!i.isLocked()&&i.frame===e?n=i:(n=new d.n(e,r),r.children.push(n));let s=this.appendOrderStack.length-1;for(;s>=0;){if(this.appendOrderStack[s].frame===n.frame){this.appendOrderStack[s].setRecursiveThroughNode(n),n.setRecursiveThroughNode(this.appendOrderStack[s]);break}s--}this.appendOrderStack.push(n)}this.stack.push(e),this.lastValue=t}leaveFrame(e,t){this.addWeightToFrames(t),this.addWeightsToNodes(t);const r=this.appendOrderStack.pop();if(void 0===r)throw new Error("Unbalanced stack");r.lock();const o=t-this.lastValue;o>0&&(this.samples.push(r),this.weights.push(o),this.minFrameDuration=Math.min(o,this.minFrameDuration)),this.stack.pop(),this.lastValue=t}build(){if(this.appendOrderStack.length>1)throw new Error("Unbalanced append order stack");return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}class m extends h{}function f(e,t){return t.ts-e.ts}function g(e,t){if(!e.length&&!t.length)throw new Error("Profile contains no events");const r=e[e.length-1],o=t[t.length-1];return o?r?r.ts<o.ts?"B":o.ts<r.ts?"E":"B":"E":"B"}function v(e,t,r){var o,i;let n=`pid (${e})`,s=`tid (${t})`;const l=r.filter((e=>"B"===e.ph||"E"===e.ph||"X"===e.ph||"M"===e.ph)),u=[],p=[];for(let r=0;r<l.length;r++){const o=l[r];if("M"===o.ph){if("thread_name"===o.name&&"string"==typeof o.args.name){s=`${o.args.name} (${t})`;continue}if("process_name"===o.name&&"string"==typeof o.args.name){n=`${o.args.name} (${e})`;continue}}var d,c;"B"!==o.ph?"E"!==o.ph?"X"!==o.ph||"number"!=typeof o.dur&&"number"!=typeof o.tdur||(u.push({...o,ph:"B"}),p.push({...o,ph:"E",ts:o.ts+(null!==(d=null!==(c=o.dur)&&void 0!==c?c:o.tdur)&&void 0!==d?d:0)})):p.push(o):u.push(o)}if(u.sort(f),p.sort(f),!u.length)throw new Error("Profile does not contain any frame events");const h=u[u.length-1].ts,v=null!==(o=null===(i=p[0])||void 0===i?void 0:i.ts)&&void 0!==o?o:u[0].ts;if("number"!=typeof h)throw new Error("First begin event contains no timestamp");if("number"!=typeof v)throw new Error("Last end event contains no timestamp");const w=new m(v-h,h,v,`${n}: ${s}`,"microseconds",t),S=[],b=new Map;for(;u.length>0||p.length>0;){const e=g(u,p);if("B"!==e)if("E"!==e);else{const e=p.pop();let t=y(e);if(void 0===S[S.length-1])throw new Error(`Unable to close frame from an empty stack, attempting to close ${JSON.stringify(e)}`);const r=y(S[S.length-1]);for(let e=p.length-2;e>0&&!(p[e].ts>p[p.length-1].ts);e--){const o=y(p[e]);if(r.key===o.key){const r=p[p.length-1];p[p.length-1]=p[e],p[e]=r,t=o;break}}if(!b.has(t.key))throw new Error(`Cannot leave frame that was never entered, leaving ${t.key}`);const o=b.get(t.key);w.leaveFrame(o,e.ts-h),S.pop()}else{const e=u.pop();if(!e)throw new Error("Nothing to take from begin queue");const t=y(e);b.has(t.key)||b.set(t.key,new a.R(t));const r=b.get(t.key);w.enterFrame(r,e.ts-h),S.push(e)}}for(;S.length;){const e=y(S.pop()),t=b.get(e.key);if(!t)throw new Error(`Cannot leave frame that was never entered, leaving ${e.key}`);w.leaveFrame(t,t.totalWeight)}return w.build()}function y(e){const t=JSON.stringify(e.args);return{key:t,name:`${(null==e?void 0:e.name)||"Unknown"} ${t}`.trim()}}var w=r("./app/locale.tsx");function S(e){switch(e){case"gc":return(0,w.t)("Garbage Collection");case"style":return(0,w.t)("Style");case"layout":return(0,w.t)("Layout");case"paint":return(0,w.t)("Paint");case"script":return(0,w.t)("Script");case"other":return(0,w.t)("Other");default:return e}}function b(e){return{name:S(e),resourceId:void 0,line:void 0,column:void 0}}function k(e,t,r,o){const i=[];if(o&&"script"!==o&&i.unshift(new a.R({...b(o),key:o})),void 0===t)return i;let n=e.stacks[t];if(!n)throw new Error(`Missing stackId ${t} in trace, cannot resolve stack`);for(;void 0!==n;){if(void 0===e.frames[n.frameId])return i;i.unshift(r[n.frameId]),n=void 0!==n.parentId?e.stacks[n.parentId]:void 0}return i}class I extends c.N{static FromProfile(e,t){const r=["gc","layout","other","paint","script","style"];for(const e of r)t[e]=new a.R({key:e,name:S(e),line:void 0,column:void 0,is_application:!1},"web");const o=e.samples[0].timestamp,i=(0,p.SI)(e.samples).timestamp,n=new I(i-o,o,i,"JSSelfProfiling","milliseconds",0);n.appendSample(k(e,e.samples[0].stackId,t,e.samples[0].marker),0);for(let r=1;r<e.samples.length;r++)"gc"===e.samples[r].marker?n.appendSample(k(e,e.samples[r-1].stackId,t,e.samples[r].marker),e.samples[r].timestamp-e.samples[r-1].timestamp):n.appendSample(k(e,e.samples[r].stackId,t,e.samples[r].marker),e.samples[r].timestamp-e.samples[r-1].timestamp);return n.build()}appendSample(e,t){let r=this.appendOrderTree;const o=[];for(const i of e){const e=(0,p.SI)(r.children);if(e&&!e.isLocked()&&e.frame===i)r=e;else{const e=r;r=new d.n(i,r),e.children.push(r)}r.addToTotalWeight(t);let n=o.length-1;for(;n>=0;){if(o[n].frame===r.frame){o[n].setRecursiveThroughNode(r),r.setRecursiveThroughNode(o[n]);break}n--}o.push(r)}r.addToSelfWeight(t),t>0&&(this.minFrameDuration=Math.min(t,this.minFrameDuration));for(const e of r.children)e.lock();r.frame.addToSelfWeight(t);for(const e of o)e.frame.addToTotalWeight(t);r===(0,p.SI)(this.samples)?this.weights[this.weights.length-1]+=t:(this.samples.push(r),this.weights.push(t))}build(){return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}class x extends c.N{static FromProfile(e,t){const r=new x(e.endValue-e.startValue,e.startValue,e.endValue,e.name,e.unit,e.threadID);if(e.samples.length!==e.weights.length)throw new Error(`Expected samples.length (${e.samples.length}) to equal weights.length (${e.weights.length})`);for(let o=0;o<e.samples.length;o++){const i=e.samples[o],n=e.weights[o];r.appendSampleWithWeight(i.map((e=>{if(!t[e])throw new Error(`Could not resolve frame ${e} in frame index`);return t[e]})),n)}return r.build()}appendSampleWithWeight(e,t){if(0===t)return;let r=this.appendOrderTree;const o=[];for(const i of e){const e=(0,p.SI)(r.children);if(e&&!e.isLocked()&&e.frame===i)r=e;else{const e=r;r=new d.n(i,r),e.children.push(r)}r.addToTotalWeight(t);let n=o.length-1;for(;n>=0;){if(o[n].frame===r.frame){o[n].setRecursiveThroughNode(r),r.setRecursiveThroughNode(o[n]);break}n--}o.push(r)}r.addToSelfWeight(t),this.minFrameDuration=Math.min(t,this.minFrameDuration);for(const e of r.children)e.lock();r.frame.addToSelfWeight(t);for(const e of o)e.frame.addToTotalWeight(t);r===(0,p.SI)(this.samples)?this.weights[this.weights.length-1]+=t:(this.samples.push(r),this.weights.push(t))}build(){return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}function T(e,t){const r=o.Yr({op:"import",name:"profiles.import"});try{if(i(e))return r&&r.setTag("profile.type","js-self-profile"),function(e,t,r){return{traceID:t,name:t,activeProfileIndex:0,profiles:[j(e,(0,l.vw)(e.frames),r)]}}(e,t,{transaction:r});if(function(e){return s(e)||n(e)||function(e){return Array.isArray(e)&&e.some((e=>"P"===e.ph&&"ProfileChunk"===e.name))}(e)}(e))return r&&r.setTag("profile.type","chrometrace"),function(e,t,r){if(n(e))throw new Error("Chrometrace object format is not yet supported");if(s(e))return function(e,t,r){const o=[],i=function(e){const t=new Map;for(let r=0;r<e.length;r++){const o=e[r];if("number"!=typeof o.pid)continue;if("number"!=typeof o.tid)continue;let i=t.get(o.pid);i||(i=new Map,t.set(o.pid,i));let n=i.get(o.tid);n||(n=[],i.set(o.tid,n)),n.push(o)}return t}(e);for(const[e,t]of i)for(const[i,n]of t)(0,l.GB)(null==r?void 0:r.transaction,(()=>o.push(v(e,i,null!=n?n:[]))),{op:"profile.import",description:"chrometrace"});return{name:"chrometrace",traceID:t,activeProfileIndex:0,profiles:o}}(e,t,r);throw new Error("Failed to parse trace input format")}(e,t,{transaction:r});if(function(e){return"object"==typeof e&&"transactionName"in e&&"profiles"in e&&Array.isArray(e.profiles)&&"shared"in e}(e))return r&&r.setTag("profile.type","schema"),function(e,t,r){var o;const i=(0,l.vw)(e.shared.frames);return{traceID:t,name:e.transactionName,activeProfileIndex:null!==(o=e.activeProfileIndex)&&void 0!==o?o:0,profiles:e.profiles.map((e=>j(e,i,r)))}}(e,t,{transaction:r});throw new Error("Unsupported trace format")}catch(e){throw r&&r.setStatus("internal_error"),e}finally{r&&r.finish()}}function j(e,t,r){let{transaction:o}=r;if(function(e){return"type"in e&&"evented"===e.type}(e))return o?(0,l.GB)(o,(()=>h.FromProfile(e,t)),{op:"profile.import",description:"evented"}):h.FromProfile(e,t);if(function(e){return"type"in e&&"sampled"===e.type}(e))return o?(0,l.GB)(o,(()=>x.FromProfile(e,t)),{op:"profile.import",description:"sampled"}):x.FromProfile(e,t);if(i(e))return o?(0,l.GB)(o,(()=>I.FromProfile(e,(0,l.vw)(e.frames))),{op:"profile.import",description:"js-self-profile"}):I.FromProfile(e,(0,l.vw)(e.frames));throw new Error("Unrecognized trace format")}const F=e=>{try{return[JSON.parse(e),null]}catch(e){return[null,e]}},P=[e=>F(e),e=>F(e+"]")];function N(e){return new Promise(((t,r)=>{const o=new FileReader;o.addEventListener("load",(e=>{var o;"string"!=typeof(null===(o=e.target)||void 0===o?void 0:o.result)?r("Failed to read string contents of input file"):t(e.target.result)})),o.addEventListener("error",(()=>{r("Failed to read string contents of input file")})),o.readAsText(e)}))}async function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P;const r=await N(e);for(const o of t){const[t]=o(r);if(t){if("object"!=typeof t||null===t)throw new TypeError("Input JSON is not an object");return T(t,e.name)}}throw new Error("Failed to parse input JSON")}},"./app/utils/profiling/profile/profile.tsx":(e,t,r)=>{r.d(t,{N:()=>a});var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./app/utils.tsx")),n=r("./app/utils/profiling/callTreeNode.tsx"),s=r("./app/utils/profiling/frame.tsx");class a{constructor(e,t,r,i,a,l){(0,o.Z)(this,"duration",void 0),(0,o.Z)(this,"startedAt",void 0),(0,o.Z)(this,"endedAt",void 0),(0,o.Z)(this,"threadId",void 0),(0,o.Z)(this,"unit","microseconds"),(0,o.Z)(this,"name","Unknown"),(0,o.Z)(this,"appendOrderTree",new n.n(s.R.Root,null)),(0,o.Z)(this,"framesInStack",new Set),(0,o.Z)(this,"minFrameDuration",Number.POSITIVE_INFINITY),(0,o.Z)(this,"samples",[]),(0,o.Z)(this,"weights",[]),this.threadId=l,this.duration=e,this.startedAt=t,this.endedAt=r,this.name=i,this.unit=a}static Empty(){return new a(1e3,0,1e3,"","milliseconds",0).build()}forEach(e,t){let r=[],o=0,n=0;for(const s of this.samples){let a=s;for(;a&&!a.isRoot()&&-1===r.indexOf(a);)a=a.parent;for(;r.length>0&&(0,i.SI)(r)!==a;)t(r.pop(),o);const l=[];let u=s;for(;u&&!u.isRoot()&&u!==a;)l.unshift(u),u=u.parent;for(const t of l)e(t,o);r=r.concat(l),o+=this.weights[n++]}for(let e=r.length-1;e>=0;e--)t(r[e],o)}build(){return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}},"./app/utils/profiling/profile/utils.tsx":(e,t,r)=>{r.d(t,{GB:()=>a,ql:()=>u,vw:()=>n,w_:()=>s}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=r("./app/utils.tsx"),i=r("./app/utils/profiling/frame.tsx");function n(e,t){return t?e.reduce(((e,r,o)=>(e[o]=new i.R({key:o,resource:void 0!==r.resourceId?t.resources[r.resourceId]:void 0,...r},"web"),e)),{}):e.reduce(((e,t,r)=>(e[r]=new i.R({key:r,...t}),e)),{})}function s(e){let t=null;return function(r){return t?(t.args===r&&void 0!==t.args&&void 0!==r||(t.args=r,t.value=e(r)),t.value):(t={args:r,value:e(r)},t.value)}}function a(e,t,r){if(!(0,o.ri)(e))return t();const i=e.startChild(r);try{return t()}catch(e){throw i.setStatus("internal_error"),e}finally{i.finish()}}function l(e,t){const r=[];for(const o of e){const e={...o,parent:null,children:[]};if(t[o.key]){for(const r of t[o.key])e.children.push(...l([r],t));r.push(e)}}return r}const u=e=>{const t={},r=[];return function(e,t,r){function o(e,i){if(t[e.key]||(t[e.key]=[]),t[e.key].push(i),e.children.length)for(let t=0;t<e.children.length;t++)o(e.children[t],e);else r.push(e)}for(let n=0;n<e.length;n++){var i;null!==(i=e[n].children)&&void 0!==i&&i.length||r.push(e[n]),t[e[n].key]||(t[e[n].key]=[]);for(let t=0;t<e[n].children.length;t++)o(e[n].children[t],e[n])}}(e,t,r),l(r,t)}},"./app/utils/profiling/routes.tsx":(e,t,r)=>{function o(e){let{orgSlug:t}=e;return`/organizations/${t}/profiling/`}function i(e){let{orgSlug:t}=e;return`/organizations/${t}/profiling/onboarding/`}function n(e){let{orgSlug:t,projectSlug:r,profileId:o}=e;return`/organizations/${t}/profiling/profile/${r}/${o}/flamechart/`}function s(e){let{location:t,orgSlug:r,query:i}=e;return{pathname:o({orgSlug:r}),query:{...null==t?void 0:t.query,...i}}}function a(e){let{location:t,orgSlug:r,projectSlug:o,transaction:i,query:n}=e;const s=function(e){let{orgSlug:t,projectSlug:r}=e;return`/organizations/${t}/profiling/summary/${r}/`}({orgSlug:r,projectSlug:o});return{pathname:s,query:{...null==t?void 0:t.query,...n,transaction:i}}}function l(e){let{location:t,orgSlug:r,projectSlug:o,profileId:i,query:s}=e;return{pathname:n({orgSlug:r,projectSlug:o,profileId:i}),query:{...null==t?void 0:t.query,...s}}}function u(e){let{location:t,orgSlug:r,projectSlug:o,profileId:i,query:n}=e;const s=function(e){let{orgSlug:t,projectSlug:r,profileId:o}=e;return`/organizations/${t}/profiling/profile/${r}/${o}/details/`}({orgSlug:r,projectSlug:o,profileId:i});return{pathname:s,query:{...null==t?void 0:t.query,...n}}}r.d(t,{E7:()=>o,O$:()=>n,Qy:()=>u,R0:()=>a,TH:()=>l,XR:()=>s,i5:()=>i})},"./app/utils/profiling/weightedNode.tsx":(e,t,r)=>{r.d(t,{$:()=>i});var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js");class i{constructor(){(0,o.Z)(this,"totalWeight",0),(0,o.Z)(this,"selfWeight",0)}addToTotalWeight(e){return this.totalWeight+=e,this.totalWeight}addToSelfWeight(e){return this.selfWeight+=e,this.selfWeight}}},"./app/utils/useLocation.tsx":(e,t,r)=>{r.d(t,{T:()=>i});var o=r("./app/utils/useRouteContext.tsx");function i(){return(0,o.s)().location}},"./app/utils/useParams.tsx":(e,t,r)=>{r.d(t,{U:()=>i});var o=r("./app/utils/useRouteContext.tsx");function i(){return(0,o.s)().params}},"./app/views/profiling/profileGroupProvider.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>S,useProfileGroup:()=>y}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.error.cause.js");var o=r("../node_modules/react/index.js"),i=r("../node_modules/@sentry/hub/esm/exports.js"),n=r("../node_modules/react-router/es/index.js"),s=r("./app/components/layouts/thirds.tsx"),a=r("./app/components/profiling/breadcrumb.tsx"),l=r("./app/locale.tsx"),u=r("./app/utils/profiling/routes.tsx"),p=r("./app/utils/useLocation.tsx"),d=r("./app/utils/useOrganization.tsx"),c=r("./app/utils/useParams.tsx"),h=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(){var e,t;const r=(0,c.U)(),o=(0,p.T)(),i=(0,d.Z)(),[m]=y(),f="resolved"===m.type?m.data.name:"",g=null!==(e=r.eventId)&&void 0!==e?e:"",v=null!==(t=r.projectId)&&void 0!==t?t:"";return(0,h.BX)(s.h4,{style:{gridTemplateColumns:"minmax(0, 1fr)"},children:[(0,h.tZ)(s.oB,{style:{marginBottom:0},children:(0,h.tZ)(a.a,{location:o,organization:i,trails:[{type:"landing"},{type:"profile summary",payload:{projectSlug:v,transaction:f}},{type:"flamechart",payload:{transaction:f,profileId:g,projectSlug:v,tab:o.pathname.endsWith("details/")?"details":"flamechart"}}]})}),(0,h.BX)(s.mL,{underlined:!0,children:[(0,h.tZ)("li",{className:o.pathname.endsWith("flamechart/")?"active":void 0,children:(0,h.tZ)(n.Link,{to:(0,u.TH)({orgSlug:i.slug,projectSlug:v,profileId:g,location:o}),children:(0,l.t)("Flamechart")})}),(0,h.tZ)("li",{className:o.pathname.endsWith("details/")?"active":void 0,children:(0,h.tZ)(n.Link,{to:(0,u.Qy)({orgSlug:i.slug,projectSlug:v,profileId:g,location:o}),children:(0,l.t)("Details")})})]})]})}m.displayName="ProfileHeader";var f=r("./app/utils/profiling/profile/importProfile.tsx"),g=r("./app/utils/useApi.tsx");const v=(0,o.createContext)(null),y=()=>{const e=(0,o.useContext)(v);if(!e)throw new Error("useProfileGroup was called outside of ProfileGroupProvider");return e};function w(e){const t=(0,g.Z)(),r=(0,d.Z)(),n=(0,c.U)(),[s,a]=(0,o.useState)({type:"initial"});return(0,o.useEffect)((()=>{if(n.eventId&&n.projectId)return a({type:"loading"}),function(e,t,r,o){return e.requestPromise(`/projects/${o.slug}/${r}/profiling/profiles/${t}/`,{method:"GET",includeAllArgs:!0}).then((e=>{let[r]=e;return(0,f.B)(r,t)}))}(t,n.eventId,n.projectId,r).then((e=>{a({type:"resolved",data:e})})).catch((e=>{const t=e.toString()||(0,l.t)("Error: Unable to load profiles");a({type:"errored",error:t}),i.Tb(e)})),()=>{t.clear()}}),[n.eventId,n.projectId,t,r]),(0,h.BX)(v.Provider,{value:[s,a],children:[(0,h.tZ)(m,{}),e.children]})}w.displayName="ProfileGroupProvider";const S=w}}]);
//# sourceMappingURL=../sourcemaps/app_views_profiling_profileGroupProvider_tsx.bc4bac65f0ff1160560bf1afe638ae27.js.map