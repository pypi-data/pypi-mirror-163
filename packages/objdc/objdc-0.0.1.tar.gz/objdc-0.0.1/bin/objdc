#!/usr/bin/env python3
import os
import sys
import yaml
import argparse
from objdc import (parse_args, SettingsContext,
    custom_open_input, custom_open_output, custom_close_input, custom_close_output,
    custom_load, custom_dump)

yaml.Dumper.ignore_aliases = lambda *args : True


def main():
    args = parse_args(sys.argv)
    sc = SettingsContext(args)
    #confs = sc.get_confs()
    #print_traceback=confs["main"]["print_traceback"]
    inp_f = custom_open_input(sc)
    out_f = custom_open_output(sc)
    obj = custom_load(sc, inp_f)
    custom_dump(sc, out_f, obj)
    custom_close_input(sc, inp_f)
    custom_close_output(sc, out_f)


if __name__ == "__main__":
    main()
